{"version":3,"file":"RegionResize.js","sources":["../../../../Grid/lib/Grid/column/NumberColumn.js","../../../../Grid/lib/Grid/feature/RegionResize.js"],"sourcesContent":["import Column from './Column.js';\nimport ColumnStore from '../data/ColumnStore.js';\nimport NumberFormat from '../../Core/helper/util/NumberFormat.js';\nimport ObjectHelper from '../../Core/helper/ObjectHelper.js';\n\n/**\n * @module Grid/column/NumberColumn\n */\n\n/**\n * A column for showing/editing numbers.\n *\n * Default editor is a {@link Core.widget.NumberField NumberField}.\n *\n * ```javascript\n * new Grid({\n *     appendTo : document.body,\n *     columns : [\n *         { type: 'number', min: 0, max : 100, field: 'score' }\n *     ]\n * });\n * ```\n *\n * Provide a {@link Core/helper/util/NumberFormat} config as {@link #config-format} to be able to show currency. For\n * example:\n * ```javascript\n * new Grid({\n *     appendTo : document.body,\n *     columns : [\n *         {\n *             type   : 'number',\n *             format : {\n *                style    : 'currency'\n *                currency : 'USD',\n *             }\n *         }\n *     ]\n * });\n * ```\n *\n * @extends Grid/column/Column\n * @classType number\n * @inlineexample Grid/column/NumberColumn.js\n * @column\n */\nexport default class NumberColumn extends Column {\n    //region Config\n\n    static type = 'number';\n\n    // Type to use when auto adding field\n    static fieldType = 'number';\n\n    static fields = [\n        'format',\n\n        /**\n         * The minimum value for the field used during editing.\n         * @config {Number} min\n         * @category Common\n         */\n        'min',\n\n        /**\n         * The maximum value for the field used during editing.\n         * @config {Number} max\n         * @category Common\n         */\n        'max',\n\n        /**\n         * Step size for the field used during editing.\n         * @config {Number} step\n         * @category Common\n         */\n        'step',\n\n        /**\n         * Large step size for the field used during editing. In effect for `SHIFT + click/arrows`\n         * @config {Number} largeStep\n         * @category Common\n         */\n        'largeStep',\n\n        /**\n         * Unit to append to displayed value.\n         * @config {String} unit\n         * @category Common\n         */\n        'unit'\n    ];\n\n    static get defaults() {\n        return {\n            filterType : 'number',\n\n            /**\n             * The format to use for rendering numbers.\n             *\n             * By default, the locale's default number formatter is used. For `en-US`, the\n             * locale default is a maximum of 3 decimal digits, using thousands-based grouping.\n             * This would render the number `1234567.98765` as `'1,234,567.988'`.\n             *\n             * @config {String|NumberFormatConfig}\n             */\n            format : ''\n        };\n    }\n\n    //endregion\n\n    //region Init\n\n    get defaultEditor() {\n        const { format, name, max, min, step, largeStep, align } = this;\n\n        // Remove any undefined configs, to allow config system to use default values instead\n        return ObjectHelper.cleanupProperties({\n            type      : 'numberfield',\n            format,\n            name,\n            max,\n            min,\n            step,\n            largeStep,\n            textAlign : align\n        });\n    }\n\n    get formatter() {\n        const\n            me         = this,\n            { format } = me;\n\n        let formatter = me._formatter;\n\n        if (!formatter || me._lastFormat !== format) {\n            me._formatter = formatter = NumberFormat.get(me._lastFormat = format);\n        }\n\n        return formatter;\n    }\n\n    formatValue(value) {\n        if (value != null) {\n            value = this.formatter.format(value);\n\n            if (this.unit) {\n                value = `${value}${this.unit}`;\n            }\n        }\n        return value ?? '';\n    }\n\n    /**\n     * Renderer that displays value + optional unit in the cell\n     * @private\n     */\n    defaultRenderer({ value }) {\n        return this.formatValue(value);\n    }\n}\n\nColumnStore.registerColumnType(NumberColumn, true);\nNumberColumn.exposeProperties();\n","import EventHelper from '../../Core/helper/EventHelper.js';\nimport InstancePlugin from '../../Core/mixin/InstancePlugin.js';\nimport GridFeatureManager from '../feature/GridFeatureManager.js';\n\n/**\n * @module Grid/feature/RegionResize\n */\n\n/**\n * Makes the splitter between grid section draggable so you can resize grid sections.\n *\n * {@inlineexample Grid/feature/RegionResize.js}\n *\n * ```javascript\n * // enable RegionResize\n * const grid = new Grid({\n *   features: {\n *     regionResize: true\n *   }\n * });\n * ```\n *\n * This feature is <strong>disabled</strong> by default.\n *\n * @extends Core/mixin/InstancePlugin\n * @demo Grid/features\n * @classtype regionResize\n * @feature\n */\nexport default class RegionResize extends InstancePlugin {\n    // region Init\n\n    static $name ='RegionResize';\n\n    static get pluginConfig() {\n        return {\n            chain : ['onElementPointerDown', 'onElementDblClick', 'onElementTouchMove', 'onSubGridCollapse', 'onSubGridExpand', 'render']\n        };\n    }\n\n    //endregion\n\n    onElementDblClick(event) {\n        const\n            me         = this,\n            { client } = me,\n            splitterEl = event.target.closest('.b-grid-splitter-collapsed');\n\n        // If collapsed splitter is dblclicked and region is not expanding\n        // It is unlikely that user might dblclick splitter twice and even if he does, nothing should happen.\n        // But just in case lets not expand twice.\n        if (splitterEl && !me.expanding) {\n            me.expanding = true;\n\n            let region  = splitterEl.dataset.region,\n                subGrid = client.getSubGrid(region);\n\n            // Usually collapsed splitter means corresponding region is collapsed. But in case of last two regions one\n            // splitter can be collapsed in two directions. So, if corresponding region is expanded then last one is collapsed\n            if (!subGrid.collapsed) {\n                region = client.getLastRegions()[1];\n                subGrid = client.getSubGrid(region);\n            }\n\n            subGrid.expand().then(() => me.expanding = false);\n        }\n    }\n\n    //region Move splitter\n\n    /**\n     * Begin moving splitter.\n     * @private\n     * @param splitterElement Splitter element\n     * @param clientX Initial x position from which new width will be calculated on move\n     */\n    startMove(splitterElement, clientX) {\n        const\n            me              = this,\n            { client }      = me,\n            region          = splitterElement.dataset.region,\n            gridEl          = client.element,\n            nextRegion      = client.regions[client.regions.indexOf(region) + 1],\n            nextSubGrid     = client.getSubGrid(nextRegion),\n            splitterSubGrid = client.getSubGrid(region);\n\n        let\n            subGrid = splitterSubGrid,\n            flip    = 1;\n\n        if (subGrid.flex != null) {\n            // If subgrid has flex, check if next one does not\n            if (nextSubGrid.flex == null) {\n                subGrid = nextSubGrid;\n                flip = -1;\n            }\n        }\n\n        if (client.rtl) {\n            flip *= -1;\n        }\n\n        if (splitterElement.classList.contains('b-grid-splitter-collapsed')) {\n            return;\n        }\n\n        const availableWidth = subGrid.element.offsetWidth + nextSubGrid.element.offsetWidth;\n\n        me.dragContext = {\n            element       : splitterElement,\n            headerEl      : subGrid.header.element,\n            subGridEl     : subGrid.element,\n            subGrid,\n            splitterSubGrid,\n            originalWidth : subGrid.element.offsetWidth,\n            originalX     : clientX,\n            minWidth      : subGrid.minWidth || 0,\n            maxWidth      : Math.min(availableWidth, subGrid.maxWidth || availableWidth),\n            flip\n        };\n\n        gridEl.classList.add('b-moving-splitter');\n        splitterSubGrid.toggleSplitterCls('b-moving');\n\n        me.pointerDetacher = EventHelper.on({\n            element     : document,\n            pointermove : 'onPointerMove',\n            pointerup   : 'onPointerUp',\n            thisObj     : me\n        });\n    }\n\n    /**\n     * Stop moving splitter.\n     * @private\n     */\n    endMove() {\n        const\n            me              = this,\n            { dragContext } = me;\n\n        if (dragContext) {\n            me.pointerDetacher();\n            me.client.element.classList.remove('b-moving-splitter');\n            dragContext.splitterSubGrid.toggleSplitterCls('b-moving', false);\n            me.dragContext = null;\n        }\n    }\n\n    onCollapseClick(subGrid, splitterEl) {\n        const\n            me         = this,\n            { client } = me,\n            region     = splitterEl.dataset.region,\n            regions    = client.getLastRegions();\n\n        // Last splitter in the grid is responsible for collapsing/expanding last 2 regions and is always related to the\n        // left one. Check if we are working with last splitter\n        if (regions[0] === region) {\n            const lastSubGrid = client.getSubGrid(regions[1]);\n            if (lastSubGrid.collapsed) {\n                lastSubGrid.expand();\n                return;\n            }\n        }\n\n        subGrid.collapse();\n    }\n\n    onExpandClick(subGrid, splitterEl) {\n        const\n            me         = this,\n            { client } = me,\n            region     = splitterEl.dataset.region,\n            regions    = client.getLastRegions();\n\n        // Last splitter in the grid is responsible for collapsing/expanding last 2 regions and is always related to the\n        // left one. Check if we are working with last splitter\n        if (regions[0] === region) {\n            if (!subGrid.collapsed) {\n                const lastSubGrid = client.getSubGrid(regions[1]);\n                lastSubGrid.collapse();\n                return;\n            }\n        }\n\n        subGrid.expand();\n    }\n\n    /**\n     * Update splitter position.\n     * @private\n     * @param newClientX\n     */\n    updateMove(newClientX) {\n        const { dragContext } = this;\n\n        if (dragContext) {\n            const\n                difX     = newClientX - dragContext.originalX,\n                newWidth = Math.max(Math.min(dragContext.maxWidth, dragContext.originalWidth + difX * dragContext.flip), 0);\n\n            // SubGrids monitor their own size and keep any splitters synced\n            dragContext.subGrid.width = Math.max(newWidth, dragContext.minWidth);\n        }\n    }\n\n    //endregion\n\n    //region Events\n\n    /**\n     * Start moving splitter on mouse down (on splitter).\n     * @private\n     * @param event\n     */\n    onElementPointerDown(event) {\n        const\n            me            = this,\n            { target }    = event,\n            // Only care about left clicks, avoids a bug found by monkeys\n            splitter      = event.button === 0 && target.closest(':not(.b-row-reordering):not(.b-dragging-event):not(.b-dragging-task):not(.b-dragging-header):not(.b-dragselecting) .b-grid-splitter'),\n            subGrid       = splitter && me.client.getSubGrid(splitter.dataset.region);\n\n        let toggle;\n\n        if (splitter) {\n            if (target.closest('.b-grid-splitter-button-collapse')) {\n                me.onCollapseClick(subGrid, splitter);\n            }\n            else if (target.closest('.b-grid-splitter-button-expand')) {\n                me.onExpandClick(subGrid, splitter);\n            }\n            else {\n                me.startMove(splitter, event.clientX);\n                toggle = splitter;\n            }\n        }\n\n        if (event.pointerType === 'touch') {\n            // Touch on splitter makes splitter wider, touch outside or expand/collapse makes it smaller again\n            me.toggleTouchSplitter(toggle);\n        }\n    }\n\n    /**\n     * Move splitter on mouse move.\n     * @private\n     * @param event\n     */\n    onPointerMove(event) {\n        if (this.dragContext) {\n            this.updateMove(event.clientX);\n            event.preventDefault();\n        }\n    }\n\n    onElementTouchMove(event) {\n        if (this.dragContext) {\n            // Needed to prevent scroll in Mobile Safari, preventing pointermove is not enough\n            event.preventDefault();\n        }\n    }\n\n    /**\n     * Stop moving splitter on mouse up.\n     * @private\n     * @param event\n     */\n    onPointerUp(event) {\n        if (this.dragContext) {\n            this.endMove();\n            event.preventDefault();\n        }\n    }\n\n    onSubGridCollapse({ subGrid }) {\n        const\n            splitterEl = this.client.resolveSplitter(subGrid),\n            regions    = this.client.getLastRegions();\n\n        // if last region was collapsed\n        if (regions[1] === subGrid.region) {\n            splitterEl.classList.add('b-grid-splitter-allow-collapse');\n        }\n    }\n\n    onSubGridExpand({ subGrid }) {\n        const splitterEl = this.client.resolveSplitter(subGrid);\n        splitterEl.classList.remove('b-grid-splitter-allow-collapse');\n    }\n\n    //endregion\n\n    /**\n     * Adds b-touching CSS class to splitterElements when touched. Removes when touched outside.\n     * @private\n     * @param splitterElement\n     */\n    toggleTouchSplitter(splitterElement) {\n        const\n            me                  = this,\n            { touchedSplitter } = me;\n\n        // If other splitter is touched, deactivate old one\n        if (splitterElement && touchedSplitter && splitterElement.dataset.region !== touchedSplitter.dataset.region) {\n            me.toggleTouchSplitter();\n        }\n\n        // Either we have touched a splitter (should activate) or touched outside (should deactivate)\n        const splitterSubGrid = me.client.getSubGrid(splitterElement ? splitterElement.dataset.region : touchedSplitter?.dataset.region);\n        if (splitterSubGrid) {\n            splitterSubGrid.toggleSplitterCls('b-touching', Boolean(splitterElement));\n            if (splitterElement) {\n                splitterSubGrid.startSplitterButtonSyncing();\n            }\n            else {\n                splitterSubGrid.stopSplitterButtonSyncing();\n            }\n        }\n\n        me.touchedSplitter = splitterElement;\n    }\n\n    render() {\n        const { regions, subGrids } = this.client;\n\n        // Multiple regions, only allow collapsing to the edges by hiding buttons\n        if (regions.length > 2) {\n            // Only works in a 3 subgrid scenario. To support more subgrids we have to merge splitters or something\n            // on collapse. Not going down that path currently...\n            subGrids[regions[0]].splitterElement.classList.add('b-left-only');\n            subGrids[regions[1]].splitterElement.classList.add('b-right-only');\n        }\n    }\n}\n\nRegionResize.featureClass = 'b-split';\n\nGridFeatureManager.registerFeature(RegionResize);\n"],"names":["NumberColumn","Column","defaults","filterType","format","defaultEditor","name","max","min","step","largeStep","align","ObjectHelper","cleanupProperties","type","textAlign","formatter","me","_formatter","_lastFormat","NumberFormat","get","formatValue","value","_value","unit","defaultRenderer","_defineProperty","ColumnStore","registerColumnType","exposeProperties","_$name","RegionResize","InstancePlugin","pluginConfig","chain","onElementDblClick","event","client","splitterEl","target","closest","expanding","region","dataset","subGrid","getSubGrid","collapsed","getLastRegions","expand","then","startMove","splitterElement","clientX","gridEl","element","nextRegion","regions","indexOf","nextSubGrid","splitterSubGrid","flip","flex","rtl","classList","contains","availableWidth","offsetWidth","dragContext","headerEl","header","subGridEl","originalWidth","originalX","minWidth","maxWidth","Math","add","toggleSplitterCls","pointerDetacher","EventHelper","on","document","pointermove","pointerup","thisObj","endMove","remove","onCollapseClick","lastSubGrid","collapse","onExpandClick","updateMove","newClientX","difX","newWidth","width","onElementPointerDown","splitter","button","toggle","pointerType","toggleTouchSplitter","onPointerMove","preventDefault","onElementTouchMove","onPointerUp","onSubGridCollapse","resolveSplitter","onSubGridExpand","touchedSplitter","Boolean","startSplitterButtonSyncing","stopSplitterButtonSyncing","render","subGrids","length","featureClass","GridFeatureManager","registerFeature"],"mappings":"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"}