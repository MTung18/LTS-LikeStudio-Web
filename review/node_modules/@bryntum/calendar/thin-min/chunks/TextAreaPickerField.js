/*!
 *
 * Bryntum Calendar 5.3.0
 *
 * Copyright(c) 2023 Bryntum AB
 * https://bryntum.com/contact
 * https://bryntum.com/license
 *
 */
import{Objects as e,StringHelper as t,ObjectHelper as n,PickerField as r,VersionHelper as i,EventHelper as s}from"./Editor.js";class l{static convertFromObject(n,r={}){e.assignIf(r,{rootName:"root",elementName:"element",includeHeader:!0,rootElementForArray:!0});const{rootName:i,elementName:s,includeHeader:l,rootElementForArray:o}=r;let{xmlns:a}=r;a=a?` xmlns="${a}"`:"";const c=n=>{const r=[];for(const i in n){const l=n[i];if(Array.isArray(l)){o&&r.push(`<${i}>`);for(const e of l)s.length?r.push(`<${s}>`):r.push(`<${i}>`),r.push(c(e)),s.length?r.push(`</${s}>`):r.push(`</${i}>`);o&&r.push(`</${i}>`)}else e.isObject(l)?r.push(`<${i}>${c(l)}</${i}>`):null==l?r.push(`<${i}/>`):r.push(`<${i}>${t.encodeHtml(l)}</${i}>`)}return r.join("")};return`${l?'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>':""}<${i}${a}>${c(n)}</${i}>`}}l._$name="XMLHelper";class o{constructor(){this.random100=[46,2,36,46,54,59,18,20,71,55,88,98,13,61,61,40,2,15,3,32,51,45,64,25,81,85,54,13,57,49,64,22,81,94,0,62,17,7,11,2,33,99,85,26,83,83,96,26,20,89,91,38,26,13,11,79,32,30,5,51,70,7,5,56,58,77,37,89,40,80,78,59,26,36,8,51,60,23,86,5,11,96,64,94,87,64,4,78,17,85,35,0,90,86,23,55,53,9,35,59,29,2,64,42,8,49,43,73,6,53,38,9,39,31,32,40,49,13,78,68,20,99,24,78,35,91,73,46,67,76,89,69,30,69,25,3,4,55,1,65,66,76,83,19,67,1,95,24,54,45,56,40,67,92,72,4,69,8,47,50,27,2,38,9,14,83,12,14,62,95,22,47,35,18,38,14,86,64,68,61,52,69,39,93,20,73,32,52,74,6,56,68,99,29,24,92,40,67,6,72,31,41,91,53,80,55,33,97,97,99,18,20,5,27,82,84,61,78,27,67,7,42,75,95,91,25,63,21,70,36,46,0,1,45,84,6,86,15,10,62,96,94,10,23,93,83,94,47,5,29,29,52,51,37,77,96,43,72,43,14,54,14,72,52,4,39,15,26,68,28,25,76,60,50,22,40,72,74,68,58,8,48,40,62,52,24,9,26,47,44,49,96,7,77,90,45,76,47,5,86,1,36,18,42,19,90,34,23,70,32,69,79,0,99,57,80,72,21,19,72,85,68,4,40,86,62,0,63,4,11,69,31,78,31,21,78,29,84,13,53,57,10,26,50,24,30,90,42,51,96,93,21,99,23,81,0,89,43,86,63,93,19,54,71,92,36,4,95,37,99,60,29,23,50,68,95,57,95,77,53,99,78,75,12,92,47,23,14,0,41,98,11,34,64,26,90,50,23,38,31,74,76,16,76,66,23,22,72,48,50,20,36,37,58,5,43,49,64,81,30,8,21,98,75,60,17,50,42,27,38,90,74,45,68,67,27,31,15,58,76,41,99,23,98,53,98,56,19,79,2,4,38,96,24,65,51,43,42,41,60,46,7,90,65,3,27,63,99,51,44,86,1,54,40,15,74,3,81,51,63,87,79,84,72,22,38,96,95,33,41,21,99,21,69,7,49,40,52,41,6,91,19,76,40,54,17,33,11,11,0,1,32,94,33,13,18,45,7,85,61,42,54,45,72,78,96,17,9,80,87,41,96,66,0,8,59,18,21,2,28,64,75,97,32,80,86,97,97,55,2,73,75,11,89,67,58,70,76,12,46,64,17,22,97,25,35,93,57,82,46,57,61,31,74,27,4,32,85,53,86,53,53,42,5,28,50,65,63,70,61,73,37,13,80,7,34,22,3,26,6,62,78,12,56,87,41,58,64,31,27,45,35,18,66,62,43,89,69,94,93,33,74,2,43,85,37,82,41,74,9,15,44,33,42,65,19,1,49,78,12,29,9,78,7,55,12,45,40,33,16,86,14,52,16,73,76,0,98,75,91,78,46,99,95,90,69,78,45,62,55,37,88,49,77,27,83,38,73,39,1,75,40,65,83,54,95,7,73,4,30,26,36,89,21,5,95,11,14,87,45,36,21,77,55,5,66,51,98,48,62,74,58,23,82,30,28,19,53,89,76,98,8,34,70,28,54,16,52,35,93,54,54,72,49,18,93,72,90,71,73,15,60,38,80,76,53,70,39,69,25,5,31,61,46,6,54,34,31,52,33,36,79,76,44,29,28,38,1,66,2,90,91,1,76,78,31,55,37,71,2,3,38,85,0,95,42,2,39,57,87,61,77,98,2,24,80,48,27,47,71,15,7,49,60,86,3,2,29,38,54,36,59,83,27,47,9,36,42,8,73,85,9,16,73,60,39,12,43,25,23,29,28,47,40,77,20,89,22,30,41,59,96,19,56,20,76,73,39,46,72,40,47,37,52,29,79,37,39,50,41,87,66,17,75,31,45,26,88,70,11,90,40,74,9,32,65,72,61,6,93,54,15,84,22,99,47,10,96,4,84,19,85,73,45,25,16,8,94,99,39,28,26,68,87,48,1,65,86,46,86,7,60,82,45,75,38,56,41,35,30,86,91,97,85,45,5,14,69,85,96,37,18,26,16,38,16,1,44,94,85,58,60,20,5,47,52,41,50,71,43,42,67,64,38,65,83,99,78,96,33,20,98,24,6,2,25,16,16,44,63,24,68,56,49,91,15,59,99,27,43,34,28,36,45,1,10,19,54,26,75,17,88,96,63,24,71,93,72,97,66,87,18,86],this.randomCache={},this.rndIndex=0}nextRandom(e){const{randomCache:t}=this;let n;return t[e]?n=t[e]:(n=this.random100.filter((t=>t<e)),t[e]=n),n[this.rndIndex++%n.length]}reset(){this.rndIndex=0}fromArray(e){return e[this.nextRandom(e.length)]}randomArray(e,t){const n=[],r=this.nextRandom(t+1),i={};for(let t=0,s=this.nextRandom(e.length);t<r;t++){for(;i[s];)s=this.nextRandom(e.length);i[s]=!0,n.push(e[s])}return n}}o._$name="RandomGenerator";let a=0;const c=new WeakMap,u=e=>{const t=new Map;return(...n)=>{const r=((...e)=>e.map((e=>{let t;return e&&"object"==typeof e||"function"==typeof e?(t=c.get(e),void 0===t&&(t=++a,c.set(e,t))):t=String(e),t})).join("-"))(n);let i=t.get(r);return void 0===i&&(i=e(...n),t.set(r,i)),i}},p=e=>{const t=new Map,r=e=>e[0],i=e=>e[1],s=(e,t)=>r(e).push(t);return(l,o)=>{const a=(e=>{let n=t.get(e);return void 0===n&&(n=[[],[]],t.set(e,n)),n})(l);(e=>!i(e).length&&!r(e).length)(a)?(s(a,o),e(l,(e=>{((e,t)=>i(e).some((e=>n.isEqual(e,t))))(a,e)||(((e,t)=>{i(e).push(t)})(a,e),r(a).forEach((t=>t(e))))}))):(s(a,o),i(a).forEach((e=>o(e))))}},h=Symbol("success"),d=Symbol("failure"),m=(e,t)=>[h,e,t],g=e=>[d,e],y=e=>e.length&&e[0]===h,f=e=>"function"!=typeof e||e.length?e:e(),k=u((e=>p(((t,n)=>n(m(e,t)))))),E=u((e=>p(((t,n)=>{const r=Math.min(e.length,t.length),i=t.substr(0,r),s=t.substr(r);n(i===e?m(i,s):g(s))})))),x=(e,t)=>(n,r)=>f(e)(n,(e=>{if(y(e)){const[,n,i]=e;t(n)(i,r)}else r(e)})),$=u(((...e)=>{const t=u(((e,t)=>p(x(e,(e=>x(t,(t=>k([].concat(e,t)))))))));return e.reduce(t,k([]))})),v=u(((...e)=>p(((t,n)=>e.forEach((e=>f(e)(t,n))))))),b=u((e=>(t,n)=>{const r=new RegExp(`^${e}`).exec(t);if(r){const e=r[0],i=t.substr(e.length);n(m(e,i))}else n(g(t))})),w=u(((e,t)=>x(e,((...e)=>k(t(...[].concat.apply([],e))))))),A=(e,t)=>{const n=[];return e(t,(e=>{if(y(e)){const[,,t]=e;""===t&&n.push(e)}})),n};var P={memo:u,memoCps:p,success:m,failure:g,isSuccess:y,resolveParser:f,succeed:k,string:E,bind:x,seq:$,alt:v,regexp:b,red:w,runParser:A,defineParser:e=>(t,n)=>n?f(e)(t,n):A(f(e),t)};class F extends r{static get $name(){return"TextAreaPickerField"}static get type(){return"textareapickerfield"}static get configurable(){return{picker:{type:"widget",tag:"textarea",cls:"b-textareapickerfield-picker",scrollAction:"realign",align:{align:"t-b",axisLock:!0},autoShow:!1},triggers:{expand:{cls:"b-icon-picker",handler:"onTriggerClick"}},resize:"none",inputType:null}}startConfigure(e){"boolean"==typeof e.inline&&i.deprecate("Core","6.0.0","TextAreaPickerField.inline config is no longer supported"),super.startConfigure(e)}get inputElement(){const e=super.inputElement;return e.readOnly="readonly",e.reference="displayElement",this.ariaElement="displayElement",e}get focusElement(){var e;return null!==(e=this._picker)&&void 0!==e&&e.isVisible?this.input:this.displayElement}get needsInputSync(){var e;return this.displayElement[this.inputValueAttr]!==String(null!==(e=this.inputValue)&&void 0!==e?e:"")}showPicker(){const e=this,{picker:t}=e;e.inline||(t.width=e.pickerWidth||e[e.pickerAlignElement].offsetWidth,super.showPicker(!0))}focusPicker(){this.input.focus()}onPickerKeyDown(e){const t=this,n=t.input;switch(e.key.trim()||e.code){case"Escape":return void t.picker.hide();case"Enter":e.ctrlKey&&(t.syncInputFieldValue(),t.picker.hide())}t.input=t.displayElement;const r=super.onPickerKeyDown(e);return t.input=n,r}syncInputFieldValue(e){this.displayElement&&(this.displayElement.value=this.inputValue),super.syncInputFieldValue(e)}changeValue(e){return null==e?"":e}changePicker(t,n){var r,i;const l=this,o=l.pickerWidth||(null===(r=t)||void 0===r?void 0:r.width);if(t=F.reconfigure(n,t?e.merge({owner:l,forElement:l[l.pickerAlignElement],align:{matchSize:null==o,anchor:l.overlayAnchor,target:l[l.pickerAlignElement]},id:l.id+"-input",style:{resize:l.resize},html:null!==(i=l.value)&&void 0!==i?i:""},t):null,l)){const e=l.input=t.element;l.inputListenerRemover=s.on({element:e,thisObj:l,focus:"internalOnInputFocus",change:"internalOnChange",input:"internalOnInput",keydown:"internalOnKeyEvent",keypress:"internalOnKeyEvent",keyup:"internalOnKeyEvent"})}return t}}F.initClass(),F._$name="TextAreaPickerField";export{P as Parser,o as RandomGenerator,F as TextAreaPickerField,l as XMLHelper};
//# sourceMappingURL=TextAreaPickerField.js.map
