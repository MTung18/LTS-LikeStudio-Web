/*!
 *
 * Bryntum Grid 5.3.0
 *
 * Copyright(c) 2023 Bryntum AB
 * https://bryntum.com/contact
 * https://bryntum.com/license
 *
 */
import{Widget as t,Rectangle as e,Tooltip as n,ObjectHelper as i}from"./Editor.js";const a={ArrowUp:1,ArrowDown:1,ArrowLeft:1,ArrowRight:1};class l extends t{static get $name(){return"Slider"}static get type(){return"slider"}static get configurable(){return{text:null,showValue:!0,showTooltip:!1,min:0,max:100,step:1,value:50,unit:null,thumbSize:20,tooltip:{$config:["lazy","nullify"],value:{type:"tooltip",align:"b-t",anchor:!1,axisLock:!0}},localizableProperties:["text"],triggerChangeOnInput:null,defaultBindProperty:"value"}}compose(){const{id:t,min:e,max:n,showValue:i,step:a,text:l,value:r,unit:u="",disabled:o}=this,s=`${t}-input`,h=Boolean(l||i);return{class:{"b-has-label":h,"b-text":h,"b-disabled":o},children:{input:{tag:"input",type:"range",id:s,reference:"input",disabled:o,min:e,max:n,step:a,value:r,listeners:{input:"onInternalInput",change:"onInternalChange",mouseover:"onInternalMouseOver",mouseout:"onInternalMouseOut"}},label:{tag:"label",for:s,html:i?l?`${l} (${r}${u})`:r+u:l}}}}get focusElement(){return this.input}get percentProgress(){return(this.value-this.min)/(this.max-this.min)*100}onInternalKeyDown(t){!this.readOnly&&a[t.key]&&t.stopImmediatePropagation()}onInternalChange(){this.updateUI(),this.triggerChange(!0),this.trigger("action",{value:this.value})}onInternalInput(){const t=this;t.readOnly?t.input.value=t.value:(t.value=parseInt(t.input.value,10),t.trigger("input",{value:t.value}),t.triggerChangeOnInput&&t.triggerChange(t))}onInternalMouseOver(){var t;const n=this,i=n.rtl?100-n.percentProgress:n.percentProgress;null===(t=n.tooltip)||void 0===t||t.showBy({target:e.from(n.input).inflate(n.thumbSize/2,-n.thumbSize/2),align:`b-t${Math.round(i)}`})}onInternalMouseOut(){var t;null===(t=this.tooltip)||void 0===t||t.hide()}triggerChange(t){this.triggerFieldChange({value:this.value,valid:!0,userAction:t})}updateMax(t){const e=this;e.input&&e._value>t&&(e.value=t,e.trigger("input",{value:e.value}))}updateMin(t){const e=this;e.input&&e._value<t&&(e.value=t,e.trigger("input",{value:e.value}))}changeTooltip(t,e){var i;return t&&(t.owner=this),this.showTooltip?n.reconfigure(e,t,{owner:this,defaults:{forElement:this.input,html:String(this.value)+(null!==(i=this.unit)&&void 0!==i?i:"")}}):null}changeValue(t){const{min:e,step:n}=this;return(t=Math.min(Math.max(t,e),this.max))>e?e+i.roundTo(t-e,n):i.roundTo(t,n)}updateValue(t){const e=this,{input:n,_tooltip:i}=e;var a;i&&(i.html=e.value+(null!==(a=e.unit)&&void 0!==a?a:""));n&&n.value!==String(t)&&(n.value=t,e.triggerChange(!1)),e.updateUI()}updateUI(){var t,n;const i=this;(null===(t=i._tooltip)||void 0===t?void 0:t.isVisible)&&(null===(n=i._tooltip)||void 0===n||n.alignTo({target:e.from(i.input).inflate(i.thumbSize/2,-i.thumbSize/2),align:`b-t${Math.round(i.percentProgress)}`}))}}l.initClass(),l._$name="Slider";export{l as Slider};
//# sourceMappingURL=Slider.js.map
