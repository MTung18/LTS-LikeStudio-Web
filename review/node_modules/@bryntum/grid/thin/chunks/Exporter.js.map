{"version":3,"file":"Exporter.js","sources":["../../../lib/Grid/feature/export/Utils.js","../../../lib/Grid/feature/export/exporter/Exporter.js"],"sourcesContent":["\nexport const RowsRange = {\n    all     : 'all',\n    visible : 'visible'\n};\n\nexport const PaperFormat = {\n    A6 : {\n        width  : 4.11,\n        height : 5.81\n    },\n    A5 : {\n        width  : 5.81,\n        height : 8.25\n    },\n    A4 : {\n        width  : 8.25,\n        height : 11.69\n    },\n    A3 : {\n        width  : 11.69,\n        height : 16.49\n    },\n    Legal : {\n        width  : 8.5,\n        height : 14\n    },\n    Letter : {\n        width  : 8.5,\n        height : 11\n    }\n};\n\nexport const Orientation = {\n    portrait  : 'portrait',\n    landscape : 'landscape'\n};\n\nexport const FileFormat = {\n    pdf : 'pdf',\n    png : 'png'\n};\n\nexport const FileMIMEType = {\n    pdf : 'application/pdf',\n    png : 'image/png'\n};\n","import DomSync from '../../../../Core/helper/DomSync.js';\nimport TemplateHelper from '../../../../Core/helper/TemplateHelper.js';\nimport BrowserHelper from '../../../../Core/helper/BrowserHelper.js';\nimport Base from '../../../../Core/Base.js';\nimport Localizable from '../../../../Core/localization/Localizable.js';\nimport IdHelper from '../../../../Core/helper/IdHelper.js';\nimport DomHelper from '../../../../Core/helper/DomHelper.js';\nimport { RowsRange } from '../Utils.js';\nimport Events from '../../../../Core/mixin/Events.js';\nimport Delayable from '../../../../Core/mixin/Delayable.js';\nimport Row from '../../../row/Row.js';\n\n/**\n * @module Grid/feature/export/exporter/Exporter\n */\n\n/**\n * Base class for all exporters\n * @mixes Core/localization/Localizable\n * @mixes Core/mixin/Events\n */\nexport default class Exporter extends Delayable(Events(Localizable(Base))) {\n    static get defaultConfig() {\n        return {\n            /**\n             * `True` to replace all linked CSS files URLs to absolute before passing HTML to the server.\n             * When passing a string the current origin of the CSS files URLS will be replaced by the passed origin.\n             *\n             * For example: css files pointing to /app.css will be translated from current origin to {translateURLsToAbsolute}/app.css\n             * @config {Boolean|String}\n             * @default\n             */\n            translateURLsToAbsolute : true,\n\n            /**\n             * When true links are converted to absolute by combining current window location (with replaced origin) with\n             * resource link.\n             * When false links are converted by combining new origin with resource link (for angular)\n             * @config {Boolean}\n             * @default\n             */\n            keepPathName : true,\n\n            /**\n             * This method accepts all stylesheets (link and style tags) which are supposed to be put on the page. Use this\n             * hook method to filter or modify them.\n             *\n             * ```javascript\n             * new Grid({\n             *     features: {\n             *         pdfExport: {\n             *             // filter out inline styles and bootstrap.css\n             *             filterStyles: styles => styles.filter(item => !/(link|bootstrap.css)/.test(item))\n             *         }\n             *     }\n             * });\n             * ```\n             * @param {String[]} styles\n             * @returns {String[]} List of stylesheets to put on the exported page\n             */\n            filterStyles : styles => styles\n        };\n    }\n\n    /**\n     * Template of an extracted page.\n     * @param {Object} data Data for the page template\n     * @returns {String}\n     */\n    pageTpl(data) {\n        const\n            {\n                title,\n                header,\n                footer,\n                styles,\n                htmlClasses,\n                bodyStyle,\n                bodyClasses = [],\n                paperHeight,\n                paperWidth,\n                html\n            } = data;\n\n        bodyClasses.push(`b-${this.constructor.type}`);\n\n        // Other classes needed on outer element.\n        // TODO: use the new static Widget.outerCls property when merged with master\n        if (DomHelper.scrollBarWidth) {\n            bodyClasses.push('b-visible-scrollbar');\n        }\n        else {\n            bodyClasses.push('b-overlay-scrollbar');\n        }\n        if (BrowserHelper.isChrome) {\n            bodyClasses.push('b-chrome');\n        }\n        else if (BrowserHelper.isSafari) {\n            bodyClasses.push('b-safari');\n        }\n        else if (BrowserHelper.isFirefox) {\n            bodyClasses.push('b-firefox');\n        }\n\n        return TemplateHelper.tpl`\n            <!DOCTYPE html>\n            <html class=\"${htmlClasses}\" style=\"width: ${paperWidth}in; height: ${paperHeight}in;\">\n                <head>\n                    <meta content=\"text/html; charset=UTF-8\" http-equiv=\"Content-Type\" />\n                    <title>${title}</title>\n                    ${styles.join('')}\n                </head>\n                <body class=\"b-export ${bodyClasses.join(' ')}\" style=\"width: ${paperWidth}in; height: ${paperHeight}in; ${bodyStyle}\">\n                    <div class=\"b-export-content\">\n                        ${header && `<div class=\"b-export-header\" style=\"width: 100%\">${header}</div>`}\n                        <div class=\"b-export-body\"><div class=\"b-export-viewport\">${html}</div></div>\n                        ${footer && `<div class=\"b-export-footer\" style=\"width: 100%\">${footer}</div>`}\n                    </div>\n                </body>\n            </html>`;\n    }\n\n    /**\n     * Returns all style-related tags: `<style>` and `<link rel=\"stylesheet\">`\n     * @property {String[]}\n     * @readonly\n     */\n    get stylesheets() {\n        const me = this;\n\n        if (me._stylesheets) {\n            return me._stylesheets;\n        }\n\n        const\n            translate       = me.translateURLsToAbsolute,\n            origin          = globalThis.origin,\n            styleSheetNodes = Array.from(document.querySelectorAll('link[rel=\"stylesheet\"], style')),\n            styles          = [];\n\n        styleSheetNodes.forEach(node => {\n            node = node.cloneNode(true);\n\n            // put absolute URL to node `href` attribute\n            if (translate && node.href) {\n                let result;\n\n                if (translate === true) {\n                    result = node.href;\n                }\n                // translate is truthy if we are here, which means it is string now\n                else if (this.keepPathName) {\n                    result = node.href.replace(origin, translate);\n                }\n                else {\n                    result = new URL(node.getAttribute('href'), translate);\n                }\n\n                node.setAttribute('href', result);\n            }\n\n            let styleText = node.outerHTML;\n\n            if (translate && /style/i.test(node.tagName)) {\n                const converter = me.getStyleTagURLConverter(translate);\n                styleText = styleText.replace(/url\\(['\"]?(.+?)['\"]?\\)/g, converter);\n            }\n\n            styles.push(styleText);\n        });\n\n        styles.push(\n            `<style>\n                body, html {\n                    overflow: auto;\n                }\n\n                body {\n                    position: relative;\n                    margin: 0;\n                }\n            </style>`);\n\n        return me._stylesheets = me.filterStyles(styles);\n    }\n\n    set stylesheets(value) {\n        this._stylesheets = value ? this.filterStyles(value) : value;\n    }\n\n    getStyleTagURLConverter(translate) {\n        return function(match, url) {\n            let result;\n\n            try {\n                let base;\n\n                // Filter out local references, e.g. to svg marker\n                if (/^#/.test(url)) {\n                    result = match;\n                }\n                else {\n                    if (translate === true) {\n                        base = globalThis.location.href;\n                    }\n                    // translate is truthy if we are here, which means it is string now\n                    else if (this.keepPathName) {\n                        base = globalThis.location.href.replace(globalThis.location.origin, translate);\n                    }\n                    else {\n                        base = translate;\n                    }\n\n                    result = `url('${new URL(url, base).href}')`;\n                }\n            }\n            catch (e) {\n                result = match;\n            }\n\n            return result;\n        }.bind(this);\n    }\n\n    saveState({ client }) {\n        this.state = client.state;\n    }\n\n    async restoreState({ client }) {\n        const\n            promises  = [],\n            detachers = new Set();\n\n        detachers.add(\n            client.scrollable.ion({\n                scroll() {\n                    promises.push(client.scrollable.await('scrollEnd'));\n                }\n            })\n        );\n\n        client.eachSubGrid(({ header, scrollable }) => {\n            detachers.add(\n                scrollable.ion({\n                    scroll() {\n                        promises.push(scrollable.await('scrollEnd'));\n                    }\n                })\n            );\n\n            detachers.add(\n                header.scrollable.ion({\n                    scroll() {\n                        promises.push(header.scrollable.await('scrollEnd'));\n                    }\n                })\n            );\n        });\n\n        client.state = this.state;\n\n        await Promise.all(promises);\n\n        detachers.forEach(fn => fn());\n    }\n\n    beforeExport() {\n        // Into this element we will put HTML for export\n        this.element = document.createElement('div');\n    }\n\n    //region DOM helpers\n\n    cloneElement(element, target = this.element, clear = true) {\n        if (clear) {\n            target.innerHTML = '';\n        }\n\n        target.appendChild(element.cloneNode(true));\n\n        DomHelper.removeEachSelector(target, '.b-grid-row,.b-grid-merged-cells-container');\n\n        const maskEl = target.querySelector('.b-gridbase > .b-mask');\n\n        if (maskEl) {\n            maskEl.remove();\n        }\n    }\n\n    createPlaceholder(el, clear = true, config = {}) {\n        if (clear) {\n            el.innerHTML = '';\n        }\n\n        return DomHelper.createElement(Object.assign({\n            parent : el,\n            id     : IdHelper.generateId('export')\n        }, config));\n    }\n\n    prepareElement({ client }) {\n        const { tbar, bbar } = client;\n\n        if (tbar) {\n            this.element.querySelector(`#${tbar.id}`).remove();\n        }\n\n        if (bbar) {\n            this.element.querySelector(`#${bbar.id}`).remove();\n        }\n    }\n\n    /**\n     * Appends generated header/footer element to the document body to measure their height\n     * @param html\n     * @returns {Number}\n     * @private\n     */\n    measureElement(html = '') {\n        if (html instanceof HTMLElement) {\n            html = html.outerHTML;\n        }\n\n        const target = DomHelper.createElement({\n            parent : document.body,\n            style  : {\n                visibility : 'hidden',\n                position   : 'absolute'\n            },\n            // Add html to measure to a div between two other divs to take margin into account\n            html : `<div style=\"height: 1px\"></div>${html}<div style=\"height: 1px\"></div>`\n        });\n\n        const result = target.offsetHeight - 2;\n\n        target.remove();\n\n        return result;\n    }\n\n    // Converts local urls to absolute\n    prepareHTML(html) {\n        if (html instanceof HTMLElement) {\n            html = html.outerHTML;\n        }\n\n        const target = DomHelper.createElement({\n            parent : document.body,\n            style  : {\n                visibility : 'hidden',\n                position   : 'absolute'\n            },\n            html\n        });\n\n        const elements = target.querySelectorAll('img');\n\n        for (let i = 0, l = elements.length; i < l; i++) {\n            elements[i].setAttribute('src', elements[i].src);\n        }\n\n        const result = target.innerHTML;\n\n        target.remove();\n\n        return result;\n    }\n\n    getVirtualScrollerHeight(client) {\n        let result = 0;\n\n        // If overlay scroll is enabled, this will return 0\n        // when disabled, it will report proper virtualScrollers element height\n        client.eachSubGrid(subGrid => {\n            if (subGrid.overflowingHorizontally) {\n                result = DomHelper.scrollBarWidth;\n            }\n        });\n\n        // If there's a visible scrollbar, need to also take border height into account\n        return result === 0 ? result : (result + 1);\n    }\n\n    //endregion\n\n    inchToPx(value) {\n        // 1in = 96px for screens\n        // https://developer.mozilla.org/en-US/docs/Web/CSS/length#Absolute_length_units\n        return value * 96;\n    }\n\n    getScaleValue(base, value) {\n        return Math.floor((base * 10000 / value)) / 10000;\n    }\n\n    getVisibleRowsCount(client) {\n        const\n            rowManager = client.rowManager,\n            // We cannot rely on `visibleRowCount` property, it is a mere estimate\n            firstVisibleIndex = rowManager.rows.indexOf(rowManager.firstVisibleRow),\n            lastVisibleIndex  = rowManager.rows.indexOf(rowManager.lastVisibleRow);\n\n        let result;\n\n        // first index could be negative only if there are no rendered rows, in which case we return store count\n        if (firstVisibleIndex !== -1) {\n            // last visible index could be negative if last actually visible row doesn't reach view bottom, i.e.\n            // view is not completely filled with rows\n            if (lastVisibleIndex === -1) {\n                result = client.store.count - firstVisibleIndex;\n            }\n            else {\n                // for a zero-based index we need to add 1 to the result\n                result = lastVisibleIndex - firstVisibleIndex + 1;\n            }\n        }\n        else {\n            result = client.store.count;\n        }\n\n        return result;\n    }\n\n    async export(config) {\n        const me = this;\n\n        let pages;\n\n        me.beforeExport();\n\n        me.saveState(config);\n\n        await me.prepareComponent(config);\n\n        try {\n            pages = await me.getPages(config);\n        }\n        finally {\n            await me.restoreComponent(config);\n\n            me.stylesheets = null;\n\n            // https://app.assembla.com/spaces/bryntum/tickets/9400-scrollrowintoview-promise-is-not-reliable/details\n            // Restoring scroll might trigger rows repaint on next animation frame. We are\n            // waiting for next animation frame in such case. Covered in SinglePage.t.js\n            await new Promise(resolve => me.requestAnimationFrame(resolve));\n\n            await me.restoreState(config);\n        }\n\n        return pages;\n    }\n\n    async getPages(config) {\n        const\n            generator = this.pagesExtractor(config),\n            pages     = [];\n\n        let step;\n\n        while ((step = await generator.next()) && !step.done) {\n            pages.push(step.value);\n        }\n\n        return pages;\n    }\n\n    // Row buffer has to be adjusted to render complete row set per exported page. See virtual scrolling section in README\n    // for more details\n    adjustRowBuffer(client) {\n        const\n            { contentHeight } = this.exportMeta,\n            { rowManager }    = client;\n\n        this.oldRowManagerConfig = {\n            prependRowBuffer : rowManager.prependRowBuffer,\n            appendRowBuffer  : rowManager.appendRowBuffer\n        };\n\n        // render 3 times more rows to get enough to fill exported page\n        const adjustedRowBuffer = Math.ceil(contentHeight / rowManager.rowOffsetHeight);\n\n        rowManager.prependRowBuffer = adjustedRowBuffer;\n        rowManager.appendRowBuffer  = adjustedRowBuffer;\n\n        client.renderRows();\n\n        // In case we are at the bottom of the view and we are increasing buffer, rowmanager might return to the top row\n        // In this case we need to force it to render rows at the current scroll position\n        client.rowManager.jumpToPosition(client.scrollable.y);\n    }\n\n    restoreRowBuffer(client) {\n        client.rowManager.prependRowBuffer = this.oldRowManagerConfig.prependRowBuffer;\n        client.rowManager.appendRowBuffer  = this.oldRowManagerConfig.appendRowBuffer;\n\n        // There is no need to force rendering rows here, those would be updated during applyState call on a grid.\n        // More precisely - during setRowHeight method.\n    }\n\n    async prepareComponent(config) {\n        const\n            me          = this,\n            {\n                client,\n                columns,\n                rowsRange,\n                keepRegionSizes,\n                enableDirectRendering\n            } = config,\n            { rowManager } = client,\n            exportMeta  = me.exportMeta = {\n                enableDirectRendering,\n                totalWidth  : 0,\n                totalHeight : 0 - (enableDirectRendering ? 0 : me.getVirtualScrollerHeight(client)),\n                subGrids    : {}\n            };\n\n        client.columns.forEach(column => {\n            if (columns.includes(column.id)) {\n                column.show();\n            }\n            else {\n                column.hide();\n            }\n        });\n\n        // Wait for animation frame to catch optional resize event which may occur after hiding columns. Scroll\n        // stretcher should be synced before we proceed.\n        // Covered by export/Columns.t\n        await new Promise(resolve => client.requestAnimationFrame(resolve));\n\n        if (client.rowManager.rowCount > 0) {\n            if (rowsRange === RowsRange.all) {\n                exportMeta.firstVisibleDataIndex = rowManager.rows[0].dataIndex;\n            }\n            else {\n                exportMeta.firstVisibleDataIndex = rowManager.firstVisibleRow.dataIndex;\n\n                config.alignRows = true;\n            }\n\n            if (!enableDirectRendering) {\n                await client.scrollRowIntoView(client.store.getAt(exportMeta.firstVisibleDataIndex), { block : 'start' });\n            }\n        }\n\n        const { element } = me;\n\n        // clone whole grid element to the detached container\n        me.cloneElement(client.element);\n\n        me.prepareElement(config);\n\n        let fakeRow;\n\n        // Create fake row, we will use it to render stuff\n        if (enableDirectRendering) {\n            exportMeta.fakeRow = fakeRow = new Row({\n                cls        : client.rowCls,\n                rowManager : client.rowManager,\n                grid       : client,\n                // use fake indices, they aren't really required\n                index      : -10,\n                dataIndex  : -10\n            });\n        }\n\n        client.eachSubGrid(subGrid => {\n            // Call private listener to create actual DOM nodes\n            if (fakeRow) {\n                subGrid.onAddRow({ rows : [fakeRow], isExport : true });\n\n                // Trick inline widgets to think they're rendered into component (in fact they are)\n                // This is required to remove `Widget.outerCls` classes from the widget\n                fakeRow.element.dataset.ownerCmp = client.id;\n            }\n\n            const placeHolder = me.createPlaceholder(element.querySelector(`[id=\"${subGrid.id}\"]`), false);\n\n            let width;\n\n            if (keepRegionSizes?.[subGrid.region]) {\n                width = subGrid.element.offsetWidth;\n            }\n            else {\n                width = subGrid.columns.visibleColumns.reduce((result, column) => {\n                    if (typeof column.width === 'number') {\n                        result += column.width;\n                    }\n                    else {\n                        result += (client.hideHeaders ? client.rowManager.rows[0].getCell(column.id) : column.element).offsetWidth;\n                    }\n                    return result;\n                }, 0);\n            }\n\n            exportMeta.totalWidth += width;\n\n            const splitterWidth = subGrid.splitterElement?.offsetWidth || 0;\n\n            exportMeta.totalWidth += splitterWidth;\n\n            exportMeta.subGrids[subGrid.region] = {\n                id       : subGrid.id,\n                headerId : subGrid.header?.id || null,\n                footerId : subGrid.footer?.id || null,\n                rows     : [],\n                splitterWidth,\n                placeHolder,\n                width\n            };\n        });\n    }\n\n    prepareExportElement() {\n        const\n            me = this,\n            { element, exportMeta } = me;\n\n        // Exporters may change subGrid width, e.g. when specific date range is exported\n        Object.values(exportMeta.subGrids).forEach(({ width, id, headerId, footerId }) => {\n            [id, headerId, footerId].forEach(id => {\n                if (id) {\n                    const childElement = element.querySelector(`[id=\"${id}\"]`);\n                    // SubGrid now always have header & footer, but not always in DOM\n                    if (childElement) {\n                        childElement.style.width = `${width}px`;\n                        childElement.style.flex = '';\n                    }\n                }\n            });\n        });\n\n        return element.innerHTML;\n    }\n\n    async restoreComponent(config) {\n        if (this.exportMeta.fakeRow) {\n            this.exportMeta.fakeRow.destroy();\n            delete this.exportMeta.fakeRow;\n        }\n    }\n\n    async scrollRowIntoView(client, index) {\n        await client.scrollRowIntoView(client.store.getAt(index), { block : 'start' });\n\n        // #9400 - scrollRowIntoView promise is not reliable\n        await new Promise(resolve => this.requestAnimationFrame(resolve));\n    }\n\n    collectRow(row) {\n        const\n            subGrids = this.exportMeta.subGrids,\n            re       = /data-owner-cmp=\".+?\"/;\n\n        Object.entries(row.elements).forEach(([key, value]) => {\n            subGrids[key].rows.push([\n                value.outerHTML.replace(re, ''),\n                row.top,\n                row.offsetHeight,\n                new Map() // This one is used to collect events (or in general additional row content)\n            ]);\n        });\n    }\n\n    renderMergedCells(config, fromIndex, toIndex, rows) {\n        const\n            me           = this,\n            { client }   = config,\n            { subGrids } = me.exportMeta,\n            // Generate config for merged cells\n            domConfigMap = client.features.mergeCells.buildMergedCellsConfig(fromIndex, toIndex, rows);\n\n        for (const subGridName in subGrids) {\n            const\n                subGrid = subGrids[subGridName],\n                target  = document.createElement('div');\n\n            // Render config into temporary element\n            DomSync.sync({\n                targetElement : target,\n                domConfig     : {\n                    children : domConfigMap[subGridName].children\n                }\n            });\n\n            if (target.childNodes.length) {\n                // mergeCells feature uses dependency injection, so in order to get rendered cell content we\n                // need to get the cell element matching the range\n                target.childNodes.forEach(child => {\n                    const\n                        { syncId } = child.dataset,\n                        range      = client.features.mergeCells.mergedRanges\n                            .find(range => range.cellElement?.parentNode.dataset.syncId === syncId);\n\n                    if (range) {\n                        // Replace cell content if range is found (it might not be found if there's only one cell)\n                        child.innerHTML = range.cellElement.outerHTML;\n                    }\n                });\n\n                subGrid.mergedCellsHtml = [target.innerHTML];\n            }\n        }\n    }\n}\n\n// HACK: terser/obfuscator doesn't yet support async generators, when processing code it converts async generator to regular async\n// function.\n/**\n * Pages generator. Value should be string with exported HTML\n * @param {Object} config\n * @returns {AsyncIterableIterator<{value: String, done: Boolean}>}\n * @private\n */\nExporter.prototype.pagesExtractor = async function * pagesExtractor() {\n    throw new Error('Implement this method in a subclass');\n};\n"],"names":["RowsRange","all","visible","PaperFormat","A6","width","height","A5","A4","A3","Legal","Letter","Orientation","portrait","landscape","FileFormat","pdf","png","FileMIMEType","Exporter","Delayable","Events","Localizable","Base","defaultConfig","translateURLsToAbsolute","keepPathName","filterStyles","styles","pageTpl","data","title","header","footer","htmlClasses","bodyStyle","bodyClasses","paperHeight","paperWidth","html","push","constructor","type","DomHelper","scrollBarWidth","BrowserHelper","isChrome","isSafari","isFirefox","TemplateHelper","tpl","join","stylesheets","me","_stylesheets","translate","origin","globalThis","styleSheetNodes","Array","from","document","querySelectorAll","forEach","node","cloneNode","href","result","replace","URL","getAttribute","setAttribute","styleText","outerHTML","test","tagName","converter","getStyleTagURLConverter","value","match","url","base","location","e","bind","saveState","client","state","restoreState","promises","detachers","Set","add","scrollable","ion","scroll","await","eachSubGrid","Promise","fn","beforeExport","element","createElement","cloneElement","target","clear","innerHTML","appendChild","removeEachSelector","maskEl","querySelector","remove","createPlaceholder","el","config","Object","assign","parent","id","IdHelper","generateId","prepareElement","tbar","bbar","measureElement","HTMLElement","body","style","visibility","position","offsetHeight","prepareHTML","elements","i","l","length","src","getVirtualScrollerHeight","subGrid","overflowingHorizontally","inchToPx","getScaleValue","Math","floor","getVisibleRowsCount","rowManager","firstVisibleIndex","rows","indexOf","firstVisibleRow","lastVisibleIndex","lastVisibleRow","store","count","export","pages","prepareComponent","getPages","restoreComponent","resolve","requestAnimationFrame","generator","pagesExtractor","step","next","done","adjustRowBuffer","contentHeight","exportMeta","oldRowManagerConfig","prependRowBuffer","appendRowBuffer","adjustedRowBuffer","ceil","rowOffsetHeight","renderRows","jumpToPosition","y","restoreRowBuffer","columns","rowsRange","keepRegionSizes","enableDirectRendering","totalWidth","totalHeight","subGrids","column","includes","show","hide","rowCount","firstVisibleDataIndex","dataIndex","alignRows","scrollRowIntoView","getAt","block","fakeRow","Row","cls","rowCls","grid","index","_subGrid$splitterElem","_subGrid$header","_subGrid$footer","onAddRow","isExport","dataset","ownerCmp","placeHolder","region","offsetWidth","visibleColumns","reduce","hideHeaders","getCell","splitterWidth","splitterElement","headerId","footerId","prepareExportElement","values","childElement","flex","destroy","collectRow","row","re","entries","key","top","Map","renderMergedCells","fromIndex","toIndex","domConfigMap","features","mergeCells","buildMergedCellsConfig","subGridName","DomSync","sync","targetElement","domConfig","children","childNodes","child","syncId","range","mergedRanges","find","_range$cellElement","cellElement","parentNode","mergedCellsHtml","prototype","Error","_$name"],"mappings":"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"}