import{f as Xt}from"./gridConfigDefaults.8c72c19b.js";import{S as Yt}from"./grid.module.3b00878a.js";import{B as Qt}from"./BryntumGrid.2c4be387.js";import{b2 as B,d as We,M as u,bb as vt,j as o,b as M,Q as mt,a1 as se,bq as bt,e as _t,r as I,o as h,c as ee,a as _,D,g as l,w as i,ai as Kt,a2 as V,f as O,u as n,aj as Jt,l as yt,bw as ht,I as F,H as dt,aH as Dt,A as ct,C as Z,ax as Zt,ay as ea,_ as ta,a_ as aa,aJ as la,aA as ia,bx as na,aF as oa,by as sa,bz as ua,bA as ra,at as da,T as ca,s as fa,y as pa,a5 as va,aW as ma,ao as ba,a3 as _a,F as ya,z as ha,b4 as Ee,bd as Da,be as wa,bB as ga,bC as Ca,bD as Ma,bE as Ta,bF as Aa,ap as Ia}from"./index.611fe570.js";import{u as Ea,E as J,P as Na}from"./PayrollAndTaxTab.15217426.js";import{b as Sa,c as xa,P as Oa,E as pe,D as ka,_ as Ra}from"./panelConfig.9fc2559c.js";import{u as Pa,D as R}from"./useDirectDeposit.256e8453.js";import{_ as Fa}from"./confirmationModal.vue_vue_type_script_setup_true_lang.3c6092c2.js";import{_ as La}from"./deleteConfirmationModal.vue_vue_type_script_setup_true_lang.7d561088.js";class Ne{id;name;$isDisabled=!1;constructor(S){Object.assign(this,S)}}class ft{title;value;constructor(S){Object.assign(this,S)}}function pt(m,S){return!B.isEqualWith(m,S,(b,f)=>{const q=b===0&&f==="",T=typeof b=="number"&&typeof f=="string"||typeof f=="number"&&typeof b=="string",W=b instanceof Date&&typeof f=="string"||f instanceof Date&&typeof b=="string",E=f===null&&b==="00000000-0000-0000-0000-000000000000"||b===null&&f==="00000000-0000-0000-0000-000000000000";return q?!1:T?b==f:W?new Date(b).getTime()===new Date(f).getTime():b===null&&(f===""||typeof f>"u"||f===null)||f===null&&(b===""||typeof b>"u"||b===null)?!0:typeof b=="string"&&typeof f=="string"?b.trim()===f.trim():E?!0:void 0})}const $a={class:"form-group fs-input__form-group"},Ua={class:"fs-input__label",id:"fs_label"},qa=["accept"],Ba=_("span",null," Upload",-1),Va={key:0,class:"fs-input__message fs-input__message--error mt-1"},Ha={key:0,class:"ms-1"},za=We({__name:"uploadFile",props:{file:{default:null},isValid:{type:Boolean,default:!0},title:{default:""},rootFolder:{default:""},filePath:{default:""},acceptFileList:null},setup(m,{expose:S,emit:b}){const f=m;S({upload:me});const q=u.HQSUITE.FILE_SIZE_10MB,T=u.HQSUITE.DIRECTDEPOSIT_ALLOWED_EXTENSION,W=1e7,E=vt(),w=o(""),L=M(()=>E.allowedExtensions),z=o(null),A=o(null),{notifySuccess:p,notifyError:k}=mt(),v=o("");async function j(){f.acceptFileList?.length<=0?(L.value?.length<=0&&await E.fetchAllowedExtensions(),w.value=L.value?.map(x=>x.extensionType)?.join(", ")):w.value=f.acceptFileList?.join(", ")}function Se(x){return f.acceptFileList.includes(x)}function xe(x){const a=x.target;v.value="";let X=!0;a&&a.files&&a.files.length>0&&(A.value=a.files[0],Se(A.value.type)||(k(T),v.value=q,X=!1),A.value.size>W&&(k(q),v.value=q,X=!1),b("update:file",A.value),b("update:isValid",X))}se(()=>f.file,async()=>{!f.file&&A.value&&(A.value=null)});async function me(x=null){const a=x??f.rootFolder;if(A.value)return await E.uploadDocument({path:bt(a),file:A.value,fileName:A.value.name},!0),E.uploadedDocumentDetails}return _t(async()=>{await j()}),(x,a)=>{const X=I("font-awesome-icon"),$=I("fs-button"),g=I("fs-col"),ue=I("fs-row");return h(),ee("div",$a,[_("label",Ua,D(m.title),1),l(ue,null,{default:i(()=>[l(g,{cols:"auto"},{default:i(()=>[Kt(_("input",{id:"fileInput",type:"file",ref_key:"fileInput",ref:z,accept:w.value,onChange:a[0]||(a[0]=H=>xe(H))},null,40,qa),[[Jt,!1]]),l($,{variant:"outline-primary",size:"md",class:"btn btn-outline-primary p-2",onClick:a[1]||(a[1]=H=>x.$refs.fileInput.click())},{default:i(()=>[l(X,{icon:"fa-solid fa-upload"}),Ba]),_:1}),v.value.length>0?(h(),ee("div",Va,D(v.value),1)):V("",!0)]),_:1}),l(g,{cols:"auto",class:"d-flex align-items-center pe-3"},{default:i(()=>[A.value&&A.value.name?(h(),ee("span",Ha,D(A.value.name),1)):m.filePath?.length>0?(h(),O(xa,{key:1,type:n(Sa).Link,path:m.filePath},null,8,["type","path"])):V("",!0)]),_:1})]),_:1})])}}}),ja=m=>(Zt("data-v-31e20c44"),m=m(),ea(),m),Ga={id:"error_list",class:"popup_fl"},Wa={key:0},Xa=ja(()=>_("span",{class:"fal fa-print pad-right--10 pop_up_print"},null,-1)),Ya=[Xa],Qa=["innerHTML"],Ka=["title"],Ja=We({__name:"failureList",props:{showModal:{type:Boolean,default:!1},title:{default:""},warning:{default:""},descriptionName:{default:""},failures:null,pageTitle:{default:""},showPrintView:{type:Boolean,default:!1},failureClass:{default:""},iconClass:{default:""}},setup(m,{emit:S}){const b=m;yt.add(ht);const f=M({get(){return b.showModal},set(E){S("update:showModal",E)}});function q(){S("OK")}function T(){const E=document.getElementById("failure_table"),w=window.open("");w.document.write("<style>table{font-family:arial,sans-serif;border-collapse:collapse;width:100%}td,th{border:1px solid #ddd;text-align:left;padding:8px}th{background-color:#ddd}tr:nth-child(odd){background-color:#e7e7e782}</style>"),w.document.write(E.outerHTML),w.print(),w.close()}const W=[{key:"failureTitle",label:b.descriptionName,thClass:"list__th",tdClass:"list__td list__td--50"},{key:"failureReason",label:"Failed Reason",thClass:"list__th",tdClass:"list__td list__td--50"}];return(E,w)=>{const L=I("fs-col"),z=I("fs-row"),A=I("fs-table"),p=I("fs-button"),k=I("fs-modal");return h(),O(k,{modelValue:n(f),"onUpdate:modelValue":w[0]||(w[0]=v=>Dt(f)?f.value=v:null),centered:"","content-class":"phq-modal","header-class":"phq-modal__header","title-class":"phq-modal__title","body-class":"phq-modal__body","footer-class":"phq-modal__footer","header-text-variant":"light","header-bg-variant":"blue--dk",lazy:!0,"hide-header-close":"","no-close-on-backdrop":"","no-close-on-esc":"",onOk:w[1]||(w[1]=v=>q()),title:m.title},{"modal-footer":i(v=>[l(p,{variant:"primary",onClick:v.ok},{default:i(()=>[F("Close")]),_:2},1032,["onClick"])]),default:i(()=>[m.failures.length>0?dt(E.$slots,"default",{key:0},()=>[_("div",Ga,[_("div",{class:ct(m.failureClass)},[m.showPrintView?(h(),ee("div",Wa,[_("span",{onClick:T,class:"text--14"},Ya)])):V("",!0),m.warning.length>0?(h(),O(z,{key:1,class:"popup_warning mb-2"},{default:i(()=>[l(L,{cols:"1",class:"icon"},{default:i(()=>[l(n(Z),{class:"text-warning me-2",icon:["fa","exclamation-triangle"]})]),_:1}),l(L,{class:"text"},{default:i(()=>[_("span",{innerHTML:m.warning},null,8,Qa)]),_:1})]),_:1})):V("",!0),l(A,{responsive:"",id:"failure_table",ref:"failureTable","show-empty":"",small:"","thead-tr-class":"list__tr list__tr--thead","tbody-tr-class":"list__tr list__tr--tbody",items:m.failures,fields:W},{"cell(failureTitle)":i(v=>[_("i",{title:m.pageTitle,class:ct(m.iconClass)},null,10,Ka),F(" "+D(v.value),1)]),"cell(failureReason)":i(v=>[F(D(v.value),1)]),_:1},8,["items"])],2)])],!0):dt(E.$slots,"custom",{key:1},void 0,!0)]),_:3},8,["modelValue","title"])}}});const Za=ta(Ja,[["__scopeId","data-v-31e20c44"]]);class ve{failureTitle;failureReason;constructor(S){Object.assign(this,S)}}const el={class:"position-relative bg-white overflow-hidden"},tl={class:"p-3 d-flex justify-content-between align-items-center"},al={class:"hq-pg__title mt-1"},ll={class:"d-none d-lg-inline"},il=_("div",{class:"border-bottom border-2 border-cyan"},null,-1),nl={class:"hq-pg__title mt-1"},ol={class:"hq-pg__title mt-1"},sl=_("div",{class:"w-100"},null,-1),ul={class:"p-4"},rl=_("div",{class:"w-100"},null,-1),dl={class:"pt-2"},cl={key:0,class:"d-flex mb-1 fw-bold align-items-center"},fl={class:"d-flex border border-info border border-2 rounded-2 px-2"},pl={class:"ps-2"},vl=["innerHTML"],Ml=We({__name:"manageAccounts",setup(m){yt.add(aa,la,ia,na,oa,sa,ua,ra,ht);const S=["image/jpeg","image/jpg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation"],{notifySuccess:b,notifyError:f}=mt(),q=da(),T=Ea(),W=ca(),E=vt(),{submitAPIError:w,masterData:L,directDepositsToSubmit:z,originalAccountList:A,employeeAccountList:p}=fa(T),k=o(null),v=M(()=>+q.params?.id?.toString()),j=async()=>{await T.fetchEmployeeDirectDeposits(v.value,!0),await Ve()},{proceedDirectDepositDelete:Se,onDeleteDirectDepositClick:xe,hasPendingAccountToSubmit:me,showDeleteModal:x,selectedRow:a}=Pa(j,v.value),X=pa(),$=o(new Ne),g=o(new Ne),ue=o(null),H=o(null),Oe=o(!1),te=o([]),ae=o(""),Y=o(""),ke=o(!0),le=o(!1),be=o(!0),_e=o(!0),ye=o(!0),Xe=o(!1),re=o(""),he=o(),Re=o(!1),De=o(""),we=o(""),ge=o("Yes"),Ce=o("No"),Pe=o("Discard"),Me=o(!1);o(!1);const C=o(!1),Q=o(!1),Ye=o(),G=o(!1),Qe=o(null),wt=o(null),Te=o(!1);o(!0);const Ke=[new Ne({id:1,name:u.COMMON.ACTIVE}),new Ne({id:0,name:u.COMMON.INACTIVE})],K=o(null);o(!1);const Fe=o(!1),ie=o([]),Le=o(),ne=o(0),P=o(),$e=o(new Oa({title:u.DIRECT_DEPOSIT.ACCOUNT_DETAILS,showFooter:!1,showHeader:!0})),gt=[{key:"title",label:"Account Number",thClass:"list__th",tdClass:"list__td list__td--50"},{key:"value",label:"Distribution Amount (%)",thClass:"list__th",tdClass:"list__td list__td--50"}],Ct=M(()=>W?.activeUserClient?.clientGuid??"Shared"),de=M(()=>A.value?.filter(t=>t.approvalStatusId==pe.PendingFoundation)?.length>0),Je=M(()=>B.sortBy(Ye.value,"order")),Ze=M(()=>q.params?.directDepositId?.toString()),et=M(()=>p.value?.findIndex(t=>t.distributionMethodId===R.Remaining)>-1),Mt=M(()=>me.value&&et.value),Tt=M(async()=>bt(await Da(wa.EmployeeDirectDepositDocument,Ct.value,v.value.toString()))),At=M(()=>p.value.length==1&&p.value[0]&&p.value[0].isNew&&!p.value[0].isValid),It=M(()=>{const t=B.maxBy(p.value,"ordinalPosition");return(t?t.ordinalPosition:0)+1}),Et=M(()=>p.value.filter(t=>t.employeeDirectDepositId!==a.value?.employeeDirectDepositId)),Ue=M(()=>Qe.value?.instance.value),ce=new Yt({...Xt.gridStoreConfig});M(()=>g.value&&g.value.id===R.Percent_Of_Net?{required:!0,between:{min:0,max:100},precisionAndScale:{precision:3,scale:0}}:{required:!0,between:{min:.01,max:99999999999999e-2},precisionAndScale:{precision:12,scale:2}});const Nt=M(()=>g.value&&(g.value.id===R.Percent_Of_Net||g.value.id===R.Percent_Of_Remaining));M(()=>pt(P.value,a.value));const St=o({autoHeight:!0,selectionMode:{cell:!1,row:!1},features:{cellEdit:!1,columnResize:!1,enableCellContextMenu:!1,tooltipRenderer:!1,headerMenu:{disabled:!1},rowReorder:{showGrip:!0,listeners:{gridRowBeforeDragStart:({context:t})=>!C.value&&t.records[0].data.distributionMethodId!==R.Remaining&&p.value.length>2,gridRowDrop:async({context:t})=>{const e=ce.toJSON();await Ve(e.map(s=>new J(s))),Xe.value=!0,a.value=new J(t.records[0].data),k.value=a.value.ordinalPosition,oe()}}}},emptyText:"",columns:[{flex:4,groupable:!1,sortable:!1,select:!1,text:"Sequence",htmlEncode:!1,enableCellContextMenu:!1,enableHeaderContextMenu:!1,renderer:({record:t,cellElement:e})=>{const s=t.isActive,d=t.ordinalPosition,r=t.distributionMethodId===R.Remaining;(r||p.value.length<=2||C.value)&&e.classList.add("hide-grip-icon");let N=s?"text--status-active":"text--status-inactive";return(t.approvalStatusId===pe.PendingHRM||t.approvalStatusId===pe.PendingFoundation)&&(N="text--status-pending"),{class:"d-flex align-items-center",children:[{style:{border:"solid 1px #03A9F4"},class:"py-1 px-2 me-2 text-blue fw-bold",text:`${r?"R":d}`},{class:`${N} b-fa-solid b-fa-circle fs-7 pe-2 rounded-circle`,html:'<div class="p-1"><div/>',style:{height:"8px"}},{class:"me-2 fw-bold",text:`${t.accountTypeName?ga(t.accountTypeName):u.DIRECT_DEPOSIT.NEW_ACCOUNT}`},{class:"fw-bold",html:`${t.bankAccountNumber?Ee(t.bankAccountNumber):""}`}]}}},{flex:1,type:"action",id:"action",text:"",columnDragToolbar:!1,enableHeaderContextMenu:!1,enableCellContextMenu:!1,width:100,maxWidth:100,cellCls:"b-action-cell--hover justify-content-end px-3",actions:[{visible:({record:t})=>xt(t.data),renderer:()=>'<i class="b-action-item b-fa b-fa-trash-alt cursor-pointer no-underline text-danger"></i>',onClick:xe}]}],listeners:{cellClick:async({column:t,record:e})=>{t.type!=="action"&&!C.value&&(a.value=new J(e?.data),k.value=e.ordinalPosition,oe())},beforeselectionChange:t=>a.value?.isNew?!0:!C.value}});async function qe(){ce.data=p.value}function xt(t){return C.value?a.value?.ordinalPosition===t.ordinalPosition&&t.employeeDirectDepositId>0:t.employeeDirectDepositId>0&&t.distributionMethodId!==R.Remaining}async function Ot(){await T.getEmployeeDirectDepositsMasterData(v.value)}const Be=async()=>{K.value=null,a.value=new J,$.value=null,g.value=null,H.value=null,re.value="",G.value=!1,le.value=!1,await he.value?.setFieldTouched(!1),await he.value?.resetForm()};async function kt(){L.value?.distributionMethodList?.forEach(t=>{t.$isDisabled=Te.value&&t.id===R.Remaining})}async function Ve(t=null){const e=t??p.value;if(Te.value=!1,e&&e.length>0){let s=1;e.forEach(r=>{r.distributionMethodId===R.Remaining?(r.ordinalPosition=-1,Te.value=!0):r.ordinalPosition=s++});const d=B.sortBy(e,r=>r.ordinalPosition);if(Te.value){const r=d.findIndex(U=>U.distributionMethodId===R.Remaining),N=d[r];d.splice(r,1),N&&d.push(N)}p.value=d.filter(r=>r),await qe(),t&&T.assignEmployeeDirectDeposits(d)}kt()}const Ae=t=>{ne.value=t,Re.value=t!=null,t===0?(De.value=u.COMMON.DISCARD_CHANGES_TITLE,we.value=u.COMMON.DISCARD_CHANGES_MESSAGE,ge.value=u.COMMON.YES,Ce.value=u.COMMON.NO,Pe.value=u.COMMON.DISCARD,Me.value=!1):t===1?(De.value=u.COMMON.CANCEL_CONFIRMATION_TITLE,we.value=u.COMMON.CANCEL_CONFIRMATION_MESSAGE,ge.value=u.COMMON.SAVE,Ce.value=u.COMMON.CANCEL,Pe.value=u.COMMON.DISCARD,Me.value=!0):t===2&&(De.value=u.COMMON.WARNING,we.value=u.DIRECT_DEPOSIT.NEW_ACCOUNT_CANCEL,ge.value=u.COMMON.YES,Ce.value=u.COMMON.NO,Me.value=!1)},He=()=>{Ge()},ze=async(t=!1)=>{t?Be():(a.value&&a.value.isNew&&!a.value.isValid?(await T.removeDirectDepositData(a.value?.employeeDirectDepositId),await j(),Rt()):a.value=B.cloneDeep(P.value),C.value=!1,Q.value=!1,P.value=null)},oe=(t=void 0)=>{Q.value=a.value.isNew,Ie(),tt(t)},Rt=()=>{if(p.value?.length>0){const t=p.value[0];je(t,!1),tt()}},tt=(t=void 0)=>{Ue.value.refreshRows(),setTimeout(()=>{Ue.value.selectRow({record:a.value.id,scrollIntoView:!0})},100)},Pt=async()=>{ne.value===0?He():ne.value===1&&ze()},Ft=async()=>{ne.value===0?He():ne.value===1?st():ne.value===2&&ze(!0)},Lt=async t=>{a.value=new J(t),k.value=a.value.ordinalPosition,a.value.ordinalPosition=k.value,re.value=a.value.bankAccountNumber,lt(),ce.data=[],ce.data=p.value,oe()};async function at(t,e=!0){const s=new J(t);if(e&&s.isNew&&!s.isValid){const d=p.value.map(r=>r.employeeDirectDepositId);s.employeeDirectDepositId=(B.max(d)??0)+1,s.approvalStatusId=pe.PendingFoundation,a.value=s}s&&(s.employeeId=v.value,await T.upsertEmployeeDirectDeposits(s)),await j()}async function Ie(){re.value=String(a.value.bankAccountNumber),$e.value.source=a.value,$e.value.subTitle=`${a.value.accountTypeName} ${Ee(a.value.bankAccountNumber)}`,Ye.value=ka.ConvertDirectDeposit(a.value),a.value.employeeDirectDepositId>0&&lt()}function lt(){a.value&&a.value.accountTypeId?$.value={id:a.value.accountTypeId,name:L.value?.accountTypeList?.find(e=>e.id==a.value.accountTypeId)?.name,$isDisabled:!1}:$.value=null,a.value&&a.value.distributionMethodId?g.value={id:a.value.distributionMethodId,name:L.value?.distributionMethodList?.find(e=>e.id==a.value.distributionMethodId)?.name,$isDisabled:!1}:g.value=null;const t=a.value.isActive?1:0;H.value={id:t?1:0,name:Ke?.find(e=>e.id==t)?.name,$isDisabled:!1}}async function $t(){if(Number.isNaN(Number(Ze.value))||(ue.value=parseInt(Ze.value)),ue.value&&p.value&&p.value.length>0){const t=p.value.filter(e=>e.employeeDirectDepositId==ue.value)[0];await je(t,!0)}else p.value&&p.value.length>0?await je(p.value[0],!1):await it();await qe(),oe()}async function it(){a.value=new J,a.value.employeeDirectDepositId=0,a.value.employeeId=+v.value,a.value.isNew=!0,a.value.isActive=!0,Q.value=!0,C.value=!0,k.value=It.value,a.value.ordinalPosition=k.value,await at(a.value),await Ie()}async function je(t,e){a.value=t,Q.value=!1,C.value=e,await Ie(),e&&await nt()}const Ut=()=>{Ge()},qt=()=>{me.value?Ae(0):He()},nt=async()=>{Q.value=!1,C.value=!0;const t=a.value;P.value=B.cloneDeep(a.value),await Be(),await Lt(t)},Bt=async()=>{At.value?Ae(2):pt(P.value,a.value)||le.value?Ae(1):ze()};function Ge(){X.push({name:"payrollAndTaxes",params:{id:v.value,tab:Na.DirectDeposit}})}function fe(t,e=[]){switch(Oe.value=!0,Fe.value=!1,t){case 0:te.value=[],ae.value="Account Type",Y.value="Account Type is mandatory.";break;case 1:te.value=[],ae.value="Distribution Method",Y.value="Distribution Method is mandatory.";break;case 2:te.value=[],ae.value="Distribution Amount (%) Rules",Y.value=u.DIRECT_DEPOSIT.PERCENT_DISTRIBUTION_AMOUNT_EXCEED,Fe.value=!0;break;case 4:te.value=e,ae.value="Submit Direct Deposit",Y.value="Error while submiting direct deposit accounts.";break;case 5:te.value=w.value.failureItems,Y.value="Error while submiting direct deposit accounts.",ae.value="Submit Direct Deposit";break}}function Vt(){return ie.value=z.value.filter(t=>t.distributionMethodId===R.Percent_Of_Net).map(t=>new ft({value:t.distributionAmount,title:t.accountTypeName+" "+Ee(t.bankAccountNumber)})),ie.value&&ie.value.length>0&&(Le.value=B.sumBy(ie.value,"value"),Le.value>100)?(ie.value.push(new ft({value:Le.value,title:"Total"})),fe(2),!1):!0}function Ht(){return!(!zt()||!Vt())}function zt(){let t=!1;const e=[];B.cloneDeep(z.value).forEach(r=>{r.accountTypeId||e.push(new ve({failureTitle:"Account Type",failureReason:"AccountType is mandatory"})),r.distributionMethodId||e.push(new ve({failureTitle:"Distribution Method",failureReason:"DistributionMethod is mandatory"})),r.bankAccountNumber||e.push(new ve({failureTitle:"Bank Account Number",failureReason:"BankAccountNumber is mandatory"})),r.bankRoutingNumber||e.push(new ve({failureTitle:"Bank Routing Number",failureReason:"BankRoutingNumber is mandatory"})),r.distributionMethodId===R.Remaining&&r.isActive&&(t=!0)}),t||e.push(new ve({failureTitle:"Remainder Account",failureReason:u.DIRECT_DEPOSIT.REMAINDER_ACCOUNT_MANDATORY}));const d=e.length<=0;return d||fe(4,e),d}async function jt(){if(Ht()){let t=[],e=!0;try{const s=z.value.filter(d=>!B.isEmpty(d.file)).map(d=>d.file);s.length>0&&(t=await E.uploadBatchDocuments(s,!0))}catch{f("Error while uploading document"),e=!1}if(e){const s=z.value.map(d=>{if(d.file){const r=t.find(N=>N.id===d.file.uniqueFileName);if(r){const N=new Ca(r.data);N&&N.path!=""&&(d.voidedCheckFilePath=N.path)}}return d.employeeId=+v.value,d.isNew&&(d.employeeDirectDepositId=0),d});await T.submitDirectDeposit(s,v.value)?await ot():w.value.statusCode.toString().startsWith("2")?await ot():w.value.failureItems.length>0?fe(5):f(`${w.value.statusCode} - ${w.value?.content?.data?.detail}`)}}}async function ot(){b(u.DIRECT_DEPOSIT.SUBMIT_SUCCESS),await T.clearUpsertEmployeeDirectDeposits(),Ge(),await j()}const Gt=async()=>{await Be(),await it(),await Ve(),await qe(),oe()};async function st(){const t=await he.value.validate();if(G.value=!0,t.valid){if(!$.value?.id)return Ma("observer",'[name="accountType"]'),fe(0),!1;if(!g.value?.id)return fe(1),!1;if(Xe.value=!0,a.value.isActive=!0,a.value.isDeleted=!1,a.value.accountTypeId=$.value.id,a.value.accountTypeName=$.value.name,a.value.distributionMethodId=g.value.id,a.value.distributionMethodName=g.value.name,a.value.isActive=H.value.id==1,a.value.approvalStatusId=pe.PendingHRM,a.value.distributionMethodId===R.Remaining?a.value.ordinalPosition=-1:a.value.ordinalPosition=k.value,K.value){const e=await Tt.value;a.value.file=new Ta({path:e,file:K.value,fileName:K.value.name,uniqueFileName:Aa(K.value.name)})}a.value.isValid=!0,a.value.employeeId=+v.value,await at(a.value,!1),await j(),oe(),b(u.DIRECT_DEPOSIT.SAVE_SUCCESS),C.value=!1,P.value=null}else Ia("observer")}return se(()=>k.value,async()=>{await Ie()}),se(()=>p.value,async(t,e)=>{Ue.value.refreshRows()},{deep:!0}),se(()=>$.value,(t,e)=>{P.value&&t&&t.id&&(le.value=P.value.accountTypeId!==t?.id)}),se(()=>g.value,(t,e)=>{P.value&&t&&t.id&&(le.value=P.value.distributionMethodId!==t?.id)}),se(()=>H.value,(t,e)=>{P.value&&t&&(le.value=P.value.isActive!==(t?.id==1))}),_t(async()=>{Number.isNaN(v)||(await Ot(),await j(),await $t())}),va(async()=>{await T.clearUpsertEmployeeDirectDeposits()}),ma(async(t,e)=>{await T.clearUpsertEmployeeDirectDeposits()}),(t,e)=>{const s=I("fs-col"),d=I("fs-row"),r=I("fs-button"),N=I("fs-popper"),U=I("fs-input"),ut=I("fs-container"),Wt=I("fs-table");return h(),ee("div",el,[_("div",tl,[l(d,{class:"col-10 d-flex justify-content"},{default:i(()=>[l(s,{cols:"1",class:"inner-sidenav__icon-wrapper",onClick:e[0]||(e[0]=y=>Ut())},{default:i(()=>[l(n(Z),{icon:["fal","circle-arrow-left"],size:"2x",class:"inner-sidenav__icon text-primary"})]),_:1}),l(s,null,{default:i(()=>[_("h5",al,D(n(u).DIRECT_DEPOSIT.MANAGE_ACCOUNTS),1)]),_:1})]),_:1}),_("span",null,[l(d,null,{default:i(()=>[l(s,null,{default:i(()=>[l(r,{variant:"outline-secondary",class:"btn btn-outline-gray",onClick:qt},{default:i(()=>[F(D(n(u).COMMON.CANCEL),1)]),_:1})]),_:1}),l(s,{class:"ps-0"},{default:i(()=>[l(N,{hover:"",tooltip:"",content:n(et)?"":n(u).DIRECT_DEPOSIT.REMAINDER_ACCOUNT_MANDATORY,placement:"bottom"},{default:i(()=>[l(r,{disabled:C.value||!n(Mt),variant:"primary",onClick:jt},{default:i(()=>[_("span",ll,D(n(u).COMMON.SUBMIT),1)]),_:1},8,["disabled"])]),_:1},8,["content"])]),_:1})]),_:1})])]),il,l(ut,{fluid:"",class:"h-100 d-inline-block"},{default:i(()=>[l(n(ba),{ref_key:"observer",ref:he,id:"observer"},{default:i(({meta:y})=>[l(d,null,{default:i(()=>[l(s,{class:"p-2 border-bottom border-end d-flex align-items-center header_div"},{default:i(()=>[_("h5",nl,D(n(u).DIRECT_DEPOSIT.DEPOSIT_ORDER),1)]),_:1}),l(s,{class:"p-2 border-bottom header_div"},{default:i(()=>[l(d,{class:"align-items-center w-100"},{default:i(()=>[l(s,{cols:"10"},{default:i(()=>[_("h5",ol,D(Q.value?"New Account":$e.value.subTitle),1)]),_:1}),l(s,{cols:"2",class:"d-flex justify-content-end pe-0"},{default:i(()=>[l(N,{hover:"",tooltip:"",content:n(de)?n(u).DIRECT_DEPOSIT.CANNOT_EDIT_TEXT:"",placement:"bottom"},{default:i(()=>[C.value?V("",!0):(h(),O(r,{key:0,disabled:n(de),id:"editDirectDeposit",variant:"outline-primary",class:"btn btn-outline-primary",onClick:e[1]||(e[1]=c=>nt())},{default:i(()=>[F(D(n(u).COMMON.EDIT),1)]),_:1},8,["disabled"]))]),_:1},8,["content"])]),_:1})]),_:1})]),_:1}),sl,l(s,{class:"p-0 action-grid border-bottom border-end details-scroll"},{default:i(()=>[l(n(Qt),_a(St.value,{store:n(ce),ref_key:"grid",ref:Qe}),null,16,["store"])]),_:1}),l(s,{class:"p-0 details-scroll"},{default:i(()=>[_("div",ul,[C.value?(h(),O(d,{key:1,class:"align-items-center"},{default:i(()=>[l(s,{cols:"6"},{default:i(()=>[l(U,{type:"fsMultiselectList",label:"Account Type",id:"accountType",labelId:"accountTypeLabelId",modelValue:$.value,"onUpdate:modelValue":e[2]||(e[2]=c=>$.value=c),required:"true",typeaheaddata:n(L).accountTypeList,typeaheadkey:"name",typeaheadvalueattribute:"id",name:"accountType",showClear:!0,autocomplete:"donotfill",dropdownSearchable:!0,rules:{required:!0}},null,8,["modelValue","typeaheaddata"])]),_:1}),Q.value?(h(),O(s,{key:1,cols:"6"})):(h(),O(s,{key:0,cols:"6"},{default:i(()=>[l(U,{type:"fsMultiselectList",label:"Status",id:"status",labelId:"statusLabelId",modelValue:H.value,"onUpdate:modelValue":e[3]||(e[3]=c=>H.value=c),typeaheaddata:Ke,typeaheadkey:"name",typeaheadvalueattribute:"id",name:"status",showClear:!0,autocomplete:"donotfill",dropdownSearchable:!0,rules:{required:!1}},null,8,["modelValue"])]),_:1})),l(s,{cols:"6"},{default:i(()=>[l(U,{type:"fsMultiselectList",label:"Distribution Method",id:"distributionMethod",labelId:"distributionMethodLabelId",modelValue:g.value,"onUpdate:modelValue":e[4]||(e[4]=c=>g.value=c),typeaheaddata:n(L).distributionMethodList,typeaheadkey:"name",required:!0,typeaheadvalueattribute:"id",name:"distributionMethod",minvalue:0,step:.01,showClear:!0,autocomplete:"donotfill",dropdownSearchable:!0,rules:{required:!0}},null,8,["modelValue","typeaheaddata","step"])]),_:1}),l(s,{cols:"6"},{default:i(()=>[n(Nt)?(h(),O(U,{key:0,type:"fsNumber",label:"Distribution Percentage",id:"distributionAmount",inputType:"number",rules:{required:!0,between:{min:0,max:100,maxMessage:"Must be less than or equal to 100.00%",minMessage:"Must be greater than or equal to 0.00%"},precisionAndScale:{precision:5,scale:2,message:"Can only contain 2 decimals"}},name:"distributionPercent",isDecimal:!0,allowedDigits:2,minvalue:0,step:.01,append:"%",required:!0,formMeta:{...y,validated:G.value},modelValue:n(a).distributionAmount,"onUpdate:modelValue":e[5]||(e[5]=c=>n(a).distributionAmount=c)},null,8,["rules","step","formMeta","modelValue"])):(h(),O(U,{key:1,type:"fsNumber",label:"Distribution Amount",id:"distributionAmount",rules:{required:!0,between:{min:.01,max:99999999999999e-2,maxMessage:"Must be below $999999999999.99",minMessage:"Must be greater than $0.00."},precisionAndScale:{precision:12,scale:2,message:"Can only contain 2 decimals"}},name:"distributionAmount",required:!0,isDecimal:!0,allowedDigits:2,prepend:"$",formMeta:{...y,validated:G.value},modelValue:n(a).distributionAmount,"onUpdate:modelValue":e[6]||(e[6]=c=>n(a).distributionAmount=c)},null,8,["rules","formMeta","modelValue"]))]),_:2},1024),l(s,{cols:"6"},{default:i(()=>[l(U,{type:"fsTextInput",label:"Routing Number",inputType:_e.value?"number":"password",rules:{required:!0,max:25},name:"routingNumber",required:!0,minvalue:0,maxlength:25,formMeta:{...y,validated:G.value},modelValue:n(a).bankRoutingNumber,"onUpdate:modelValue":e[8]||(e[8]=c=>n(a).bankRoutingNumber=c)},{"input-group-content":i(()=>[l(r,{pill:"",variant:"outline-green",class:"px-2 mt-2 mx-2",style:{height:"19px",width:"30px"},onClick:e[7]||(e[7]=c=>_e.value=!_e.value)},{default:i(()=>[l(n(Z),{icon:["fal",_e.value?"eye-slash":"eye"],size:"sm"},null,8,["icon"])]),_:1})]),_:2},1032,["inputType","formMeta","modelValue"])]),_:2},1024),l(s,{cols:"6"},{default:i(()=>[l(U,{type:"fsTextInput",label:"Account Number",inputType:be.value?"number":"password",rules:{required:!0,max:25,no_duplicate_number:{arrayOfObjects:n(Et),fieldInObjectToCheck:"bankAccountNumber",message:"This account number already exists."}},name:"accountNumber",required:!0,minvalue:0,maxlength:25,formMeta:{...y,validated:G.value},modelValue:n(a).bankAccountNumber,"onUpdate:modelValue":e[10]||(e[10]=c=>n(a).bankAccountNumber=c)},{"input-group-content":i(()=>[l(r,{pill:"",variant:"outline-green",class:"px-2 mt-2 mx-2",style:{height:"19px",width:"30px"},onClick:e[9]||(e[9]=c=>be.value=!be.value)},{default:i(()=>[l(n(Z),{icon:["fal",be.value?"eye-slash":"eye"],size:"sm"},null,8,["icon"])]),_:1})]),_:2},1032,["inputType","rules","formMeta","modelValue"])]),_:2},1024),l(s,{cols:"6"},{default:i(()=>[l(U,{type:"fsTextInput",label:"Confirm Account Number",inputType:ye.value?"number":"password",maxlength:25,rules:{required:!0,max:25,accountNumberMatch:{verify:n(a).bankAccountNumber}},minvalue:0,name:"confirmAccountNumber",required:!0,formMeta:{...y,validated:G.value},modelValue:re.value,"onUpdate:modelValue":e[12]||(e[12]=c=>re.value=c)},{"input-group-content":i(()=>[l(r,{pill:"",variant:"outline-green",class:"px-2 mt-2 mx-2",style:{height:"19px",width:"30px"},onClick:e[11]||(e[11]=c=>ye.value=!ye.value)},{default:i(()=>[l(n(Z),{icon:["fal",ye.value?"eye-slash":"eye"],size:"sm"},null,8,["icon"])]),_:1})]),_:2},1032,["inputType","rules","formMeta","modelValue"])]),_:2},1024),l(s,{cols:"12"},{default:i(()=>[l(za,{file:K.value,"onUpdate:file":e[13]||(e[13]=c=>K.value=c),title:"Voided Check",acceptFileList:S,isValid:ke.value,"onUpdate:isValid":e[14]||(e[14]=c=>ke.value=c),filePath:n(a).voidedCheckFilePath,ref_key:"uploadFileComponent",ref:wt},null,8,["file","isValid","filePath"])]),_:1}),l(s,{cols:"12"},{default:i(()=>[l(U,{type:"fsTextArea",label:"Description",rules:{required:!1,max:100},rows:"3",maxlength:100,name:"description",required:!1,formMeta:{...y,validated:G.value},modelValue:n(a).description,"onUpdate:modelValue":e[15]||(e[15]=c=>n(a).description=c)},null,8,["formMeta","modelValue"])]),_:2},1024)]),_:2},1024)):(h(!0),ee(ya,{key:0},ha(n(Je),(c,rt)=>(h(),O(Ra,{key:rt,detail:c,"show-border":n(Je)?.length-1!=rt},null,8,["detail","show-border"]))),128))])]),_:2},1024),rl,l(s,{class:"p-2 border-bottom border-end"},{default:i(()=>[n(de)||C.value?V("",!0):(h(),O(N,{key:0,hover:"",tooltip:"",class:"d-flex",content:n(de)?n(u).DIRECT_DEPOSIT.CANNOT_ADD_TEXT:"",placement:"bottom"},{default:i(()=>[l(r,{class:"bg-cyan",disabled:n(de)||C.value,onClick:e[16]||(e[16]=c=>Gt())},{default:i(()=>[l(n(Z),{icon:"fal fa-circle-plus",class:"me-2"}),F(" "+D(n(u).DIRECT_DEPOSIT.ADD_ACCOUNT),1)]),_:1},8,["disabled"])]),_:1},8,["content"]))]),_:1}),l(s,{class:"p-2 border-bottom border-top d-flex flex-row-reverse"},{default:i(()=>[C.value?(h(),O(r,{key:0,class:"bg-cyan",disabled:!y.valid&&!le.value||!ke.value,onClick:e[17]||(e[17]=c=>st())},{default:i(()=>[F(D(n(u).COMMON.SAVE),1)]),_:2},1032,["disabled"])):V("",!0),C.value?(h(),O(r,{key:1,variant:"outline-secondary",class:"btn btn-outline-gray me-2",onClick:e[18]||(e[18]=c=>Bt())},{default:i(()=>[F(D(n(u).COMMON.CANCEL),1)]),_:1})):V("",!0)]),_:2},1024)]),_:2},1024)]),_:1},512)]),_:1}),l(Fa,{showConfirmationModal:Re.value,"onUpdate:showConfirmationModal":e[19]||(e[19]=y=>Re.value=y),onOK:e[20]||(e[20]=y=>Ft()),onDISCARD:e[21]||(e[21]=y=>Pt()),"yes-title":ge.value,"no-title":Ce.value,"discard-title":Pe.value,"show-discard":Me.value,title:De.value,onCANCEL:e[22]||(e[22]=y=>Ae(null))},{default:i(()=>[F(D(we.value),1)]),_:1},8,["showConfirmationModal","yes-title","no-title","discard-title","show-discard","title"]),l(La,{showDeleteModal:n(x),"onUpdate:showDeleteModal":e[23]||(e[23]=y=>Dt(x)?x.value=y:null),onOK:e[24]||(e[24]=y=>n(Se)()),onCANCEL:e[25]||(e[25]=y=>x.value=!1)},{default:i(()=>[_("span",null,[F(D(n(u).DIRECT_DEPOSIT.DELETE_CONFIRMATION_MESSAGE)+" ",1),_("div",dl,[n(a)?(h(),ee("div",cl,[_("span",fl,D(n(a).ordinalPosition),1),_("span",pl,D(`${n(a).accountTypeName??"New Account"} ${n(Ee)(n(a).bankAccountNumber)??""}`),1)])):V("",!0)])])]),_:1},8,["showDeleteModal"]),l(Za,{showModal:Oe.value,"onUpdate:showModal":e[26]||(e[26]=y=>Oe.value=y),title:ae.value,warning:Y.value,failures:te.value,failureClass:"top-level-page__list",descriptionName:"Error"},{custom:i(()=>[l(d,{class:"fl_validation_message"},{default:i(()=>[l(s,{cols:"1",class:"icon"},{default:i(()=>[l(n(Z),{class:"text-warning me-2",icon:["fa","exclamation-triangle"]})]),_:1}),l(s,{class:"text"},{default:i(()=>[_("span",{innerHTML:Y.value},null,8,vl)]),_:1})]),_:1}),Fe.value?(h(),O(ut,{key:0,fluid:"",class:"w-100 d-inline-block"},{default:i(()=>[l(Wt,{responsive:"",id:"percentagedistribution_failure_table",ref:"percentageDistributionFailureTable","show-empty":"",small:"","thead-tr-class":"list__tr list__tr--thead","tbody-tr-class":"list__tr list__tr--tbody",items:ie.value,fields:gt},{"cell(name)":i(y=>[F(D(y.value),1)]),"cell(value)":i(y=>[F(D(y.value)+"% ",1)]),_:1},8,["items"])]),_:1})):V("",!0)]),_:1},8,["showModal","title","warning","failures"])])}}});export{Ml as default};
