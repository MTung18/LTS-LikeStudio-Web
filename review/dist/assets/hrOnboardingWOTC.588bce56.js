import{d as Ge,l as Je,dd as Qe,a_ as Xe,c5 as Ze,c4 as j,cb as pe,cM as et,aJ as tt,dC as st,m as ot,S as at,at as lt,bb as nt,T as it,s as X,bO as rt,Q as dt,b as N,a0 as ct,j as c,y as ut,aW as pt,h as mt,aY as me,a1 as ft,r as z,o as p,c as m,a as t,g as a,w as h,I as _,A as x,u as n,D as F,F as Z,z as ee,a2 as S,bd as vt,be as gt,ax as ht,ay as _t,_ as yt}from"./index.611fe570.js";import{F as W}from"./FormField.7af7663e.js";import{F as w}from"./OnboardingQuickHireWOTC.fa51e4d8.js";import{u as te}from"./onboardingHrWOTCStore.d848f058.js";import{u as fe}from"./onboardingStore.b8199798.js";import{D as bt}from"./darkThemeModal.c38e7d4c.js";import{u as Ft}from"./reportTemplateStore.f0128478.js";import{i as wt}from"./fileUtils.932fb01d.js";import"./onboardingHrWOTC8850EssApi.7119caf5.js";import"./onboardingHrWOTC9061EssApi.6044f5a3.js";const f=$=>(ht("data-v-67388618"),$=$(),_t(),$),xt={class:"p-3 pt-0 position-relative"},St={class:"bg-white d-flex justify-content-between align-items-center py-3 mb-2 border-bottom",style:{position:"sticky",top:"0","z-index":"999"}},Ct=f(()=>t("span",{class:"fw-bold",style:{"font-size":"18px"}},"WOTC",-1)),kt=f(()=>t("div",{class:"main-text mb-4"}," You need to fill out IRS Form 8850 together with ETA Form 9061 or ETA Form 9062 in order to complete your WOTC submission. Read instructions carefully before completing each form. ",-1)),Tt={class:"p-3 form-division mb-4 border"},Ot=f(()=>t("div",{class:"form-name"},"Form 8850",-1)),Dt={class:"bg-white rounded d-flex justify-content-between align-items-center border px-3 py-4 mt-3"},Et={class:"d-flex gap-2 algin-items-center"},It=f(()=>t("div",{class:"fw-bold"},"Form 8850 | Employee\u2019s Section",-1)),Nt={class:"d-flex align-items-center"},zt={class:"bg-white rounded d-flex justify-content-between align-items-center border px-3 py-4 mt-3"},Wt={class:"d-flex gap-2 algin-items-center"},$t=f(()=>t("div",{class:"fw-bold"},"Form 8850 | Employer\u2019s Section",-1)),Pt={class:"d-flex align-items-center"},At={class:"my-3"},Vt={for:"upload8850",class:"me-4"},Ut={key:0},jt=["onClick"],Bt=["onClick"],Rt={class:"p-3 form-division mb-4 border"},Ht=f(()=>t("span",{class:"form-name"},"Form 9061 ",-1)),Lt=f(()=>t("span",{class:"text-status-inactive"},"(if applicable)",-1)),Mt={class:"bg-white rounded d-flex justify-content-between align-items-center border px-3 py-4 mt-3"},qt={class:"d-flex gap-2 algin-items-center"},Kt=f(()=>t("div",{class:"fw-bold"},"Form 9061 | Employee\u2019s Section",-1)),Yt={class:"d-flex align-items-center"},Gt={class:"bg-white rounded d-flex justify-content-between align-items-center border px-3 py-4 mt-3"},Jt={class:"d-flex gap-2 algin-items-center"},Qt=f(()=>t("div",{class:"fw-bold"},"Form 9061 | Employer\u2019s Section",-1)),Xt={class:"d-flex align-items-center"},Zt={class:"mt-3"},es=["disabled"],ts={for:"upload9061",class:"me-4"},ss={key:1},os=["onClick"],as=["onClick"],ls={class:"p-3 form-division border"},ns=f(()=>t("span",{class:"form-name"},"Form 9062 ",-1)),is=f(()=>t("span",{class:"text-status-inactive"},"(if applicable)",-1)),rs={class:"mt-2"},ds={class:"mt-3"},cs=["disabled"],us=f(()=>t("div",{class:"fw-bold mb-2"},"Upload File",-1)),ps={for:"upload9062",class:"me-4"},ms={key:1},fs=["onClick"],vs=["onClick"],gs={class:"mt-3"},hs={class:"d-flex py-3"},_s=f(()=>t("div",null,[_(" Are you sure you want to leave this page? "),t("br"),_(" You have unsaved changes, your data will be lost. ")],-1)),ys=Ge({__name:"hrOnboardingWOTC",setup($){Je.add(Qe,Xe,Ze,j,pe,et,tt,pe,st,ot,at);const{getDocumentTemplate:ve}=Ft(),ge=lt(),P=nt(),he=it(),{onboardingSideNavItem:_e}=X(fe()),{getOnboardingSideNavItems:ye,markOnboardingSidenavItemAsDone:se,getEmployeeFormSubmit:be}=fe(),{setLoading:v}=rt(),{getOnboardingHrWOTC:Fe,updateOnboardingHrWOTC:oe,get8850EssStatus:we,get8850HrStatus:xe,get9061EssStatus:Se,get9061HrStatus:Ce}=te(),{onboardingHrWOTC:B}=X(te()),{is8850EssDone:C,is9061EssDone:k,is8850HrDone:R,is9061HrDone:H,is8850DoneByFile:ke,is9061DoneByFile:Te,is9062Done:Oe}=X(te()),{notifyError:ae}=dt(),De=N(()=>he?.activeUserClient?.clientGuid??"Shared"),{responsive:Ee}=ct(),T=c(!1),le=c(null),L=c(null),u=N(()=>Number(ge.params.id)),ne=W.WOTCOnboardSummary,Ie=W.WOTC8850Employee,Ne=W.WOTC8850Employer,ze=W.WOTC9061Employee,We=W.WOTC9061Employer,M=ut(),$e=c(null),Pe=c(null),Ae=c(null),Ve=c(null),ie=c(!1),O=c(!1),Ue=c(null),A=c(!1),re=c(""),q=c(!1),y=c({noteForm8850:"",noteForm9061:"",noteForm9062:"",formFiles:"",uploadFileStateForms:[]}),r=c({fieldModels:[],uploadFileStateForms:[],formId:ne,employeeId:u.value}),de=N(()=>r.value.uploadFileStateForms.filter(s=>s.payload.type===w.upload8850)),D=N(()=>r.value.uploadFileStateForms.filter(s=>s.payload.type===w.upload9061)),E=N(()=>r.value.uploadFileStateForms.filter(s=>s.payload.type===w.upload9062)),K=c([]),je=s=>{const e=["pdf","jpeg","png","jpg"],o=s.split(".").pop().toLowerCase();return e.includes(o)},Be=async(s,e,o)=>{await P.uploadDocument({path:s,file:e,fileName:o},!0)},Re="File type is not supported. Please choose file with types of PDF, JPEG, PNG or JPG only",Y=async(s,e)=>{v(!0);const i=e.target.files;for(let d=0;d<i.length;d++){if(!je(i[d].name)){ae(Re),v(!1);return}if(!wt(i[d])){v(!1);return}const b=await vt(gt.HrOnboardWotc,`${De.value}`,u.value.toString()),I=Le(i[d].name),l=new FileReader;l.onload=()=>{const g=l.result.toString(),U={formFieldId:$e.value,fileName:I,filePath:b,fileObject:new File([i[d]],I),fileUrl:g,payload:{type:w[s]},description:""};r.value.uploadFileStateForms.push(U)},l.readAsDataURL(i[d])}v(!1)},He=s=>{let e=0;const o=s.length;let i=0;if(o>0)for(;i<o;)e=(e<<5)-e+s.charCodeAt(i++)|0;return e},Le=s=>{const e=new Date,o=s.split(".");return`${o[0]}${He(o[0]+e.getMilliseconds())}.${o[o.length-1]}`},G=s=>{document.getElementById(s).click()},J=s=>{v(!0);const e=s.fileName;r.value.uploadFileStateForms=r.value.uploadFileStateForms.filter(o=>o.fileName!==e),s.fileObject||K.value.push(e),v(!1)},ce=async s=>{v(!0),K.value.length>0&&await Promise.all(K.value.map(async e=>{await P.deleteFile(e)})),r.value.uploadFileStateForms.length>0?await Promise.all(r.value.uploadFileStateForms.map(async e=>{e.fileObject&&await Be(e.filePath,e.fileObject,e.fileName)})).then(async()=>{const e=r.value.uploadFileStateForms.map(g=>{const{fileObject:U,fileUrl:bs,...Ye}=g;return Ye}),{uploadFileStateForms:o,...i}=y.value;Object.keys(i).forEach(g=>{r.value.fieldModels.find(U=>U.fieldKey===g).fieldValue=i[g]}),r.value.uploadFileStateForms=[...e],oe(u.value,r.value),!!(!!(C&&R)||ke)&&(!!(!!(k&&H)||Te)||Oe)?await se(L.value.progressSidebarId,!0,u.value):await se(L.value.progressSidebarId,!1,u.value)}):(r.value.uploadFileStateForms=[],oe(u.value,r.value)),s&&(q.value=!0,M.push({name:"onboardingReviewInfo"})),v(!1)},Q=async s=>{if(!!s)if(s?.fileObject)s.fileUrl&&window.open("","_blank")?.document.write('<iframe src="'+s?.fileUrl+'" style="width: 100%; height: 100%"></iframe>');else{const e=`${s.filePath}/${s.fileName}`;let o="";const i=s.fileName.split(".");if(i.length>1?o=i[i.length-1].toLowerCase():o="",o==="pdf"){const d=window.open("","_blank"),b=await P.previewPDFFile(e);d?.document.write('<iframe src="'+b+'" style="width: 100%; height: 100%"></iframe>')}else if(["png","jpg","jpeg"].includes(o)){const d=await P.previewImageFile(e);window.open("","_blank")?.document.write('<iframe src="'+d+'" style="width: 100%; height: 100%"></iframe>')}}},Me=()=>{A.value=!1,q.value=!0,M.push(re.value)},qe=()=>{A.value=!1},Ke=async(s,e)=>{v(!0);try{await ve(s,e)}catch{ae(`${s} is missing`)}finally{v(!1)}};pt((s,e,o)=>(q.value&&o(),T.value?(re.value=s.fullPath,o(!1),A.value=!0,!1):(o(),!0))),mt(async()=>{v(!0),await Promise.all([ye(u.value),Fe(u.value,ne),we(u.value,Ie),xe(u.value,Ne),Se(u.value,ze),Ce(u.value,We)]),O.value=await be(u.value),B.value.fieldModels.forEach(s=>{const e=s.fieldKey;y.value[e]=s.fieldValue,r.value.fieldModels.push({formFieldId:s.formFieldId,fieldKey:s.fieldKey,fieldValue:s.fieldValue})}),L.value=_e.value.find(s=>s.progressSidebarUrl.trim().toLocaleLowerCase()==="onboardingWOTC".trim().toLocaleLowerCase()),r.value.uploadFileStateForms=[...B.value.uploadFileStateForms],y.value.uploadFileStateForms=[...B.value.uploadFileStateForms],le.value=me.exports.cloneDeep(y.value),ie.value=!0,v(!1)}),ft([()=>r.value.uploadFileStateForms,()=>y.value.noteForm8850],()=>{y.value.uploadFileStateForms=[...r.value.uploadFileStateForms],me.exports.isEqual(y.value,le.value)?T.value=!1:T.value=!0},{deep:!0});const V=(s,e)=>{if(!e)return{cls:"text-blue-grey",text:"Not Started"};if(e&&!s)return{cls:"text-orange",text:"In progress"};if(e&&s)return{cls:"text-success",text:"Completed"}},ue=(s,e)=>{e&&M.push({name:s})};return(s,e)=>{const o=z("font-awesome-icon"),i=z("fs-button"),d=z("fs-link"),b=z("fs-input"),I=z("VeeForm");return p(),m("div",xt,[t("div",St,[Ct,t("span",null,[a(i,{variant:"outline-primary",class:"text-capitalize",onClick:e[0]||(e[0]=l=>ce(!1)),disabled:!T.value},{default:h(()=>[a(o,{icon:["fal","floppy-disk"],class:"me-2"}),_(" SAVE ")]),_:1},8,["disabled"]),a(i,{variant:"primary",class:"text-capitalize",onClick:e[1]||(e[1]=l=>ce(!0)),disabled:!T.value},{default:h(()=>[_(" SAVE & NEXT ")]),_:1},8,["disabled"])])]),a(I,{ref_key:"formRef",ref:Ue},{default:h(()=>[ie.value?(p(),m("div",{key:0,class:x(n(Ee).breakpoint==="xl"&&"w-60")},[kt,t("div",Tt,[Ot,t("div",Dt,[t("div",Et,[a(o,{icon:["fal","user"],size:"lg",class:"text-cornflower-blue-dark"}),It]),t("div",Nt,[a(o,{icon:["fas","circle"],class:x(["me-3",V(O.value,n(C)).cls]),style:{"font-size":"6px"}},null,8,["class"]),t("span",null,F(V(O.value,n(C)).text),1),a(d,{tag:"a",to:{name:"hrOnboardingWOTC8850Ess"}},{default:h(()=>[a(o,{icon:["fal","arrow-up-right-from-square"],class:"cursor-pointer ms-3 text-success",size:"lg"})]),_:1})])]),t("div",zt,[t("div",Wt,[a(o,{icon:["fal","city"],size:"lg",class:"text-task-blue"}),$t]),t("div",Pt,[a(o,{icon:["fas","circle"],class:x(["me-3",n(R)?"text-success":"text-blue-grey"]),style:{"font-size":"6px"}},null,8,["class"]),t("span",null,F(n(R)?"Completed":"Not Started"),1),a(d,{tag:"a",onClick:e[2]||(e[2]=l=>ue("hrOnboardingWOTC8850Hr",n(C))),disabled:!n(C)},{default:h(()=>[a(o,{icon:["fal","pen-to-square"],class:"ms-3 cursor-pointer text-success",size:"lg"})]),_:1},8,["disabled"])])]),t("div",At,[t("input",{multiple:"",id:"upload8850",type:"file",onChange:e[3]||(e[3]=l=>Y("upload8850",l)),hidden:"",ref_key:"upload8850",ref:Pe,accept:"pdf"},null,544),t("label",Vt,[a(i,{variant:"primary",onClick:e[4]||(e[4]=l=>G(n(w).upload8850)),class:"bg-white text-primary"},{default:h(()=>[a(o,{icon:"fa-light fa-arrow-up-from-bracket",class:"me-2"}),_(" Upload ")]),_:1})]),n(de)?(p(),m("div",Ut,[(p(!0),m(Z,null,ee(n(de),l=>(p(),m("a",{key:l.fileName,class:"d-block my-2"},[a(o,{icon:["fal","paperclip"]}),t("span",{onClick:g=>Q(l),class:"ms-2 text-success"},F(l.fileName),9,jt),t("div",{class:"d-inline ms-3 px-1",onClick:g=>J(l)},[a(o,{icon:n(j),class:"text-danger"},null,8,["icon"])],8,Bt)]))),128))])):S("",!0)])]),t("div",Rt,[Ht,Lt,t("div",Mt,[t("div",qt,[a(o,{icon:["fal","user"],size:"lg",class:"text-cornflower-blue-dark"}),Kt]),t("div",Yt,[a(o,{icon:["fas","circle"],class:x(["me-3",V(O.value,n(k)).cls]),style:{"font-size":"6px"}},null,8,["class"]),t("span",null,F(V(O.value,n(k)).text),1),a(d,{tag:"a",to:{name:"hrOnboardingWOTC9061Ess"}},{default:h(()=>[a(o,{icon:["fal","arrow-up-right-from-square"],class:"text-success cursor-pointer ms-3",size:"lg"})]),_:1})])]),t("div",Gt,[t("div",Jt,[a(o,{icon:["fal","city"],size:"lg",class:"text-task-blue"}),Qt]),t("div",Xt,[a(o,{icon:["fas","circle"],class:x(["me-3",n(H)?"text-success":"text-blue-grey"]),style:{"font-size":"6px"}},null,8,["class"]),t("span",null,F(n(H)?"Completed":"Not Started"),1),a(d,{tag:"a",onClick:e[5]||(e[5]=l=>ue("hrOnboardingWOTC9061Hr",n(k))),disabled:!n(k)},{default:h(()=>[a(o,{icon:["fal","pen-to-square"],class:"text-success cursor-pointer ms-3",size:"lg"})]),_:1},8,["disabled"])])]),t("div",Zt,[n(E).length===0?(p(),m("input",{key:0,multiple:"",disabled:n(E).length>0,id:"upload9061",type:"file",onChange:e[6]||(e[6]=l=>Y("upload9061",l)),hidden:"",ref_key:"upload9061",ref:Ae,accept:"pdf"},null,40,es)):S("",!0),t("label",ts,[a(i,{disabled:n(E).length>0,variant:"primary",onClick:e[7]||(e[7]=l=>G(n(w).upload9061)),class:"bg-white text-primary"},{default:h(()=>[a(o,{icon:"fa-light fa-arrow-up-from-bracket",class:"me-2"}),_(" Upload ")]),_:1},8,["disabled"])]),n(D)?(p(),m("div",ss,[(p(!0),m(Z,null,ee(n(D),l=>(p(),m("a",{key:l.fileName,class:"d-block my-2"},[a(o,{icon:["fal","paperclip"]}),t("span",{onClick:g=>Q(l),class:"ms-2 text-success"},F(l.fileName),9,os),t("div",{class:"d-inline ms-3 px-1",onClick:g=>J(l)},[a(o,{icon:n(j),class:"text-danger"},null,8,["icon"])],8,as)]))),128))])):S("",!0)])]),t("div",ls,[ns,is,t("div",rs,[_("Read instructions carefully before completing this form. See the Form 9062 filling instruction "),a(d,{onClick:e[8]||(e[8]=l=>Ke("WOTC_9062_Instructions",!1))},{default:h(()=>[_("here")]),_:1}),_(".")]),t("div",ds,[n(D).length===0?(p(),m("input",{key:0,multiple:"",disabled:n(D).length>0,id:"upload9062",type:"file",onChange:e[9]||(e[9]=l=>Y("upload9062",l)),hidden:"",ref_key:"upload9062",ref:Ve,accept:"pdf"},null,40,cs)):S("",!0),us,t("label",ps,[a(i,{disabled:n(D).length>0,variant:"primary",onClick:e[10]||(e[10]=l=>G(n(w).upload9062)),class:"bg-white text-primary"},{default:h(()=>[a(o,{icon:"fa-light fa-arrow-up-from-bracket",class:"me-2"}),_(" Upload ")]),_:1},8,["disabled"])]),n(E)?(p(),m("div",ms,[(p(!0),m(Z,null,ee(n(E),l=>(p(),m("a",{key:l.fileName,class:"d-block my-2"},[a(o,{icon:["fal","paperclip"]}),t("span",{onClick:g=>Q(l),class:"ms-2 text-success"},F(l.fileName),9,fs),t("div",{class:"d-inline ms-3 px-1",onClick:g=>J(l)},[a(o,{icon:n(j),class:"text-danger"},null,8,["icon"])],8,vs)]))),128))])):S("",!0)])]),t("div",gs,[a(b,{type:"fsTextArea",label:"Note",modelValue:y.value.noteForm8850,"onUpdate:modelValue":e[11]||(e[11]=l=>y.value.noteForm8850=l),name:"note8850",rows:3},null,8,["modelValue"])])],2)):S("",!0)]),_:1},512),a(bt,{ref:"leaveDialog",showModal:A.value,title:"Unsaved changes",okText:"YES, LEAVE",okTextVariant:"danger",cancelText:"STAY",cancelBtnVariant:"light",onClose:qe,onOk:Me},{content:h(()=>[t("span",hs,[a(o,{class:x(["me-2","text-danger"]),icon:["fa-solid","fa-circle-exclamation"],size:"lg"}),_s])]),_:1},8,["showModal"])])}}});const Is=yt(ys,[["__scopeId","data-v-67388618"]]);export{Is as default};
