import{d as ae,s as A,j as s,y as le,bO as oe,a1 as te,l as re,dh as se,cb as ne,c5 as de,c4 as ue,cp as D,dC as ie,aJ as fe,m as me,S as pe,dd as ve,b as ce,aW as ye,e as Pe,r as c,o as he,c as _e,g as o,w as n,u as b,ao as be,bm as ge,a as r,I as g,aX as y,dK as Ce,A as xe,a2 as we,aY as O,a4 as Ve}from"./index.611fe570.js";import{u as Y}from"./onboardingEmployerPayrollInformationStore.91eecd85.js";import{F as B}from"./FormField.7af7663e.js";import{D as Fe}from"./darkThemeModal.c38e7d4c.js";import{u as $}from"./onboardingStore.b8199798.js";import"./onboardingFormINineApi.7260ada1.js";const Ie={class:"tax-withholding-header d-flex align-items-center py-3"},Se=r("div",{class:"tax-withholding-header__title"},"Payroll Information",-1),Me={class:"d-flex align-items-center"},ke={class:"d-flex"},Re={class:"d-flex pt-2"},Te={class:"pt-2"},Ee={class:"pt-4"},qe=r("span",{class:"ms-1"},"Hours Required for Salary",-1),Ue={class:"pt-4"},Ne=r("span",{class:"ms-1"},"Certified Payroll",-1),Le={class:"pt-4"},Ae=r("span",{class:"ms-1"},"FUTA/FUSA Exempt",-1),De={class:"d-flex"},Oe=r("h5",null,[g(" Are you sure you want to leave this page? "),r("br"),g(" You have unsaved changes, your data will be lost. ")],-1),je=ae({__name:"onboardingPayrollInformation",setup(Ye){const{onboardingSideNavItem:S}=A($()),M=$(),k=s(null),R=le(),{setLoading:P}=oe(),T=s(null),E=s(null),u=s(!1),C=s(!1),q=s(""),h=s(!1),x=s(!1),a=s({}),w=s(),p=s(),U=s([]),N=s([]),V=R.currentRoute.value.params.id,_=Y(),{dataOnboardingEmployerPayrollInformation:z,dataPayPeriods:H,dataEarnCodes:K}=A(Y()),i=s(!1);te(()=>!O.exports.isEqual(a.value,w.value),()=>{C.value&&(O.exports.isEqual(a.value,w.value)?u.value=!1:u.value=!0)}),re.add(se,ne,de,ue,D,ie,fe,me,pe,ve);const W=ce(()=>a.value.payRatePerPayPeriod.includes(",")?13:12),j=l=>{if(l.length>7&&!l.includes(",")){const e=l.slice(0,7),d=l.replace(e,e+",");return a.value.payRatePerPayPeriod=d,a.value.payRatePerPayPeriod}},F=async()=>{const{valid:l}=await E.value.validate();if(!l){Ve(()=>{const e=T.value?.getElementsByClassName("message-error")[0];e&&e.scrollIntoView({behavior:"smooth"})});return}i.value=!0,P(!0),Z(),await G(),await M.markOnboardingSidenavItemAsDone(k.value.progressSidebarId,!0,Number(V)),P(!1)},G=async()=>{await _.editFormPayrollInformation(p.value,B.PayrollInformation),await L()};ye((l,e,d)=>{if(u.value)return h.value=!0,q.value=l.fullPath,x.value?(d(),!0):(d(!1),!1);d()});const J=()=>{h.value=!1,x.value=!0,R.push(q.value)},X=()=>{h.value=!1,x.value=!1},L=async()=>{await _.fetchEarnCodes(),N.value=[...K.value.filter(l=>l.isActive==!0&&l.isDeleted==!1)],await _.fetchPayPeriods(),U.value=[...H.value.filter(l=>l.isActive==!0&&l.isDeleted==!1)],await _.fetchFormPayrollInformation(Number(V),B.PayrollInformation),p.value=z.value,Q(),u.value=!1},Q=()=>{const l=p.value.fieldModels.reduce((e,{fieldKey:d,fieldValue:v})=>(v!==void 0&&(e[d]=v),e),{});a.value=l,a.value.hoursRequiredForSalary==""&&(a.value.hoursRequiredForSalary=!1),a.value.certifiedPayroll==""&&(a.value.certifiedPayroll=!1),a.value.futaFusaExempt==""&&(a.value.futaFusaExempt=!1),w.value={...a.value}},Z=()=>{const l=p.value.fieldModels.map(e=>{const d=a.value[e.fieldKey]||"";return{...e,fieldValue:d}});p.value.fieldModels=l};return Pe(async()=>{P(!0),await L(),S.value.length==0&&await M.getOnboardingSideNavItems(Number(V)),k.value=S.value.find(l=>l.progressSidebarUrl.trim().toLowerCase()==="onboardingPayrollInformation".trim().toLocaleLowerCase()),C.value=!0,P(!1)}),(l,e)=>{const d=c("font-awesome-icon"),v=c("fs-button"),f=c("fs-col"),I=c("fs-form-checkbox"),ee=c("fs-container");return C.value?(he(),_e("div",{key:0,ref_key:"container",ref:T},[o(ee,{fluid:"",class:"overflow-auto px-4",id:"payroll-information",style:{paddingBottom:"100px"}},{default:n(()=>[o(b(be),{ref_key:"formData",ref:E,onSubmit:e[9]||(e[9]=ge(m=>F(),["prevent"]))},{default:n(({meta:m})=>[r("div",Ie,[Se,r("div",Me,[o(v,{class:"d-flex align-items-center",type:"button",variant:"outline-primary",disabled:!u.value,onClick:F},{default:n(()=>[o(d,{icon:["fal","floppy-disk"]}),g(" Save")]),_:1},8,["disabled"]),o(v,{type:"button",variant:"primary",disabled:!u.value,onClick:F},{default:n(()=>[g("Save & next")]),_:1},8,["disabled"])])]),o(f,{md:"10"},{default:n(()=>[r("div",ke,[o(f,{class:"me-4"},{default:n(()=>[o(y,{type:"fsMultiselectList",label:"Pay Type",id:"payType",labelId:"payTypeId",modelValue:a.value.payType,"onUpdate:modelValue":e[0]||(e[0]=t=>a.value.payType=t),typeaheaddata:b(Ce),typeaheadkey:"text",typeaheadvalueattribute:"value",name:"payType",showClear:!0,autocomplete:"donotfill",dropdownSearchable:!0,rules:{required:!0},required:!0,formMeta:{...m,validated:i.value}},null,8,["modelValue","typeaheaddata","formMeta"])]),_:2},1024),o(f,null,{default:n(()=>[o(y,{type:"fsMultiselectList",label:"Earn Code",id:"earnCode",labelId:"earnCodeId",modelValue:a.value.earnCode,"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.earnCode=t),typeaheaddata:N.value,typeaheadkey:"earnCodeName",typeaheadvalueattribute:"id",name:"earnCode",showClear:!0,autocomplete:"donotfill",dropdownSearchable:!0,rules:{required:!0},required:!0,formMeta:{...m,validated:i.value}},null,8,["modelValue","typeaheaddata","formMeta"])]),_:2},1024)]),r("div",Re,[o(f,{class:"me-4"},{default:n(()=>[o(y,{type:"fsMultiselectList",label:"Pay Period",id:"payPeriod",labelId:"payPeriodId",modelValue:a.value.payPeriod,"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.payPeriod=t),typeaheaddata:U.value,typeaheadkey:"payPeriodName",typeaheadvalueattribute:"id",name:"payPeriod",showClear:!0,autocomplete:"donotfill",dropdownSearchable:!0,rules:{required:!0},required:!0,formMeta:{...m,validated:i.value}},null,8,["modelValue","typeaheaddata","formMeta"])]),_:2},1024),o(f,null,{default:n(()=>[o(y,{type:"fsTextInput",label:"Pay Rate per Pay Period",name:"payRatePerPayPeriod",maxlength:b(W),rules:{regex:/^\d+(\,\d+)*$/},formMeta:{...m,validated:i.value},onInput:e[3]||(e[3]=t=>j(a.value.payRatePerPayPeriod)),modelValue:a.value.payRatePerPayPeriod,"onUpdate:modelValue":e[4]||(e[4]=t=>a.value.payRatePerPayPeriod=t)},null,8,["maxlength","rules","formMeta","modelValue"])]),_:2},1024)]),r("div",Te,[o(f,null,{default:n(()=>[o(y,{type:"fsTextInput",label:"Pay Periods per Year",rules:"integer",name:"payPeriodsPerYear",formMeta:{...m,validated:i.value},maxlength:6,modelValue:a.value.payPeriodsPerYear,"onUpdate:modelValue":e[5]||(e[5]=t=>a.value.payPeriodsPerYear=t)},null,8,["formMeta","modelValue"])]),_:2},1024)]),r("div",Ee,[o(I,{modelValue:a.value.hoursRequiredForSalary,"onUpdate:modelValue":e[6]||(e[6]=t=>a.value.hoursRequiredForSalary=t)},{default:n(()=>[qe]),_:1},8,["modelValue"])]),r("div",Ue,[o(I,{modelValue:a.value.certifiedPayroll,"onUpdate:modelValue":e[7]||(e[7]=t=>a.value.certifiedPayroll=t)},{default:n(()=>[Ne]),_:1},8,["modelValue"])]),r("div",Le,[o(I,{modelValue:a.value.futaFusaExempt,"onUpdate:modelValue":e[8]||(e[8]=t=>a.value.futaFusaExempt=t)},{default:n(()=>[Ae]),_:1},8,["modelValue"])])]),_:2},1024)]),_:1},512),o(Fe,{ref:"leaveDialog",showModal:h.value,title:"Unsaved Changes",okText:"YES, LEAVE",okTextVariant:"danger",cancelText:"stay",cancelBtnVariant:"light",onClose:X,onOk:J},{content:n(()=>[r("span",De,[o(d,{class:xe(["me-2","text-danger"]),icon:b(D),size:"lg"},null,8,["icon"]),Oe])]),_:1},8,["showModal"])]),_:1})],512)):we("",!0)}}});export{je as default};
