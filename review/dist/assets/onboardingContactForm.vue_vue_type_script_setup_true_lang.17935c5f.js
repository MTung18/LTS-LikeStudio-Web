import{d as _e,bO as Ce,j as r,y as xe,l as Ve,aF as Ne,aA as Ie,Q as Se,cP as Oe,aU as De,s as Ee,e as Te,a1 as we,aW as ke,r as c,o as g,c as ae,g as a,w as s,a as o,u as v,C as L,A as Ae,D as Be,I as b,f as x,a2 as te,aX as i,F as Pe}from"./index.611fe570.js";import{u as le}from"./onboardingEmployeeContactStore.4a6b6ed4.js";import{u as ne}from"./onboardingStore.b8199798.js";const Fe={class:"d-flex"},qe=o("div",{style:{"font-size":"14px"}},[o("p",null,"Are you sure you want to leave this page?"),o("p",null,"You have unsaved changes, your data will be lost.")],-1),Ue={class:"onboarding-employee-contact scrollForOnboardingContact"},Le={class:"hq-pg__title onboardingContactTitle"},Me={class:"onboarding-employee-contact__sections"},Re=o("h3",{class:"hq-pg__section-head onboarding-employee-contact__subTitle"}," Contact Name ",-1),ze=o("h3",{class:"hq-pg__section-head onboarding-employee-contact__subTitle"}," Contact Info ",-1),Je={key:0,class:"message-error"},$e={class:"mt-4"},je=o("h3",{class:"hq-pg__section-head onboarding-employee-contact__subTitle"}," Phone Number & Email Address ",-1),Ge=o("h3",{class:"hq-pg__section-head onboarding-employee-contact__subTitle"}," Personal Information ",-1),Ye=o("h3",{class:"hq-pg__section-head onboarding-employee-contact__subTitle"}," Address ",-1),He=_e({__name:"onboardingContactForm",props:{formType:null},setup(se){const{formType:de}=se,{setLoading:M}=Ce(),O=r(null),_=xe();Ve.add(Ne,Ie);const{notifySuccess:D}=Se(),p=r(!0),E=new Date;E.setDate(E.getDate()-1);const R=E.toISOString().slice(0,10),C=_.currentRoute.value.params.id,z=_.currentRoute.value.params.contactId,f=le(),{fetchEmployeeContactDetail:oe,updateEmployeeContactDetail:ie,addEmployeeContact:J,fetchRelationshipList:re,fetchPrefixList:ue,fetchGenderList:me,fetchEmployeeContactSsnById:pe}=le(),h=de==={create:"CREATE",edit:"EDIT"}.edit,$=r(new Array),j=r(new Array),G=r(new Array),Y=Oe.map(l=>({id:l.value,name:l.text})),T={id:null,name:""},fe={id:null,name:""},V=(l,t,m)=>{l.id=t,l.name=m},w={id:null,firstName:"",middleName:"",lastName:"",relation:"",relationshipId:null,phoneId:null,phoneNumber:"",phoneExtension:"",emailAddress:"",emailId:null,gender:"",genderId:null,birthDate:"",ssn:"",isEmergencyContact:!1,isDependent:!1,isBeneficiary:!1,isPrimaryContact:!1,namePrefixId:null,prefix:"",suffix:"",address:{id:null,address1:"",address2:"",city:"",state:"",zip:"",country:"",addressType:""}},e=De({data:{...w}}),N=r(!1),W=r(JSON.stringify(f.employeeContactDetail)),ye=async()=>{await Promise.all([re(),ue(),me()]);const l=(m,d)=>d.find(u=>u.id===m)?.name,t=(m,d)=>d.find(u=>u.name===m)?.id;h&&(await oe(Number(C),Number(z)),await pe(Number(z)),e.data=f.employeeContactDetail,e.data.ssn=f.employeeContactSSNById??"",e.data.birthDate=e.data.birthDate?e.data.birthDate.split("T")[0]:"",e.data.relationshipTypeOption={...T},e.data.namePrefixOption={...T},e.data.genderOption={...T},e.data.stateOption={...fe},V(e.data.relationshipTypeOption,e.data.relationshipId,e.data.relation),V(e.data.namePrefixOption,e.data.namePrefixId,l(e.data.namePrefixId,f.prefixOfEmployeeContact)),V(e.data.genderOption,e.data.genderId,l(e.data.genderId,f.genderListOfEmployeeContact)),V(e.data.stateOption,t(e.data.address.state,Y),e.data.address.state)),W.value=JSON.stringify(e.data),$.value=f.relationshipOfEmployeeContact,j.value=f.prefixOfEmployeeContact,G.value=f.genderListOfEmployeeContact},{onboardingSideNavItem:k}=Ee(ne()),A=ne(),Z=r(null),B=async l=>{k.value.length==0&&await A.getOnboardingSideNavItems(Number(C)),Z.value=k.value.find(t=>t.progressSidebarUrl.trim().toLowerCase()==="onboardingContacts".trim().toLocaleLowerCase()),await A.markOnboardingSidenavItemAsDone(Z.value.progressSidebarId,l,Number(C))};Te(async()=>{M(!0);try{await ye(),k.value.length==0&&await A.getOnboardingSideNavItems(Number(C))}catch(l){console.error(l)}finally{M(!1)}});const P=r("");function F(l){P.value=l}const Q=async(l=!1)=>{Object.assign(e.data,JSON.parse(JSON.stringify(w))),O.value.resetForm(),l&&setTimeout(async()=>{await Q()},25)},ce=l=>({id:l.id||0,employeeId:Number(C),firstName:l.firstName,middleName:l.middleName,lastName:l.lastName,relationTypeId:l.relationshipId,phone:{id:l.phoneId||0,phoneTypeId:1,phoneNumber:l.phoneNumber,phoneExtension:l.phoneExtension},email:{id:l.emailId||0,emailAddressTypeId:1,email:l.emailAddress},genderId:l.genderId||null,birthDate:l.birthDate,ssn:l.ssn,isEmergencyContact:l.isEmergencyContact,isDependent:l.isDependent,isBeneficiary:l.isBeneficiary,isPrimaryContact:l.isPrimaryContact,prefixId:l.namePrefixId||null,suffix:l.suffix,address:{id:l.address.id||0,address1:l.address.address1,address2:l.address.address2,city:l.address.city,state:l.address.state,zip:l.address.zip,country:l.address.country,addressType:l.address.addressType,addressTypeId:1}}),q=r(!1);async function ge(){if(S.value=!0,await O.value.validate(),e.data.isEmergencyContact||e.data.isDependent||e.data.isBeneficiary){q.value=!1,e.data.relationshipId=e.data.relationshipTypeOption.id,e.data.genderId=e.data.genderOption?.id??0,e.data.namePrefixId=e.data.namePrefixOption?.id??0,e.data.address.state=e.data.stateOption?.name??"";const l=ce(e.data);h?(await ie(l),D("Contact is updated."),await B(e.data.isEmergencyContact),S.value=!1,_.push({name:"onboardingContacts"})):P.value==="saveAndDone"?(await J(l),D("Contact is added."),await B(e.data.isEmergencyContact),S.value=!1,_.push({name:"onboardingContacts"})):P.value==="saveAndNew"&&(await J(l),await B(e.data.isEmergencyContact),Object.assign(e.data,{isBeneficiary:!1,isDependent:!1,isEmergencyContact:!1}),await Q(!0),D("Contact is added."),S.value=!1)}else q.value=!0}we(e,()=>{h?N.value=JSON.stringify(e.data)!==W.value:N.value=JSON.stringify(e.data)!==JSON.stringify(w)}),ke((l,t,m)=>{if(H.value){m();return}return N.value?(I.value=!0,X.value=l.fullPath,m(!1),!1):(m(),!0)});const I=r(!1),X=r(""),H=r(!1),S=r(!1),be=()=>{I.value=!1},he=()=>{I.value=!1,H.value=!0,_.push(X.value)};return(l,t)=>{const m=c("dark-theme-modal"),d=c("fs-col"),y=c("fs-button"),u=c("fs-row"),K=c("fs-container"),U=c("fs-form-checkbox"),ee=c("fs-form-group"),ve=c("VeeForm");return g(),ae(Pe,null,[a(m,{ref:"leaveDialog",showModal:I.value,title:"Unsaved Changes",okText:"YES, LEAVE",okTextVariant:"danger",cancelText:"STAY",cancelBtnVariant:"light",onClose:be,onOk:he},{content:s(()=>[o("span",Fe,[a(v(L),{class:Ae(["me-2","text-danger"]),icon:["fa-solid","fa-circle-exclamation"],size:"lg"}),qe])]),_:1},8,["showModal"]),a(ve,{onSubmit:ge,ref_key:"form",ref:O},{default:s(()=>[o("div",Ue,[a(K,{fluid:"",class:"hq-pg__header hq-pg__header--sub contain onboarding-employee-contact__header"},{default:s(()=>[a(u,{"align-v":"center"},{default:s(()=>[a(d,{cols:"12",md:"6"},{default:s(()=>[o("h2",Le,Be(h?"Edit Contact":"Add Contact"),1)]),_:1}),a(d,{ls:6,cols:"12",md:"6",class:"onboarding-employee-contact__saveBtn"},{default:s(()=>[a(y,{class:"btn bg-white text-muted border-gray",to:{name:"onboardingContacts"}},{default:s(()=>[b("CANCEL")]),_:1}),h?te("",!0):(g(),x(y,{key:0,class:"btn bg-white text-cyan border-cyan",type:"submit",onClick:t[0]||(t[0]=n=>F("saveAndNew"))},{default:s(()=>[b(" Save & NEW")]),_:1})),h?(g(),x(y,{key:2,class:"btn bg-cyan text-white border-cyan",type:"submit",onClick:t[2]||(t[2]=n=>F("saveAndDone")),disabled:!N.value},{default:s(()=>[b(" Save")]),_:1},8,["disabled"])):(g(),x(y,{key:1,class:"btn bg-cyan text-white border-cyan",type:"submit",onClick:t[1]||(t[1]=n=>F("saveAndDone"))},{default:s(()=>[b(" Save & Done")]),_:1}))]),_:1})]),_:1})]),_:1}),a(K,{fluid:"",class:"contain onboarding-employee-contact__container hq-pg__container"},{default:s(()=>[o("div",Me,[o("section",null,[Re,o("div",null,[a(u,null,{default:s(()=>[a(d,{cols:"12",md:"2"},{default:s(()=>[a(i,{type:"fsMultiselectList",modelValue:e.data.namePrefixOption,"onUpdate:modelValue":t[3]||(t[3]=n=>e.data.namePrefixOption=n),typeaheaddata:j.value,typeaheadkey:"name",typeaheadvalueattribute:"id",name:"Prefix",label:"Prefix",showClear:!0},null,8,["modelValue","typeaheaddata"])]),_:1}),a(d,{cols:"12",md:"8"},{default:s(()=>[a(u,null,{default:s(()=>[a(d,{cols:"12",md:"4"},{default:s(()=>[a(i,{type:"fsTextInput",modelValue:e.data.firstName,"onUpdate:modelValue":t[4]||(t[4]=n=>e.data.firstName=n),name:"FirstName",label:"First Name",rules:"required|max:20",required:!0},null,8,["modelValue"])]),_:1}),a(d,{cols:"12",md:"4"},{default:s(()=>[a(i,{type:"fsTextInput",modelValue:e.data.middleName,"onUpdate:modelValue":t[5]||(t[5]=n=>e.data.middleName=n),name:"MiddleName",label:"Middle Initial",rules:"max:1"},null,8,["modelValue"])]),_:1}),a(d,{cols:"12",md:"4"},{default:s(()=>[a(i,{type:"fsTextInput",modelValue:e.data.lastName,"onUpdate:modelValue":t[6]||(t[6]=n=>e.data.lastName=n),name:"LastName",label:"Last Name",required:!0,rules:"required|max:20"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(d,{cols:"12",md:"2"},{default:s(()=>[a(i,{type:"fsTextInput",modelValue:e.data.suffix,"onUpdate:modelValue":t[7]||(t[7]=n=>e.data.suffix=n),name:"Suffix",label:"Suffix",rules:"max:4"},null,8,["modelValue"])]),_:1})]),_:1})])]),o("section",null,[ze,a(u,null,{default:s(()=>[a(d,null,{default:s(()=>[a(i,{type:"fsMultiselectList",modelValue:e.data.relationshipTypeOption,"onUpdate:modelValue":t[8]||(t[8]=n=>e.data.relationshipTypeOption=n),typeaheaddata:$.value,typeaheadkey:"name",typeaheadvalueattribute:"id",rules:"required",name:"Relationship",label:"Relationship",required:!0,showClear:!0},null,8,["modelValue","typeaheaddata"]),a(ee,null,{default:s(()=>[a(U,{modelValue:e.data.isEmergencyContact,"onUpdate:modelValue":t[9]||(t[9]=n=>e.data.isEmergencyContact=n),name:"isEmergencyContact"},{default:s(()=>[b(" Emergency Contact ")]),_:1},8,["modelValue"]),a(U,{modelValue:e.data.isDependent,"onUpdate:modelValue":t[10]||(t[10]=n=>e.data.isDependent=n),name:"isDependent"},{default:s(()=>[b(" Dependent ")]),_:1},8,["modelValue"]),a(U,{modelValue:e.data.isBeneficiary,"onUpdate:modelValue":t[11]||(t[11]=n=>e.data.isBeneficiary=n),name:"isBeneficiary"},{default:s(()=>[b(" Beneficiary ")]),_:1},8,["modelValue"])]),_:1})]),_:1}),q.value?(g(),ae("span",Je," Field is required.")):te("",!0)]),_:1})]),o("section",$e,[je,a(u,null,{default:s(()=>[a(d,null,{default:s(()=>[o("div",null,[a(u,null,{default:s(()=>[a(d,{cols:"12",md:"6"},{default:s(()=>[a(i,{type:"fsTextInput",modelValue:e.data.emailAddress,"onUpdate:modelValue":t[12]||(t[12]=n=>e.data.emailAddress=n),name:"Email",label:"Email Address",rules:"email|max:100|required",maxlength:"100",required:!0},null,8,["modelValue"])]),_:1}),a(d,{cols:"12",md:"6"},{default:s(()=>[a(i,{type:"fsTextInput",modelValue:e.data.phoneNumber,"onUpdate:modelValue":t[13]||(t[13]=n=>e.data.phoneNumber=n),name:"Phone",label:"Phone Number",rules:"phoneNumber|required",maskFormat:"(###) ###-####",required:!0},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1})]),_:1})]),o("section",null,[Ge,a(u,null,{default:s(()=>[e.data.isBeneficiary===!0||e.data.isDependent===!0?(g(),x(d,{key:0,lg:"6"},{default:s(()=>[a(i,{type:"fsTextInput","input-type":p.value?"password":"text",required:!0,modelValue:e.data.ssn,"onUpdate:modelValue":t[15]||(t[15]=n=>e.data.ssn=n),rules:"ssn|required",name:"SSN",label:"SSN",maskFormat:"###-##-####"},{"input-group-content":s(()=>[a(y,{class:"fs-input__overlap-button",onClick:t[14]||(t[14]=n=>p.value=!p.value),variant:"outline-secondary"},{default:s(()=>[a(v(L),{icon:p.value?"fa-light fa-eye":"fa-light fa-eye-slash"},null,8,["icon"])]),_:1})]),_:1},8,["input-type","modelValue"]),a(i,{type:"fsDateInput",modelValue:e.data.birthDate,"onUpdate:modelValue":t[16]||(t[16]=n=>e.data.birthDate=n),name:"Birthday",label:"Date of Birth",max:v(R),rules:"required|beforeToday",required:!0},null,8,["modelValue","max"])]),_:1})):(g(),x(d,{key:1,lg:"6"},{default:s(()=>[a(i,{type:"fsTextInput","input-type":p.value?"password":"text",modelValue:e.data.ssn,"onUpdate:modelValue":t[18]||(t[18]=n=>e.data.ssn=n),rules:"ssn",name:"SSN",label:"SSN",maskFormat:"###-##-####"},{"input-group-content":s(()=>[a(y,{class:"fs-input__overlap-button",onClick:t[17]||(t[17]=n=>p.value=!p.value),variant:"outline-secondary"},{default:s(()=>[a(v(L),{icon:p.value?"fa-light fa-eye":"fa-light fa-eye-slash"},null,8,["icon"])]),_:1})]),_:1},8,["input-type","modelValue"]),a(i,{type:"fsDateInput",modelValue:e.data.birthDate,"onUpdate:modelValue":t[19]||(t[19]=n=>e.data.birthDate=n),name:"Birthday",label:"Date of Birth",max:v(R),rules:"beforeToday"},null,8,["modelValue","max"])]),_:1})),a(d,{lg:"6"},{default:s(()=>[a(i,{type:"fsMultiselectList",modelValue:e.data.genderOption,"onUpdate:modelValue":t[20]||(t[20]=n=>e.data.genderOption=n),typeaheaddata:G.value,typeaheadkey:"name",typeaheadvalueattribute:"id",name:"Gender",label:"Gender",showClear:!0},null,8,["modelValue","typeaheaddata"])]),_:1})]),_:1})]),o("section",null,[Ye,a(u,null,{default:s(()=>[a(d,null,{default:s(()=>[a(u,null,{default:s(()=>[a(d,{cols:"12"},{default:s(()=>[a(ee,null,{default:s(()=>[a(i,{type:"fsTextInput",modelValue:e.data.address.address1,"onUpdate:modelValue":t[21]||(t[21]=n=>e.data.address.address1=n),name:"Address",label:"Address",rules:"max:30"},null,8,["modelValue"]),a(i,{type:"fsTextInput",modelValue:e.data.address.address2,"onUpdate:modelValue":t[22]||(t[22]=n=>e.data.address.address2=n),name:"AddressOption",label:"Address 2",rules:"max:30"},null,8,["modelValue"])]),_:1})]),_:1}),a(d,{md:"6",class:"mb-3"},{default:s(()=>[a(i,{type:"fsTextInput",modelValue:e.data.address.city,"onUpdate:modelValue":t[23]||(t[23]=n=>e.data.address.city=n),name:"City",label:"City",rules:"max:30"},null,8,["modelValue"])]),_:1}),a(d,{sm:"6",md:"3",class:"mb-3"},{default:s(()=>[a(i,{type:"fsMultiselectList",modelValue:e.data.stateOption,"onUpdate:modelValue":t[24]||(t[24]=n=>e.data.stateOption=n),typeaheaddata:v(Y),typeaheadkey:"name",typeaheadvalueattribute:"id",name:"State",label:"State"},null,8,["modelValue","typeaheaddata"])]),_:1}),a(d,{sm:"6",md:"3"},{default:s(()=>[a(i,{type:"fsTextInput",modelValue:e.data.address.zip,"onUpdate:modelValue":t[25]||(t[25]=n=>e.data.address.zip=n),name:"ZipCode",maskFormat:"##########",label:"Zip Code",rules:"max:10"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})])])]),_:1})])]),_:1},512)],64)}}});export{He as _};
