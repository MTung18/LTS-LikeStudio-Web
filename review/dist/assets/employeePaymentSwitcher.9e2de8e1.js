import{d as q,l as K,b1 as L,j as d,s as B,at as F,y as G,Q as $,b as j,M as s,a1 as z,e as Q,r as l,o as J,c as X,g as a,w as t,a as y,D as _,u as p,I as f,C as Z,ax as ee,ay as ae,_ as te}from"./index.611fe570.js";import{_ as oe}from"./confirmationModal.vue_vue_type_script_setup_true_lang.3c6092c2.js";import{u as se}from"./employeePayrollAndTaxStore.686b03d5.js";import{u as ne,P as M}from"./PayrollAndTaxTab.15217426.js";const I=m=>(ee("data-v-a3bac187"),m=m(),ae(),m),le={class:"change-payment-page"},ce={class:"hq-pg__title"},ie=I(()=>y("div",{class:"d-flex"},` Changing the payment method to Paper Checks will not delete the employee's bank accounts, however they will all be set to "Inactive" status. `,-1)),re={class:"d-flex align-items-center"},ue=I(()=>y("strong",{class:"ms-2 mt-2"},'To change back to Direct Deposit, at least one bank account will need to be "Active" before the employee receives any deposits.',-1)),de=q({__name:"employeePaymentSwitcher",setup(m){K.add(L);const c=d(!1),E=se(),w=ne(),{employeePayrollAndTaxSettings:b}=B(E),n={DIRECT_DEPOSIT:"Direct Deposit",PAPER_CHECKS:"Paper Checks"},g=F(),C=G(),e=d(!1),h=d(!0),{notifyError:x,notifySuccess:R}=$(),i=j(()=>g.params?.id?.toString()),v=d(""),N=d(s.COMMON.CANCEL);function T(){e.value=!e.value}z(e,(r,o)=>{h.value=e.value===o,v.value=r?s.PAYMENT_SWITCHER.SWITCH_TO_DD:s.PAYMENT_SWITCHER.SWITCH_TO_PC}),Q(async()=>{await E.fetchEmployeePayrollAndTaxes(parseInt(i.value)),e.value=b.value.isDirectDepositEnabled});function O(){C.push({name:"payrollAndTaxes",params:{id:i.value,tab:M.DirectDeposit}})}async function H(){e.value?P():c.value=!0}const k=async()=>{e.value?n.DIRECT_DEPOSIT:n.PAPER_CHECKS,P(),c.value=!1,C.push({name:"payrollAndTaxes",params:{id:i.value,tab:M.DirectDeposit}})},P=async()=>{const r=e.value?n.DIRECT_DEPOSIT:n.PAPER_CHECKS;await E.switchEmployeePaymentMethod(+i.value,e.value)?(await w.clearUpsertEmployeeDirectDeposits(),R(s.PAYMENT_SWITCHER.PAYMENTMETHOD_UPDATE.replace("<<type>>",r)),r==n.DIRECT_DEPOSIT&&C.push({name:"manageAccounts",params:{id:i.value}})):x(s.PAYMENT_SWITCHER.PAYMENTMETHOD_UPDATE_FAILED)},V=()=>{c.value=!1};return(r,o)=>{const D=l("fs-col"),S=l("fs-button"),Y=l("fs-row"),W=l("fs-container"),A=l("fs-form-radio"),U=l("fs-form-group");return J(),X("div",le,[a(W,{fluid:"",class:"hq-pg__header hq-pg__header--sticky contain"},{default:t(()=>[a(Y,{"align-v":"center"},{default:t(()=>[a(D,null,{default:t(()=>[y("h2",ce,_(p(s).PAYMENT_SWITCHER.CHANGE_PAYMENT_TITLE),1)]),_:1}),a(D,{cols:"auto"},{default:t(()=>[a(S,{variant:"outline-secondary",onClick:O},{default:t(()=>[f(_(p(s).COMMON.CANCEL),1)]),_:1}),a(S,{variant:"btn-primary",class:"btn btn-primary",type:"submit",onClick:H,disabled:h.value},{default:t(()=>[f(_(p(s).COMMON.SAVE),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),a(U,{label:"Please select how this employee will receive their paycheck:",class:"form-radio"},{default:t(()=>[a(A,{value:!0,modelValue:e.value,"onUpdate:modelValue":o[0]||(o[0]=u=>e.value=u),onChange:T},{default:t(()=>[f(_(n.DIRECT_DEPOSIT),1)]),_:1},8,["modelValue"]),a(A,{value:!1,modelValue:e.value,"onUpdate:modelValue":o[1]||(o[1]=u=>e.value=u),onChange:T},{default:t(()=>[f(_(n.PAPER_CHECKS),1)]),_:1},8,["modelValue"])]),_:1}),a(oe,{showConfirmationModal:c.value,"onUpdate:showConfirmationModal":o[2]||(o[2]=u=>c.value=u),onOK:k,onDISCARD:V,"yes-title":v.value,"no-title":N.value,"show-discard":!1,title:"Payment Method Confirmation"},{default:t(()=>[ie,y("div",re,[a(p(Z),{icon:["fal","fa-circle-exclamation"],class:"text-warning mx-1",style:{"font-size":"large"}}),ue])]),_:1},8,["showConfirmationModal","yes-title","no-title"])])}}});const ye=te(de,[["__scopeId","data-v-a3bac187"]]);export{ye as default};
