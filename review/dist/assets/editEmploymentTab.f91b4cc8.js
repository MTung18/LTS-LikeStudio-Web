import{J as Ze,K as ea,L as aa,N as la,O as ge,R as ta,j as d,d as oa,l as ua,aV as da,Q as na,at as ra,y as sa,i as Ce,s as re,b as _e,h as ia,a1 as Ve,aW as ma,r as V,o as se,c as ie,g as a,w as o,a as v,u as D,am as va,I as H,aX as i,ao as pa,a2 as Ie,F as fa,aY as Te,ap as ca,ax as ya,ay as ba,_ as Sa}from"./index.611fe570.js";import{e as ha}from"./employeeHeader.c061ea79.js";import{E as we}from"./Employment.51b4e29b.js";import{u as Le,E as G}from"./payrollStateTaxCodesStore.d072ea90.js";import{c as ga}from"./commonModal.7c7715d3.js";import{u as y}from"./foundationIntegrationFactory.460aee6e.js";import{I as b}from"./IntegrationFunction.c3156a3a.js";import{u as Ca}from"./index.0faf2598.js";import"./payrollStateTaxCodeApi.0eef4220.js";class _a extends aa{constructor(p){const f=la().ClientSide.WorkforceManagement+"/v1";super(p,f)}async getJobTitles(){let p;try{const f="/JobTitles";p=await this.PerformFetch(f)}catch(f){throw console.error(this.errormessage(ge.Fetch),f),f}return p}async createJobTitle(p){try{return await this.PerformPost("JobTitles",{jobTitleName:p})}catch(f){console.error(this.errormessage(ge.Create),f)}return!1}}const ke=new _a([Ze,ea]),Me=ta("jobtitle",()=>{const c=d();async function p(){c.value=await ke.getJobTitles()}async function f(I){return await ke.createJobTitle(I)}return{jobTitles:c,fetchJobTitle:p,addJobTitle:f}}),S=c=>(ya("data-v-a5c96a0d"),c=c(),ba(),c),Va={class:"text-center"},Ia=["src"],Ta={class:"stickyTitle"},wa=S(()=>v("h2",{class:"hq-pg__title"},"Edit Employment Information",-1)),La=S(()=>v("div",{class:"message-content"}," Are you sure you want to close this employment form? Any unsaved changes will be lost. ",-1)),ka=S(()=>v("h3",{class:"hq-pg__section-head"},"General",-1)),Ma=S(()=>v("p",{style:{color:"#6e7c8f"}},"Section 1",-1)),Ea=S(()=>v("p",{style:{color:"#6e7c8f","margin-top":"30px"}},"Section 2",-1)),Oa=S(()=>v("h3",{class:"hq-pg__section-head",style:{"margin-top":"30px"}},"Supervisor",-1)),xa=S(()=>v("h3",{class:"hq-pg__section-head",style:{"margin-top":"30px"}},"OSHA",-1)),Na=S(()=>v("h3",{class:"hq-pg__section-head",style:{"margin-top":"30px"}},"OTHER",-1)),Aa={key:0,class:"scrollToTop btnScroll"},Ua={class:"d-flex justify-content-end"},qa=oa({__name:"editEmploymentTab",setup(c){ua.add(da);const p=na(),f=ra(),I=sa(),me=d(),s=d(!1),P=d(!1),{fetchEmployment:Ee,fetchEmployeeList:Oe,editEmployment:xe}=Ce(),{fetchJobTitle:ve,addJobTitle:Ne}=Me(),{employment:u,employeeList:Ae}=re(Ce()),{jobTitles:pe}=re(Me()),{fetchPayrollStateTaxCodes:Ue}=Le(),{payrollStateTaxCode:fe}=re(Le()),n=d(new we),ce=d(new we),T=_e(()=>f.params?.id?.toString()),j=d(!1),$=d(!0),Y=d(""),qe=y(b.Department)(),He=y(b.Union)(),Fe=y(b.Trade)(),Je=y(b.WorkersCompState)(),De=y(b.WorkersCompClass)(),Pe=y(b.CostCode)(),je=y(b.GeneralLiabilityState)(),We=y(b.GeneralLiabilityClass)(),ye=50,be=[{text:"Full Time",value:G.FullTime},{text:"Part Time",value:G.PartTime},{text:"Variable Hour",value:G.VariableHour},{text:"Seasonal",value:G.Seasonal}].filter(l=>typeof l!="string").map(l=>({id:l.value,name:l.text})),X=d([]),z=d([]),K=d([]),Q=d([]),Z=d([]),ee=d([]),ae=d([]),le=d([]),W=d([]),Se=d([]),F=d([]),R=d([]),w=d(),L=d(),k=d(),M=d(),E=d(),O=d(),x=d(),N=d(),A=d(),U=d(),h=d(),g=d(),C=d(),q=d();async function Re(){const l=await Promise.all([qe.getData(!0),He.getData(!0),Fe.getData(!0),Je.getData(!0),De.getData(!0),Pe.getData(!0),je.getData(!0),We.getData(!0),ve(),Ue(),Oe(),Ee(T.value)]);W.value=Ae.value.map(e=>({id:e.id,name:e.fullName})),Se.value=fe.value.map(e=>({id:e.id,name:e.payrollStateTaxCodeFsNo})),F.value=pe.value.map(e=>({id:e.id,name:e.name})),F.value.sort((e,J)=>e.name.localeCompare(J.name)),R.value=fe.value.map(e=>({id:e.id,name:e.payrollStateTaxCodeFsNo})),X.value=l[0].map(e=>({id:e.id,name:e.departmentName})),z.value=l[1].map(e=>({id:e.id,name:e.unionName})),K.value=l[2].map(e=>({id:e.id,name:e.tradeName})),Q.value=l[3].map(e=>({id:e.id,name:e.workersCompStateName})),Z.value=l[4].map(e=>({id:e.id,name:e.workersCompClassName})),ee.value=l[5].map(e=>({id:e.id,name:e.costCodeFsNo})),ae.value=l[6].map(e=>({id:e.id,name:e.generalLiabilityStateName})),le.value=l[7].map(e=>({id:e.id,name:e.generalLiabilityClassFsNo}))}async function Be(l){if(l.length>ye)return;await Ne(l),await ve();const e=pe.value.find(J=>J.name===l);C.value=e,F.value.push(e)}function Ge(){u.value.additionalSupervisorIds!==null?h.value=u.value.additionalSupervisorIds.map((l,e)=>({id:l,name:u.value.additionalSupervisors[e]})):h.value=null,u.value.workLocationIds!==null?g.value=u.value.workLocationIds.map((l,e)=>({id:l,name:u.value.workLocations[e]})):g.value=null,C.value=u.value.jobTitleId?{id:u.value.jobTitleId,name:F.value.find(l=>l.id==u.value.jobTitleId)?.name}:null,q.value=u.value.stateOfHire?{id:R.value.find(l=>l.name==u.value.stateOfHire)?.id,name:R.value.find(l=>l.name==u.value.stateOfHire)?.name}:null,w.value=u.value.departmentId?{id:u.value.departmentId,name:X.value.find(l=>l.id==u.value.departmentId)?.name}:null,L.value=u.value.unionId?{id:u.value.unionId,name:z.value.find(l=>l.id==u.value.unionId)?.name}:null,k.value=u.value.tradeId?{id:u.value.tradeId,name:K.value.find(l=>l.id==u.value.tradeId)?.name}:null,O.value=u.value.costCodeId?{id:u.value.costCodeId,name:ee.value.find(l=>l.id==u.value.costCodeId)?.name}:null,M.value=u.value.workersCompStateId?{id:u.value.workersCompStateId,name:Q.value.find(l=>l.id==u.value.workersCompStateId)?.name}:null,E.value=u.value.workersCompClassId?{id:u.value.workersCompClassId,name:Z.value.find(l=>l.id==u.value.workersCompClassId)?.name}:null,N.value=u.value.generalLiabilityClassId?{id:u.value.generalLiabilityClassId,name:le.value.find(l=>l.id==u.value.generalLiabilityClassId)?.name}:null,x.value=u.value.generalLiabilityStateId?{id:u.value.generalLiabilityStateId,name:ae.value.find(l=>l.id==u.value.generalLiabilityStateId)?.name}:null,A.value=u.value.employmentStatusId>0?{id:u.value.employmentStatusId,name:be.find(l=>l.id==u.value.employmentStatusId)?.name}:null,U.value=u.value.reportingSupervisorId?{id:u.value.reportingSupervisorId,name:W.value.find(l=>l.id==u.value.reportingSupervisorId)?.name}:null,n.value={...u.value},ce.value=Te.exports.cloneDeep(n.value)}ia(async()=>{P.value=!0,await Re(),Ge(),P.value=!1}),Ve([()=>T.value,()=>A.value,()=>C.value,()=>w.value,()=>q.value,()=>g.value,()=>L.value,()=>k.value,()=>U.value,()=>h.value,()=>M.value,()=>E.value,()=>O.value,()=>x.value,()=>N.value],()=>{n.value.employeeId=Number(T.value),n.value.employmentStatusId=A.value?A.value.id:0,n.value.jobTitleId=C.value?C.value.id:null,n.value.departmentId=w.value?w.value.id:null,n.value.stateOfHire=q.value?q.value.name:null,n.value.workLocationIds=g.value?g.value.map(l=>l.id):null,n.value.unionId=L.value?L.value.id:null,n.value.tradeId=k.value?k.value.id:null,n.value.reportingSupervisorId=U.value?U.value.id:0,n.value.additionalSupervisorIds=h.value?h.value.map(l=>l.id):null,n.value.workersCompStateId=M.value?M.value.id:null,n.value.workersCompClassId=E.value?E.value.id:null,n.value.costCodeId=O.value?O.value.id:null,n.value.generalLiabilityStateId=x.value?x.value.id:null,n.value.generalLiabilityClassId=N.value?N.value.id:null},{deep:!0});async function $e(){try{const l=await me.value.validate();s.value=!0,l.valid?await xe(n.value)?($.value=!1,I.push({name:"employeeInformation",params:{id:T.value}}),p.notifySuccess("Edit Successful! Your changes have been saved.")):p.notifyError("Employment failed to save changes. Please try again later."):ca("observer")}catch(l){console.log(l),p.notifyError("Employment failed to save changes. Please try again later.")}}const te=_e(()=>!Te.exports.isEqual(n.value,ce.value));function Ye(){te.value===!0?j.value=!0:I.go(-1)}function Xe(){j.value=!1}function ze(){$.value=!1,Y.value?I.push(Y.value):I.push({name:"employeeInformation",params:{id:T.value}})}const oe=d(null),{y:ue}=Ca(oe),de=d(!1);Ve(()=>ue.value,()=>{ue.value>500&&(de.value=!0),ue.value<100&&(de.value=!1)});const Ke=()=>{oe.value.scrollTo({top:0,behavior:"smooth"})};return ma(async l=>{if(!$.value)return!0;if(Y.value=l.fullPath,te.value===!0)return j.value=!0,!1}),(l,e)=>{const J=V("fs-overlay"),r=V("fs-col"),ne=V("fs-button"),_=V("fs-row"),he=V("fs-container"),B=V("fs-form-checkbox"),Qe=V("font-awesome-icon");return se(),ie(fa,null,[a(J,{show:P.value,class:"fsi-pg__overlay","no-wrap":""},{overlay:o(()=>[v("div",Va,[v("img",{src:D(va)},null,8,Ia)])]),_:1},8,["show"]),P.value?Ie("",!0):(se(),ie("div",{key:0,ref_key:"topDiv",ref:oe,class:"hq-pg d-flex flex-column form-edit"},[a(D(pa),{ref_key:"observer",ref:me,id:"observer"},{default:o(({meta:m})=>[v("div",Ta,[a(ha,{employeeId:D(T),class:"position-relative"},null,8,["employeeId"]),a(he,{fluid:"",class:"contain hq-pg__header"},{default:o(()=>[a(_,{"align-v":"center"},{default:o(()=>[a(r,null,{default:o(()=>[wa]),_:1}),a(r,{cols:"auto",class:"ms-auto"},{default:o(()=>[a(ne,{variant:"outline-secondary",onClick:e[0]||(e[0]=t=>Ye())},{default:o(()=>[H("Cancel")]),_:1}),a(ne,{variant:"primary",onClick:e[1]||(e[1]=t=>$e()),disabled:!D(te)},{default:o(()=>[H("Save")]),_:1},8,["disabled"])]),_:1})]),_:1}),a(ga,{showModal:j.value,title:"CLOSE EMPLOYMENT FORM",okText:"CLOSE",cancelText:"CANCEL",okTextVariant:"primary",onEmitParent:e[2]||(e[2]=t=>ze()),onEmitCloseParent:e[3]||(e[3]=t=>Xe())},{content:o(()=>[La]),_:1},8,["showModal"])]),_:1})]),a(he,{fluid:"",class:"contain mt-4"},{default:o(()=>[a(_,null,{default:o(()=>[a(r,{lg:"8"},{default:o(()=>[v("section",null,[ka,Ma,a(_,null,{default:o(()=>[a(r,{lg:"6"},{default:o(()=>[a(i,{type:"fsTextInput",modelValue:n.value.employeeNumber,"onUpdate:modelValue":e[4]||(e[4]=t=>n.value.employeeNumber=t),name:"Employee Number",label:"Employee Number",disabled:!0},null,8,["modelValue"])]),_:1}),a(r,{lg:"6"},{default:o(()=>[a(i,{type:"fsMultiselectList",modelValue:A.value,"onUpdate:modelValue":e[5]||(e[5]=t=>A.value=t),typeaheaddata:D(be),typeaheadkey:"name",typeaheadvalueattribute:"id",name:"Employment Status",label:"Employment Status",autocomplete:"donotfill",dropdownSearchable:!0,rules:{required:!0},formMeta:{...m,validated:s.value}},null,8,["modelValue","typeaheaddata","formMeta"])]),_:2},1024),a(r,{lg:"6"},{default:o(()=>[a(i,{type:"fsMultiselectList",modelValue:C.value,"onUpdate:modelValue":e[6]||(e[6]=t=>C.value=t),typeaheaddata:F.value,typeaheadkey:"name",typeaheadvalueattribute:"id",name:"Job Title",label:"Job Title",autocomplete:"donotfill",dropdownSearchable:!0,rules:{required:!1,max:ye},formMeta:{...m,validated:s.value},onCreateNew:Be,taggable:""},null,8,["modelValue","typeaheaddata","rules","formMeta"])]),_:2},1024),a(r,{lg:"6"},{default:o(()=>[a(i,{type:"fsMultiselectList",modelValue:w.value,"onUpdate:modelValue":e[7]||(e[7]=t=>w.value=t),typeaheaddata:X.value,typeaheadkey:"name",typeaheadvalueattribute:"id",name:"Department",label:"Department",autocomplete:"donotfill",dropdownSearchable:!0,rules:{required:!0},formMeta:{...m,validated:s.value}},null,8,["modelValue","typeaheaddata","formMeta"])]),_:2},1024),a(r,{lg:"6"},{default:o(()=>[a(B,{name:"I-9 Verified",modelValue:n.value.i9Verified,"onUpdate:modelValue":e[8]||(e[8]=t=>n.value.i9Verified=t)},{default:o(()=>[H(" I-9 Verified ")]),_:1},8,["modelValue"])]),_:1})]),_:2},1024),Ea,a(_,null,{default:o(()=>[a(r,{lg:"6"},{default:o(()=>[a(i,{type:"fsMultiselectList",modelValue:q.value,"onUpdate:modelValue":e[9]||(e[9]=t=>q.value=t),typeaheaddata:R.value,typeaheadkey:"name",typeaheadvalueattribute:"id",name:"State of Hire",label:"State of Hire",autocomplete:"donotfill",dropdownSearchable:!0,rules:{required:!0},formMeta:{...m,validated:s.value}},null,8,["modelValue","typeaheaddata","formMeta"])]),_:2},1024),a(r,{lg:"6"},{default:o(()=>[a(i,{type:"fsMultiselectList",modelValue:g.value,"onUpdate:modelValue":e[10]||(e[10]=t=>g.value=t),typeaheaddata:Se.value,typeaheadkey:"name",typeaheadvalueattribute:"id",name:"Work Location",label:"Work Location",multiple:!0,closeOnSelect:!1,isTagError:()=>!1,isTagErrorAlt:()=>!1,autocomplete:"donotfill",dropdownSearchable:!0,rules:{required:!1},showClear:!0,formMeta:{...m,validated:s.value}},null,8,["modelValue","typeaheaddata","isTagError","isTagErrorAlt","formMeta"])]),_:2},1024),a(r,{lg:"6"},{default:o(()=>[a(i,{type:"fsMultiselectList",modelValue:L.value,"onUpdate:modelValue":e[11]||(e[11]=t=>L.value=t),typeaheaddata:z.value,typeaheadkey:"name",typeaheadvalueattribute:"id",name:"Union",label:"Union",autocomplete:"donotfill",dropdownSearchable:!0,rules:{required:!1},formMeta:{...m,validated:s.value}},null,8,["modelValue","typeaheaddata","formMeta"])]),_:2},1024),a(r,{lg:"6"},{default:o(()=>[a(i,{type:"fsMultiselectList",modelValue:k.value,"onUpdate:modelValue":e[12]||(e[12]=t=>k.value=t),typeaheaddata:K.value,typeaheadkey:"name",typeaheadvalueattribute:"id",name:"Trade",label:"Trade",autocomplete:"donotfill",dropdownSearchable:!0,rules:{required:!1},formMeta:{...m,validated:s.value}},null,8,["modelValue","typeaheaddata","formMeta"])]),_:2},1024),a(r,{lg:"6"},{default:o(()=>[a(B,{name:"ACA Exempt",modelValue:n.value.acaExempt,"onUpdate:modelValue":e[13]||(e[13]=t=>n.value.acaExempt=t)},{default:o(()=>[H(" ACA Exempt ")]),_:1},8,["modelValue"])]),_:1})]),_:2},1024)]),v("section",null,[Oa,a(_,null,{default:o(()=>[a(r,{lg:"6"},{default:o(()=>[a(i,{type:"fsMultiselectList",modelValue:U.value,"onUpdate:modelValue":e[14]||(e[14]=t=>U.value=t),typeaheaddata:W.value,typeaheadkey:"name",typeaheadvalueattribute:"id",name:"Reporting Supervisor",label:"Reporting Supervisor",autocomplete:"donotfill",dropdownSearchable:!0,rules:{required:!1},formMeta:{...m,validated:s.value}},null,8,["modelValue","typeaheaddata","formMeta"])]),_:2},1024),a(r,{lg:"12"},{default:o(()=>[a(i,{type:"fsMultiselectList",modelValue:h.value,"onUpdate:modelValue":e[15]||(e[15]=t=>h.value=t),typeaheaddata:W.value,typeaheadkey:"name",typeaheadvalueattribute:"id",name:"Additional Supervisors",label:"Additional Supervisors",multiple:!0,closeOnSelect:!1,isTagError:()=>!1,isTagErrorAlt:()=>!1,autocomplete:"donotfill",dropdownSearchable:!0,showClear:!0,rules:{required:!1},formMeta:{...m,validated:s.value}},null,8,["modelValue","typeaheaddata","isTagError","isTagErrorAlt","formMeta"])]),_:2},1024)]),_:2},1024)]),v("section",null,[xa,a(_,null,{default:o(()=>[a(r,{lg:"6"},{default:o(()=>[a(i,{type:"fsTextInput",modelValue:n.value.oshaLevel,"onUpdate:modelValue":e[16]||(e[16]=t=>n.value.oshaLevel=t),name:"OSHA Level",label:"OSHA Level",rules:{required:!1,regex:/^\d{1,10}$/},maxlength:10,formMeta:{...m,validated:s.value}},null,8,["modelValue","formMeta"])]),_:2},1024),a(r,{lg:"6"},{default:o(()=>[a(i,{type:"fsTextInput",modelValue:n.value.oshaCertificateNumber,"onUpdate:modelValue":e[17]||(e[17]=t=>n.value.oshaCertificateNumber=t),typeaheadkey:"name",typeaheadvalueattribute:"id",name:"OSHA Certification Number",label:"OSHA Certification Number",rules:{required:!1},maxlength:30,formMeta:{...m,validated:s.value}},null,8,["modelValue","formMeta"])]),_:2},1024),a(r,{lg:"6"},{default:o(()=>[a(i,{type:"fsTextInput",modelValue:n.value.oshaTradeLicense,"onUpdate:modelValue":e[18]||(e[18]=t=>n.value.oshaTradeLicense=t),typeaheadkey:"name",typeaheadvalueattribute:"id",name:"OSHA Trade License",label:"OSHA Trade License",rules:{required:!1},maxlength:16,formMeta:{...m,validated:s.value}},null,8,["modelValue","formMeta"])]),_:2},1024)]),_:2},1024)]),v("section",null,[Na,a(_,null,{default:o(()=>[a(r,{lg:"6"},{default:o(()=>[a(i,{type:"fsMultiselectList",modelValue:M.value,"onUpdate:modelValue":e[19]||(e[19]=t=>M.value=t),typeaheaddata:Q.value,typeaheadkey:"name",typeaheadvalueattribute:"id",name:"Worker\u2019s Comp State",label:"Worker\u2019s Comp State",autocomplete:"donotfill",dropdownSearchable:!0,rules:{required:!1},formMeta:{...m,validated:s.value}},null,8,["modelValue","typeaheaddata","formMeta"])]),_:2},1024),a(r,{lg:"6"},{default:o(()=>[a(i,{type:"fsMultiselectList",modelValue:E.value,"onUpdate:modelValue":e[20]||(e[20]=t=>E.value=t),typeaheaddata:Z.value,typeaheadkey:"name",typeaheadvalueattribute:"id",name:"Worker\u2019s Comp Class Number",label:"Worker\u2019s Comp Class Number",autocomplete:"donotfill",dropdownSearchable:!0,rules:{required:!1},formMeta:{...m,validated:s.value}},null,8,["modelValue","typeaheaddata","formMeta"])]),_:2},1024),a(r,{lg:"6"},{default:o(()=>[a(i,{type:"fsMultiselectList",modelValue:O.value,"onUpdate:modelValue":e[21]||(e[21]=t=>O.value=t),typeaheaddata:ee.value,typeaheadkey:"name",typeaheadvalueattribute:"id",name:"Cost Code Number",label:"Cost Code Number",autocomplete:"donotfill",dropdownSearchable:!0,rules:{required:!1},formMeta:{...m,validated:s.value}},null,8,["modelValue","typeaheaddata","formMeta"])]),_:2},1024),a(r,{lg:"6"},{default:o(()=>[a(i,{type:"fsMultiselectList",modelValue:x.value,"onUpdate:modelValue":e[22]||(e[22]=t=>x.value=t),typeaheaddata:ae.value,typeaheadkey:"name",typeaheadvalueattribute:"id",name:"General Liability State",label:"General Liability State",autocomplete:"donotfill",dropdownSearchable:!0,rules:{required:!1},formMeta:{...m,validated:s.value}},null,8,["modelValue","typeaheaddata","formMeta"])]),_:2},1024),a(r,{lg:"6"},{default:o(()=>[a(i,{type:"fsMultiselectList",modelValue:N.value,"onUpdate:modelValue":e[23]||(e[23]=t=>N.value=t),typeaheaddata:le.value,typeaheadkey:"name",typeaheadvalueattribute:"id",name:"General Liability Class Number",label:"General Liability Class Number",autocomplete:"donotfill",dropdownSearchable:!0,rules:{required:!1},formMeta:{...m,validated:s.value}},null,8,["modelValue","typeaheaddata","formMeta"])]),_:2},1024),a(r,{lg:"12"},{default:o(()=>[a(B,{name:"Corporate Officer",modelValue:n.value.corporateOfficer,"onUpdate:modelValue":e[24]||(e[24]=t=>n.value.corporateOfficer=t)},{default:o(()=>[H(" Corporate Officer ")]),_:1},8,["modelValue"])]),_:1}),a(r,{lg:"12",style:{"margin-top":"10px"}},{default:o(()=>[a(B,{name:"Owner Operator",modelValue:n.value.ownerOperator,"onUpdate:modelValue":e[25]||(e[25]=t=>n.value.ownerOperator=t)},{default:o(()=>[H(" Owner Operator ")]),_:1},8,["modelValue"])]),_:1})]),_:2},1024)])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},512),de.value?(se(),ie("div",Aa,[v("div",Ua,[a(ne,{variant:"primary",onClick:Ke},{default:o(()=>[a(Qe,{icon:["fal","arrow-up"],size:"lg"})]),_:1})])])):Ie("",!0)],512))],64)}}});const $a=Sa(qa,[["__scopeId","data-v-a5c96a0d"]]);export{$a as default};
