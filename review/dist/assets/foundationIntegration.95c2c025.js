import{J as W,K as Q,L as H,N as tt,R as at,d as st,l as et,S as ot,dO as nt,dP as it,dQ as ct,dL as lt,k as rt,dR as dt,j as x,e as _t,dS as U,r as l,o as u,c as D,g as a,w as s,a as r,D as h,F as q,z as B,dT as P,f as y,I as m,A as N,a2 as ut,ax as mt,ay as pt,_ as ft}from"./index.611fe570.js";import{j as gt}from"./index.a003826a.js";import{I as i,a as Ct}from"./IntegrationFunction.c3156a3a.js";import{u as ht}from"./foundationCompanyCasConnectionStore.b3301598.js";var e=(t=>(t.Employee="Employee",t.EarnCode="Earn Code",t.AccrualCode="Accrual Code",t.AccrualPlan="Accrual Plan",t.Deduction="Benefits/Deduction",t.Department="Department",t.Minority="Minority",t.Shift="Shift",t.Trade="Trade",t.LocalTaxAuthority="Local Tax Authority",t.Union="Union",t.TaxState="Tax State",t.Crew="Crew",t.CostCode="Cost Code",t.WorkersCompState="Workers Comp. State",t.WorkersCompClass="Workers Comp. Class",t.GeneralLiabilityState="General Liability State",t.GeneralLiabilityClass="General Liability Class",t.PayPeriod="Pay Period",t.MiscDeductionCycle="Misc. Deduction Cycle",t.TaxGroup="Tax Group",t))(e||{});class yt extends H{constructor(p){const f=tt().ClientSide.WorkforceManagement;super(p,f)}async getIntegrationLogs(p){let f=[];const v=`v1/IntegrationLogs?integrationProvider=${p}`;try{const g=await this.axiosInstance.get(v);g&&g.data&&g.status==200&&(f=g.data)}catch(g){console.log(g)}return f}}const St=new yt([W,Q]),xt=at("integrationLog",()=>{async function t(p){return await St.getIntegrationLogs(p)}return{getIntegrationLogs:t}});var R=(t=>(t[t.Foundation=1]="Foundation",t[t.QuickBooks=2]="QuickBooks",t[t.Generic=3]="Generic",t))(R||{});const F=t=>(mt("data-v-a190ea0c"),t=t(),pt(),t),bt={class:"hq-pg"},It=F(()=>r("h2",{class:"hq-pg__title"},"Foundation Integration",-1)),vt={class:"me-2"},Lt={class:"ellipsis-text"},wt=F(()=>r("div",{class:"fw-bold ellipsis-text"},"Client Name",-1)),Dt={class:"ellipsis-text"},Nt={class:"me-2"},Ft={class:"ellipsis-text"},At=F(()=>r("div",{class:"fw-bold ellipsis-text"},"Database Name",-1)),Tt={class:"ellipsis-text"},Gt={class:"contain hq-pg__container container-fluid bg-gray"},Mt={class:"me-2"},Ut={class:"hq-pg__title ml-2"},qt={class:"list__integration list__table"},Bt={class:"pe-1"},Pt=["id"],Rt=st({__name:"foundationIntegration",setup(t){et.add(ot,nt,it,ct,gt,lt,rt,dt);const p=x(!0),f=x([]),v=x("Has not been synced yet."),g=x("Has not been imported yet."),L=x(null);_t(async()=>{p.value=!0,k(),z(),j(),p.value=!1});function o(c,d){const _={name:"settingsFoundationImport",params:{importType:c}};return{foundationItem:P(Ct.displayName(c)),phqFeature:P(d),integrationEntityName:d,projectHQEntity:d,foundationIntegrationFunction:c,importRoute:_,syncRoute:{..._,query:{isSync:!0}},hasSync:!0}}function k(){const c=[];c.push({sectionName:"Employees",entities:[o(i.Employee,e.Employee)],faIcon:"users"}),c.push({sectionName:"Setup",entities:[o(i.AccrualCode,e.AccrualCode),o(i.AccrualPlan,e.AccrualPlan),o(i.CostCode,e.CostCode),o(i.Crew,e.Crew),o(i.Department,e.Department),o(i.EarnCode,e.EarnCode),o(i.GeneralLiabilityState,e.GeneralLiabilityState),o(i.GeneralLiabilityClass,e.GeneralLiabilityClass),o(i.Minority,e.Minority),o(i.MiscDeductionCycle,e.MiscDeductionCycle),o(i.MiscDeduction,e.Deduction),o(i.PayPeriod,e.PayPeriod),o(i.Shift,e.Shift),o(i.TaxGroup,e.TaxGroup),o(i.TaxState,e.TaxState),o(i.LocalTaxAuthority,e.LocalTaxAuthority),o(i.Trade,e.Trade),o(i.Union,e.Union),o(i.WorkersCompState,e.WorkersCompState),o(i.WorkersCompClass,e.WorkersCompClass)],faIcon:"cog"}),f.value=c}async function z(){const c=ht();await c.fetchCompanyCasConnection(),L.value=c.companyCasConnection}async function j(){const d=await xt().getIntegrationLogs(R.Foundation);V(d)}function V(c){c.forEach(d=>{const _=$(d.integrationFunctionId);_&&(d.lastImportTimeUTC&&(_.lastImport=U(d.lastImportTimeUTC)),d.lastSyncTimeUTC&&(_.lastSync=U(d.lastSyncTimeUTC)))})}function $(c){for(const d of f.value)for(const _ of d.entities)if(_.foundationIntegrationFunction===c)return _;return null}return(c,d)=>{const _=l("fs-col"),w=l("fs-row"),A=l("fs-container"),O=l("fs-overlay"),C=l("font-awesome-icon"),J=l("fs-card-header"),b=l("fs-th"),T=l("fs-popover"),G=l("fs-tr"),K=l("fs-thead"),I=l("fs-td"),M=l("fs-link"),X=l("fs-tbody"),Y=l("fs-table-simple"),Z=l("fs-card-body"),E=l("fs-card");return u(),D("div",bt,[a(A,{fluid:"",class:"hq-pg__header contain"},{default:s(()=>[a(w,{"align-v":"center"},{default:s(()=>[a(_,{cols:"auto"},{default:s(()=>[It]),_:1})]),_:1})]),_:1}),a(O,{show:p.value,"spinner-variant":"primary","no-wrap":""},null,8,["show"]),a(A,{fluid:"",class:"hq-pg__header hq-pg__header--sub contain"},{default:s(()=>[a(w,{"align-v":"center",class:"mt-2"},{default:s(()=>[a(_,{class:"justify-content-between ellipsis-text"},{default:s(()=>[a(w,{"align-h":"around"},{default:s(()=>[a(_,{cols:"auto",class:"d-flex align-items-center my-2"},{default:s(()=>[r("div",vt,[a(C,{size:"2x",class:"text-primary",icon:["fal","city"]})]),r("div",Lt,[wt,r("div",Dt,h(L.value?.companyName),1)])]),_:1}),a(_,{cols:"auto",class:"d-flex align-items-center my-2"},{default:s(()=>[r("div",Nt,[a(C,{size:"2x",class:"text-primary",icon:["fal","database"]})]),r("div",Ft,[At,r("div",Tt,h(L.value?.databaseName),1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),r("div",Gt,[(u(!0),D(q,null,B(f.value,S=>(u(),y(E,{key:S.sectionName,class:"dashboard-card mb-4","no-body":""},{default:s(()=>[a(J,{class:"dashboard-card__header"},{default:s(()=>[r("div",Mt,[a(C,{class:"text-cyan",size:"lg",icon:["fal",`${S.faIcon}`]},null,8,["icon"])]),r("h2",Ut,h(S.sectionName),1)]),_:2},1024),a(Z,{class:"my-2"},{default:s(()=>[r("div",qt,[a(Y,null,{default:s(()=>[a(K,null,{default:s(()=>[a(G,{class:"list__tr list__tr--thead"},{default:s(()=>[a(b,{class:"ps-0"},{default:s(()=>[m("Foundation Name")]),_:1}),a(b,{class:"ps-0"},{default:s(()=>[m(" WHQ Feature "),a(C,{id:S.sectionName+"info",class:"text-secondary",icon:["fas","info-circle"]},null,8,["id"]),a(T,{target:S.sectionName+"info",placement:"right",triggers:"hover focus"},{default:s(()=>[m(" This is where the corresponding FOUNDATION feature will be stored in WorkforceHQ. ")]),_:2},1032,["target"])]),_:2},1024),a(b,{class:"ps-0"},{default:s(()=>[m("Last Synced")]),_:1}),a(b,{class:"ps-0"},{default:s(()=>[m("Last Imported")]),_:1})]),_:2},1024)]),_:2},1024),a(X,null,{default:s(()=>[(u(!0),D(q,null,B(S.entities,n=>(u(),y(G,{key:n.foundationIntegrationFunction,class:"list__tr list__tr--tbody"},{default:s(()=>[a(I,{class:"list__td list__td--25 ps-0"},{default:s(()=>[m(h(n.foundationItem),1)]),_:2},1024),a(I,{class:"list__td list__td--25 ps-0"},{default:s(()=>[m(h(n.phqFeature),1)]),_:2},1024),a(I,{class:N(["list__td list__td--25 ps-0",{"text-secondary":!n.lastSync||!n.hasSync}])},{default:s(()=>[r("span",Bt,[n.syncRoute?(u(),y(M,{key:0,to:n.syncRoute},{default:s(()=>[a(C,{icon:["far","sync-alt"],class:"text-primary"})]),_:2},1032,["to"])):(u(),y(C,{key:1,icon:["far","sync-alt"],class:"text-primary"}))]),m(" "+h(n.hasSync?n.lastSync?n.lastSync:v.value:"n/a"),1)]),_:2},1032,["class"]),a(I,{class:N(["list__td list__td--25 ps-0",{"text-secondary":!n.lastImport}])},{default:s(()=>[r("span",{class:"pe-1",id:n.integrationEntityName+"import"},[n.importRoute?(u(),y(M,{key:0,to:n.importRoute,disabled:n.importDisabled},{default:s(()=>[a(C,{icon:["fal","file-import"],class:"text-primary"})]),_:2},1032,["to","disabled"])):(u(),y(C,{key:1,class:N([n.importDisabled?"opacity-50":"clickable","text-primary"]),icon:["fal","file-import"]},null,8,["class"]))],8,Pt),m(" "+h(n.lastImport?n.lastImport:g.value),1)]),_:2},1032,["class"]),n.importDisabled?(u(),y(T,{key:0,target:n.integrationEntityName+"import",placement:"left",triggers:"hover focus"},{default:s(()=>[m(h(n.importDisabledText),1)]),_:2},1032,["target"])):ut("",!0)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))])])}}});const $t=ft(Rt,[["__scopeId","data-v-a190ea0c"]]);export{$t as default};
