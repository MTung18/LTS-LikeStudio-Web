import{aK as ee,d as ve,l as ce,aV as he,i as G,s as $,bU as J,Q as ye,W as _e,at as ge,y as Ve,j as v,b2 as Ne,a1 as Z,h as be,r as c,o as x,c as S,g as a,w as t,a as _,u as g,am as Ie,I as h,f as xe,a2 as q,F as Me,ap as Se,ax as qe,ay as Ee,_ as Le}from"./index.611fe570.js";import{u as K}from"./honorificStore.e8168e9e.js";import{u as Ce}from"./index.0faf2598.js";class De{id;addressId;personId;address1;address2;city;state;zip;country;personAddressType;changeTrackingDate;constructor(r){Object.assign(this,r)}}class ke{employeeId;general;eeo;sensitive;constructor(r){Object.assign(this,r)}}class Te{honorificId;firstName;middleName;lastName;suffix;email;phoneNumber;address;genderId;maritalStatusId;dateOfBirth;ssn;constructor(r){Object.assign(this,r)}}class we{isVeteran;isNonResidentAlien;isMultiracial;isNonBinaryTransgender;minorityCodeId;constructor(r){Object.assign(this,r)}}class Oe{driversLicenseState;driversLicenseNumber;driversLicenseExpirationDate;constructor(r){Object.assign(this,r)}}class Y{employeeId;honorific;firstName;middleName;lastName;suffix;email;phoneNumber;address;gender;maritalStatus;dateOfBirth;ssn;isVeteran;isNonResidentAlien;isMultiracial;isNonBinaryTransgender;minorityCodeId;driversLicenseState;driversLicenseNumber;driversLicenseExpirationDate;constructor(r){r&&r instanceof ee?(this.employeeId=r.id,this.firstName=r.firstName,this.middleName=r.middleName,this.lastName=r.lastName,this.suffix=r.suffix,this.email=r.email,this.phoneNumber=r.mainPhone?.phoneNumber.replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3"),this.address=r.address?r.address:new De,this.maritalStatus=r.maritalStatus,this.dateOfBirth=r.dateOfBirth,this.ssn=r.ssn?.replace(/-/g,""),this.isVeteran=r.isVeteran,this.isNonResidentAlien=r.isNonResidentAlien,this.isMultiracial=r.isMultiracial,this.isNonBinaryTransgender=r.isNonBinaryTransgender,this.minorityCodeId=r.minorityCodeId,this.driversLicenseState=r.driversLicenseState,this.driversLicenseNumber=r.driversLicenseNumber,this.driversLicenseExpirationDate=r.driversLicenseExpirationDate):Object.assign(this,r)}toEmployeePersonalInfoInput(r){const p=new ke,V=new Te({honorificId:this.honorific?.honorificId,firstName:this.firstName,middleName:this.middleName,lastName:this.lastName,suffix:this.suffix,email:this.email,phoneNumber:this.phoneNumber.replace(/[^\d]/g,""),address:this.address,genderId:this.gender?.id,maritalStatusId:this.maritalStatus?.maritalStatusId,dateOfBirth:this.dateOfBirth,ssn:this.ssn});V.address.state=V.address.state.toUpperCase();const E=new we({isVeteran:this.isVeteran,isNonResidentAlien:this.isNonResidentAlien,isMultiracial:this.isMultiracial,isNonBinaryTransgender:this.isNonBinaryTransgender,minorityCodeId:this.minorityCodeId}),y=new Oe({driversLicenseState:this.driversLicenseState.toUpperCase(),driversLicenseNumber:this.driversLicenseNumber,driversLicenseExpirationDate:this.driversLicenseExpirationDate});return p.employeeId=this.employeeId,r?(p.general=r.WHQ_251_3138?V:null,p.eeo=r.WHQ_251_3139?E:null,p.sensitive=r.WHQ_251_3140?y:null):(p.general=V,p.eeo=E,p.sensitive=y),p}}const k=f=>(qe("data-v-04c7546a"),f=f(),Ee(),f),Ue={class:"text-center"},Be=["src"],Pe=k(()=>_("h2",{class:"hq-pg__title"},"Edit Personal Information",-1)),$e={key:0,class:"mb-3"},Xe=k(()=>_("h3",{class:"hq-pg__section-head"},"General",-1)),Ae={key:1,class:"mb-3"},Re=k(()=>_("h3",{class:"hq-pg__section-head"},"EEO",-1)),ze={key:2,class:"mb-3"},je=k(()=>_("h3",{class:"hq-pg__section-head"},"Driver's License",-1)),He={key:0,class:"scrollToTop btnScroll"},Fe={class:"d-flex justify-content-end"},We=ve({__name:"editPersonalInformation",setup(f){ce.add(he);const{fetchEmployeeDetails:r,fetchContactMasterData:p,fetchEmployeeSsn:V,updateEmployeeDetails:E}=G(),{employeeDetails:y,contactMasterData:X,employeeSsn:A}=$(G()),{fetchHonorificDropdownData:ae}=K(),{honorificDropdownData:R}=$(K()),{fetchMaritalStatusList:le}=J(),{maritalStatusListOfEmployeeInformation:te}=$(J()),{notifySuccess:se,notifyError:T}=ye(),L=_e("$providePermissions"),z=ge(),C=Ve(),N=v(!1),d=v(!1),j=v();let H;const l=v(),w=v(!1),re=Ne.debounce(()=>{w.value=JSON.stringify(H)!==JSON.stringify(l.value)},500);Z(()=>l.value,re,{deep:!0});const O=v(null),{y:U}=Ce(O),B=v(!1);Z(()=>U.value,()=>{U.value>150&&(B.value=!0),U.value<100&&(B.value=!1)});const oe=()=>{O.value.scrollTo({top:0,behavior:"smooth"})},M=v(!1),P=v(!1),F=v(),ne=()=>{P.value=!0,C.push(F.value)},de=()=>{C.go(-1)};C.beforeEach((i,e,b)=>{w.value===!0&&P.value===!1?(F.value=i,M.value=!0,b(!1)):b()}),be(async()=>{N.value=!0,await Promise.allSettled([ae(),p(),le(),V(Number(z.params.id)),r(Number(z.params.id))]).then(i=>{l.value=new Y(new ee(y.value)),y.value.honorificId!==0&&i[0].status==="fulfilled"&&(l.value.honorific=R.value.find(e=>e.honorificId===y.value.honorificId)),y.value.genderId!==0&&i[1].status==="fulfilled"&&(l.value.gender=X.value.genders.find(e=>e.id===y.value.genderId)),A.value!==""&&i[3].status==="fulfilled"&&(l.value.ssn=A.value),H=new Y(JSON.parse(JSON.stringify(l.value)))}).catch(()=>{T("Employee personal information could not be loaded.")}).finally(()=>{N.value=!1})});async function W(){const i=await j.value.validate();if(i.valid){N.value=!0;try{await E(l.value.toEmployeePersonalInfoInput(L.value)),se("Employee personal information was updated."),P.value=!0,C.go(-1)}catch(e){console.error(e),T("Employee personal information could not be updated.")}finally{N.value=!1}}else{Se("observer");let e=Object.values(i.errors)[0],b=e.includes("Field is required")?"Please fill the required fields":e;T(b)}}function ue(){if(!l.value.ssn||l.value.ssn==="")return!1;var i=l.value.ssn,e=i.replace(/\D/g,"");e=e.substring(0,9),e.length>5?e=e.replace(/^(\d\d\d)(\d{2})(\d{0,4}).*/,"$1-$2-$3"):e.length>3?e=e.replace(/^(\d\d\d)(\d{0,3})/,"$1-$2"):e=e.replace(/^(\d*)/,"$1"),l.value.ssn=e}function ie(){if(!l.value.address.zip||l.value.address.zip==="")return!1;var i=l.value.address.zip,e=i.replace(/[A-Za-z-]/g,"");e.length>5&&(e=e.replace(/^(\d{5})(\d{0,4})$/,"$1-$2")),l.value.address.zip=e}return(i,e)=>{const b=c("fs-overlay"),n=c("fs-col"),I=c("fs-button"),m=c("fs-row"),Q=c("fs-container"),u=c("fs-input"),D=c("fs-form-checkbox"),me=c("VeeForm"),fe=c("font-awesome-icon"),pe=c("fs-modal");return x(),S(Me,null,[a(b,{show:N.value,class:"fsi-pg__overlay","no-wrap":""},{overlay:t(()=>[_("div",Ue,[_("img",{src:g(Ie)},null,8,Be)])]),_:1},8,["show"]),_("div",{ref_key:"topDiv",ref:O,class:"hq-pg form-edit"},[a(Q,{fluid:"",class:"hq-pg__header hq-pg__header--sticky contain"},{default:t(()=>[a(m,{"align-v":"center"},{default:t(()=>[a(n,null,{default:t(()=>[Pe]),_:1}),a(n,{cols:"auto"},{default:t(()=>[a(I,{variant:"outline-secondary",onClick:de},{default:t(()=>[h("Cancel")]),_:1}),a(I,{variant:"primary",disabled:!w.value,onClick:W},{default:t(()=>[h("Save")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),N.value?q("",!0):(x(),xe(Q,{key:0,fluid:"",class:"contain hq-pg__container"},{default:t(()=>[a(me,{ref_key:"observer",ref:j,id:"observer"},{default:t(({meta:o})=>[a(m,null,{default:t(()=>[a(n,{lg:"8"},{default:t(()=>[g(L).WHQ_251_3138?(x(),S("section",$e,[Xe,a(m,null,{default:t(()=>[a(n,{md:"3",lg:"2"},{default:t(()=>[a(u,{type:"fsMultiselectList",label:"Prefix",id:"hrRepresentativeId",modelValue:l.value.honorific,"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.honorific=s),typeaheaddata:g(R),typeaheadkey:"honorificName",typeaheadvalueattribute:"honorificId",rules:{required:!1},formMeta:{...o,validated:d.value},name:"prefix"},null,8,["modelValue","typeaheaddata","formMeta"])]),_:2},1024),a(n,{lg:"3",md:"6"},{default:t(()=>[a(u,{type:"fsTextInput",required:!0,modelValue:l.value.firstName,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.firstName=s),label:"First Name",rules:{required:!0},formMeta:{...o,validated:d.value},maxlength:20,name:"firstName"},null,8,["modelValue","formMeta"])]),_:2},1024),a(n,{md:"3",lg:"2"},{default:t(()=>[a(u,{type:"fsTextInput",modelValue:l.value.middleName,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.middleName=s),label:"Middle Name",rules:{required:!1},formMeta:{...o,validated:d.value},maxlength:20,name:"middleName"},null,8,["modelValue","formMeta"])]),_:2},1024),a(n,{md:"9",lg:"3"},{default:t(()=>[a(u,{type:"fsTextInput",required:!0,modelValue:l.value.lastName,"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.lastName=s),label:"Last Name",rules:{required:!0},formMeta:{...o,validated:d.value},maxlength:20,name:"lastName"},null,8,["modelValue","formMeta"])]),_:2},1024),a(n,{md:"3",lg:"2"},{default:t(()=>[a(u,{type:"fsTextInput",modelValue:l.value.suffix,"onUpdate:modelValue":e[4]||(e[4]=s=>l.value.suffix=s),label:"Suffix",rules:{required:!1},formMeta:{...o,validated:d.value},maxlength:4,name:"suffix"},null,8,["modelValue","formMeta"])]),_:2},1024)]),_:2},1024),a(m,null,{default:t(()=>[a(n,null,{default:t(()=>[a(u,{type:"fsMultiselectList",label:"Gender",id:"gender",modelValue:l.value.gender,"onUpdate:modelValue":e[5]||(e[5]=s=>l.value.gender=s),typeaheaddata:g(X).genders,typeaheadkey:"name",typeaheadvalueattribute:"id",required:!0,rules:{required:!0},formMeta:{...o,validated:d.value},name:"Gender"},null,8,["modelValue","typeaheaddata","formMeta"])]),_:2},1024),a(n,null,{default:t(()=>[a(u,{type:"fsMultiselectList",label:"Marital Status",id:"maritalStatusId",modelValue:l.value.maritalStatus,"onUpdate:modelValue":e[6]||(e[6]=s=>l.value.maritalStatus=s),typeaheaddata:g(te),typeaheadkey:"maritalStatusName",typeaheadvalueattribute:"maritalStatusId",rules:{required:!1},formMeta:{...o,validated:d.value},name:"Marital Status"},null,8,["modelValue","typeaheaddata","formMeta"])]),_:2},1024)]),_:2},1024),a(m,null,{default:t(()=>[a(n,null,{default:t(()=>[a(u,{type:"fsDateInput",label:"Date of Birth",id:"dateOfBirth",required:!0,rules:{required:!0},modelValue:l.value.dateOfBirth,"onUpdate:modelValue":e[7]||(e[7]=s=>l.value.dateOfBirth=s),formMeta:{...o,validated:d.value},name:"dateOfBirth"},null,8,["modelValue","formMeta"])]),_:2},1024),a(n,null,{default:t(()=>[a(u,{id:"ssn",type:"fsTextInput",modelValue:l.value.ssn,"onUpdate:modelValue":e[8]||(e[8]=s=>l.value.ssn=s),label:"SSN",required:!0,rules:{required:!0,regex:/^(\d{3}-?\d{2}-?\d{4}|XXX-XX-XXXX)$/},formMeta:{...o,validated:d.value},name:"ssn",sensitiveContent:"",sensitiveMask:"XXX-XX-XXXX",onInput:ue},null,8,["modelValue","rules","formMeta"])]),_:2},1024)]),_:2},1024),a(m,null,{default:t(()=>[a(n,null,{default:t(()=>[a(u,{type:"fsTextInput",required:!0,modelValue:l.value.phoneNumber,"onUpdate:modelValue":e[9]||(e[9]=s=>l.value.phoneNumber=s),label:"Phone Number","data-vv-name":"phoneNumber",rules:{required:!0,regex:/^(\+\d{1,2}\s)?\(?\d{3}\)?[\s.-]\d{3}[\s.-]\d{4}$/},formMeta:{...o,validated:d.value},name:"phoneNumber","mask-format":"(###) ###-####"},null,8,["modelValue","rules","formMeta"])]),_:2},1024),a(n,null,{default:t(()=>[a(u,{type:"fsTextInput",required:!0,modelValue:l.value.email,"onUpdate:modelValue":e[10]||(e[10]=s=>l.value.email=s),label:"Email",rules:{required:!0,regex:/^\S+@\S+\.\S+$/},formMeta:{...o,validated:d.value},maxlength:100,name:"email"},null,8,["modelValue","rules","formMeta"])]),_:2},1024)]),_:2},1024),a(m,null,{default:t(()=>[a(n,null,{default:t(()=>[a(u,{type:"fsTextInput",required:!0,modelValue:l.value.address.address1,"onUpdate:modelValue":e[11]||(e[11]=s=>l.value.address.address1=s),label:"Address",rules:{required:!0},formMeta:{...o,validated:d.value},maxlength:30,name:"address"},null,8,["modelValue","formMeta"])]),_:2},1024)]),_:2},1024),a(m,null,{default:t(()=>[a(n,null,{default:t(()=>[a(u,{type:"fsTextInput",modelValue:l.value.address.address2,"onUpdate:modelValue":e[12]||(e[12]=s=>l.value.address.address2=s),label:"Address 2",rules:{required:!1},formMeta:{...o,validated:d.value},maxlength:30,name:"address2"},null,8,["modelValue","formMeta"])]),_:2},1024)]),_:2},1024),a(m,null,{default:t(()=>[a(n,{md:"6"},{default:t(()=>[a(u,{type:"fsTextInput",required:!0,modelValue:l.value.address.city,"onUpdate:modelValue":e[13]||(e[13]=s=>l.value.address.city=s),label:"City",rules:{required:!0},formMeta:{...o,validated:d.value},maxlength:30,name:"city"},null,8,["modelValue","formMeta"])]),_:2},1024),a(n,null,{default:t(()=>[a(u,{type:"fsTextInput",required:!0,modelValue:l.value.address.state,"onUpdate:modelValue":e[14]||(e[14]=s=>l.value.address.state=s),label:"State",rules:{required:!0,usState:!0},formMeta:{...o,validated:d.value},maxlength:2,name:"state"},null,8,["modelValue","formMeta"])]),_:2},1024),a(n,null,{default:t(()=>[a(u,{type:"fsTextInput",required:!0,modelValue:l.value.address.zip,"onUpdate:modelValue":e[15]||(e[15]=s=>l.value.address.zip=s),label:"Zip Code",rules:{required:!0,regex:/^\d{5}(?:[-\s]\d{4})?$/},formMeta:{...o,validated:d.value},maxlength:10,onInput:ie,name:"zipCode"},null,8,["modelValue","rules","formMeta"])]),_:2},1024)]),_:2},1024)])):q("",!0),g(L).WHQ_251_3139?(x(),S("section",Ae,[Re,a(m,null,{default:t(()=>[a(n,{md:"3"},{default:t(()=>[a(D,{modelValue:l.value.isVeteran,"onUpdate:modelValue":e[16]||(e[16]=s=>l.value.isVeteran=s)},{default:t(()=>[h(" Veteran ")]),_:1},8,["modelValue"]),a(D,{modelValue:l.value.isMultiracial,"onUpdate:modelValue":e[17]||(e[17]=s=>l.value.isMultiracial=s)},{default:t(()=>[h(" Multiracial ")]),_:1},8,["modelValue"])]),_:1}),a(n,{md:"3"},{default:t(()=>[a(D,{modelValue:l.value.isNonResidentAlien,"onUpdate:modelValue":e[18]||(e[18]=s=>l.value.isNonResidentAlien=s)},{default:t(()=>[h(" Nonresident Alien ")]),_:1},8,["modelValue"]),a(D,{modelValue:l.value.isNonBinaryTransgender,"onUpdate:modelValue":e[19]||(e[19]=s=>l.value.isNonBinaryTransgender=s)},{default:t(()=>[h(" Non-Binary/Transgender ")]),_:1},8,["modelValue"])]),_:1})]),_:1})])):q("",!0),g(L).WHQ_251_3140?(x(),S("section",ze,[je,a(m,null,{default:t(()=>[a(n,null,{default:t(()=>[a(u,{type:"fsTextInput",modelValue:l.value.driversLicenseState,"onUpdate:modelValue":e[20]||(e[20]=s=>l.value.driversLicenseState=s),label:"Driver's License State",rules:{required:!1,usState:!0},formMeta:{...o,validated:d.value},maxlength:2,name:"driverLicenseState"},null,8,["modelValue","formMeta"])]),_:2},1024),a(n,null,{default:t(()=>[a(u,{type:"fsTextInput",modelValue:l.value.driversLicenseNumber,"onUpdate:modelValue":e[21]||(e[21]=s=>l.value.driversLicenseNumber=s),label:"Driver's License Number",rules:{required:!1},formMeta:{...o,validated:d.value},maxlength:20,name:"driverLicenseNumber"},null,8,["modelValue","formMeta"])]),_:2},1024),a(n,null,{default:t(()=>[a(u,{type:"fsDateInput",label:"Driver's License Expiration",id:"startDate",rules:{required:!1},modelValue:l.value.driversLicenseExpirationDate,"onUpdate:modelValue":e[22]||(e[22]=s=>l.value.driversLicenseExpirationDate=s),formMeta:{...o,validated:d.value},name:"driverLicenseExpiration"},null,8,["modelValue","formMeta"])]),_:2},1024)]),_:2},1024)])):q("",!0)]),_:2},1024)]),_:2},1024)]),_:1},512),B.value?(x(),S("div",He,[_("div",Fe,[a(I,{variant:"primary",onClick:oe},{default:t(()=>[a(fe,{icon:["fal","arrow-up"],size:"lg"})]),_:1})])])):q("",!0)]),_:1})),a(pe,{modelValue:M.value,"onUpdate:modelValue":e[24]||(e[24]=o=>M.value=o),centered:"","content-class":"phq-modal","header-class":"phq-modal__header","title-class":"phq-modal__title","body-class":"phq-modal__body","footer-class":"phq-modal__footer","header-text-variant":"light","header-bg-variant":"blue--dk",lazy:!0,"hide-header-close":"","no-close-on-backdrop":"","no-close-on-esc":"",onOk:ne,onCancel:e[25]||(e[25]=o=>M.value=!1),title:"Cancel Confirmation"},{"modal-footer":t(o=>[a(I,{variant:"outline-secondary",class:"me-auto",onClick:o.cancel},{default:t(()=>[h("Cancel")]),_:2},1032,["onClick"]),a(I,{variant:"secondary",onClick:o.ok},{default:t(()=>[h("Discard")]),_:2},1032,["onClick"]),a(I,{variant:"primary",onClick:e[23]||(e[23]=s=>{M.value=!1,W()})},{default:t(()=>[h("Save")]),_:1})]),default:t(()=>[h(" Would you like to Save or Discard your changes? ")]),_:1},8,["modelValue"])],512)],64)}}});const Ze=Le(We,[["__scopeId","data-v-04c7546a"]]);export{Ze as default};
