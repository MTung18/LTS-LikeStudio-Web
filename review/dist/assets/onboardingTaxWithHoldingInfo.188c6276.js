import{d as Be,l as it,bK as dt,cp as rt,c5 as ct,cb as ut,dt as ft,du as mt,b as _e,at as Ke,y as pt,a0 as _t,T as vt,bb as ht,s as ee,Q as gt,bO as Ge,j as h,aW as yt,e as Qe,r as k,o as d,c as r,u as v,a,a2 as y,g as t,w as o,I as p,f as Z,D as G,F as j,z as X,A as bt,bd as Ve,be as Re,cN as pe,ax as kt,ay as xt,_ as Ft,dv as $t,ct as Nt,dw as Et,m as Dt,aF as Wt,aA as Tt,cR as Pt,cM as Ot,c4 as we,dx as Ae,bm as Ut,cP as Ze,ai as Xe,aj as et,i as tt,E as at}from"./index.611fe570.js";import{b as wt,d as Ht,e as Lt,g as jt,h as At,i as Me}from"./index.a003826a.js";import{u as lt,a as nt,O as Mt}from"./OnboardingSummariesUrl.4a4ab140.js";import{F as Oe}from"./FormField.7af7663e.js";import{D as Ct}from"./darkThemeModal.c38e7d4c.js";import{u as ot}from"./onboardingEmployeeWithholdingCertificateStore.81453670.js";import{u as st}from"./onboardingEmployerInformationStore.02dbf0f9.js";import{u as Ue}from"./onboardingStore.b8199798.js";import{i as St}from"./fileUtils.932fb01d.js";import{S as Ce}from"./StaticFiles.040feba2.js";import{u as ze}from"./reportTemplateStore.f0128478.js";const He=M=>(kt("data-v-4fe77dfa"),M=M(),xt(),M),Vt={key:0},Rt={class:"d-flex align-items-center px-4 justify-content-between form_header"},zt={key:0,class:"font-weight-bold"},Bt={key:1,class:"font-weight-bold"},Kt={class:"d-flex align-items-center"},Gt={key:0},Qt={class:"p-4"},qt={class:"d-flex align-items-center justify-content-between mb-3"},Jt={key:0,class:"font-weight-bold"},Yt={key:0,class:"card_container d-flex justify-content-between align-items-center p-4 mb-3"},Zt={class:"d-flex gap-2 card_title"},Xt={class:"d-flex align-items-center gap-3"},ea={class:"card_status"},ta=["innerHTML"],aa={key:1,class:"card mb-4"},la={class:"card_header-mobile d-flex align-items-center justify-content-between p-2"},na={class:"d-flex gap-2 card_title"},oa={class:"px-2 py-4"},sa={class:"card_status"},ia=["innerHTML"],da={key:2,class:"card_container d-flex justify-content-between align-items-center p-4"},ra={class:"d-flex gap-2 card_title"},ca={class:"d-flex align-items-center gap-3"},ua={class:"card_status"},fa=["innerHTML"],ma={key:3,class:"card"},pa={class:"card_header-mobile d-flex align-items-center justify-content-between p-2"},_a={class:"d-flex gap-2 card_title"},va={class:"px-2 py-4"},ha={class:"card_status"},ga=["innerHTML"],ya=He(()=>a("hr",null,null,-1)),ba=He(()=>a("div",{class:"form_label"},[a("label",{class:"mb-2"},"Upload File")],-1)),ka={class:"error_message"},xa={class:"file_list",style:{"margin-top":"20px"}},Fa={style:{flex:"1"}},wa=["onClick"],Ca={key:5,class:"mb-3"},Sa={class:"d-flex align-items-center gap-2",style:{fontSize:"14px"}},Ia={class:"d-flex align-items-center"},$a={key:0,class:"p-3"},Na={class:"d-flex align-items-center flex-1 w-100 justify-content-between"},Ea={style:{flex:"1"}},Da=["onClick"],Wa={key:1,class:"p-3 d-flex flex-column align-items-center gap-3"},Ta=He(()=>a("div",{class:"text-status-inactive"}," No file has been uploaded. ",-1)),Pa={class:"d-flex py-3"},Oa=He(()=>a("div",null,[p(" Are you sure you want to leave this page? "),a("br"),p(" You have unsaved changes, your data will be lost. ")],-1)),Ua={key:1},Ha=Be({__name:"onboardingTaxWithHoldingInfoSummary",setup(M){it.add(dt,wt,rt,ct,Ht,ut,Lt,jt,At,Me,ft,mt);const V=_e(()=>R?.activeUserClient?.clientGuid??"Shared"),$=_e(()=>ie.params.id),H=Oe.TaxWithholdingInfoSummary,N=_e(()=>{const f=ie.path.split("/");return!!(f.includes("employee-with-holding-certificate")||f.includes("employer-information"))}),ie=Ke(),Q=pt(),{responsive:E}=_t(),R=vt(),x=ht(),{getOnboardingTaxWithHoldingInfoSummary:w,updateOnboardingQuickHireTaxWithHoldingInfo:Se}=lt(),{onboardingTaxWithHoldingInfoSummary:q}=ee(lt()),{notifyError:te}=gt(),{getOnboardingEmployeeWitholdingCertificate:ve}=ot(),{getOnboardingEmployerInformation:ae}=st(),{onboardingEmployeeWitholdingCertificate:de}=ee(ot()),{onboardingEmployerInformation:J}=ee(st()),{markOnboardingSidenavItemAsDone:he,getOnboardingSideNavItems:P,getEmployeeFormSubmit:re}=Ue(),{onboardingSideNavItem:Ie}=ee(Ue()),{setLoading:D}=Ge(),{getDocumentTemplate:$e}=ze(),ce=h(""),O=h(!1),z=h(!1),Ne=h(!1),Ee=h(""),W=h([]),U=h({isDone:!1,formFiles:"form files",note:""}),L=h(void 0),le=h(""),B=h(""),ge=h(null),ye=h([]),ue=h(!1);function De(f){const s=["pdf","jpeg","png","jpg"],c=f.split(".").pop().toLowerCase();return s.includes(c)}const We=function(f){let s=0;const c=f.length;let m=0;if(c>0)for(;m<c;)s=(s<<5)-s+f.charCodeAt(m++)|0;return s},fe=f=>{const s=new Date,c=f.split("."),m=`${c[0]}${We(c[0]+s.getMilliseconds())}.${c[c.length-1]}`;return m.substring(m.length-50)},Y=async f=>{O.value=!0;const c=f.target.files;for(let m=0;m<c.length;m++){if(!St(c[m]))return;if(De(c[m].name))ce.value="";else{te("Wrong file format, upload PDF, PNG, JPEG or JPG only!");return}const C=await Ve(Re.EmployeeW4,`${V.value}`,$.value.toString()),S=fe(c[m].name),i=new FileReader;i.onload=()=>{const e=i.result.toString(),n={fileName:S,filePath:C,fileObject:new File([c[m]],S),fileUrl:e};W.value.push(n)},i.readAsDataURL(c[m])}O.value=!0},be=()=>{const f=document.getElementById("upload_file");f.value="",f.click()},Te=async f=>{if(!!f)if(f?.fileObject)window.open("","_blank").document.write('<iframe src="'+f?.fileUrl+'" width="100%" height="100%"></iframe>');else{let s="";const c=f.fileName.split(".");c.length>1?s=c[c.length-1].toLowerCase():s="";const m=`${f.filePath}/${f.fileName}`;s==="pdf"?(D(!0),await x.previewPDFFile(m).finally(()=>{D(!1)})):["png","jpg","jpeg"].includes(s)&&(D(!0),x.previewImageFile(m).finally(()=>{D(!1)}))}},ke=f=>{W.value=W.value.filter(s=>s.fileName!==f.fileName),ye.value.push(`${f.filePath}/${f.fileName}`),O.value=!0},Le=async(f,s)=>{s&&await x.uploadDocument({path:f,file:s,fileName:s.name},!0)},xe=async f=>{D(!0);try{const s=W.value.map(m=>({formFieldId:L.value.fieldModels.find(C=>C.fieldKey==="formFiles").formFieldId,fileName:m.fileName,filePath:m.filePath,description:"",payload:"",documentCategory:null}));L.value.uploadFileStateForms=s,U.value.isDone=!0,U.value.formFiles="form files";const c=L.value.fieldModels.map(m=>{const C=U.value[m.fieldKey]||"";return{...m,fieldValue:C}});L.value.fieldModels=c,O.value=!1,W.value.forEach(async m=>{await Le(m.filePath,m.fileObject)}),await Se(Number($.value),L.value),ye.value.forEach(m=>{x.deleteFile(m),ye.value=[]}),le.value&&W.value.length>0?await he(ge.value.progressSidebarId,!0,Number($.value)):await he(ge.value.progressSidebarId,!1,Number($.value)),f&&Q.push({name:"onboardingFormI9"})}catch(s){console.error(s)}finally{D(!1)}},K={notStarted:"notStarted",inProgress:"inProgress",completed:"completed"};function T(f){let s,c;switch(f){case"completed":s="#1ABC9C",c="Completed";break;case"notStarted":s="#6E7C8F",c="Not Started";break;case"inProgress":s="#FF6600",c="In Progress";break;default:s="#6E7C8F",c="Not Started";break}return`<div style="display: flex; align-items: center">
    <span style="display: inline-block; width: 5px; height: 5px; border-radius: 50%; background-color: ${s}; margin-right: 5px;"></span>
    ${c}
  </div>`}const Pe=()=>{z.value=!1,Ne.value=!0,Q.push(Ee.value)},ne=()=>{z.value=!1};yt((f,s,c)=>O.value?(z.value=!0,Ee.value=f.fullPath,Ne.value?(c(),!0):(c(!1),!1)):(c(),!0)),Qe(async()=>{D(!0);try{await P(Number($.value)),await w(Number($.value),H),await ve(Number($.value),Oe.TaxWithholdingInfoEmployee),await ae(Number($.value),Oe.TaxWithholdingInfoEmployer),ue.value=await re(Number($.value)),ge.value=Ie.value.find(s=>s.progressSidebarUrl.trim().toLocaleLowerCase()==="onboardingTaxWithHoldingInfo".trim().toLocaleLowerCase()),J.value.fieldModels.find(s=>s.fieldKey==="formStatus")?.fieldValue&&ue.value?le.value=K.completed:le.value=K.notStarted,de.value.fieldModels.find(s=>s.fieldKey==="isFormDone")?.fieldValue&&ue.value?B.value=K.completed:de.value.fieldModels.find(s=>s.fieldKey==="isFormDone")?.fieldValue&&!ue.value?B.value=K.inProgress:B.value=K.notStarted,L.value=q.value,L.value.uploadFileStateForms.forEach(s=>{W.value.push({fileName:s.fileName,filePath:s.filePath})});const f=L.value.fieldModels.reduce((s,{fieldKey:c,fieldValue:m})=>(m!==void 0&&(s[c]=m),s),{});U.value=f}catch(f){console.error(f)}finally{D(!1)}});const me=async(f,s)=>{D(!0);try{await $e(f,s)}catch{te(`${f} is missing`)}finally{D(!1)}};return(f,s)=>{const c=k("font-awesome-icon"),m=k("fs-button"),C=k("fs-link"),S=k("fs-form-group"),i=k("fs-card-header"),e=k("fs-card-body"),n=k("fs-card"),u=k("fs-input"),_=k("router-view");return d(),r(j,null,[v(N)?y("",!0):(d(),r("div",Vt,[a("div",null,[a("div",Rt,[v(E).mobile?y("",!0):(d(),r("div",zt,"Form W-4 | Employee's Withholding Certificate")),v(E).mobile?(d(),r("div",Bt,"Form W-4 ")):y("",!0),a("div",Kt,[t(m,{class:"d-flex align-items-center",type:"submit",variant:"outline-primary",disabled:!O.value,onClick:s[0]||(s[0]=g=>xe(!1))},{default:o(()=>[t(c,{icon:["far","floppy-disk"]}),v(E).mobile?y("",!0):(d(),r("span",Gt,"Save"))]),_:1},8,["disabled"]),t(m,{type:"submit",variant:"primary",onClick:s[1]||(s[1]=g=>xe(!0)),disabled:!O.value},{default:o(()=>[p("Save & next")]),_:1},8,["disabled"])])]),a("div",Qt,[a("div",qt,[v(E).mobile?y("",!0):(d(),r("div",Jt,"Form W-4")),t(C,{class:"text-task-blue",onClick:s[2]||(s[2]=g=>me(v(Ce).FEDERAL_W4_INSTRUCTIONS,!1))},{default:o(()=>[p("Form W-4 Instruction")]),_:1})]),v(E).mobile?y("",!0):(d(),r("div",Yt,[a("div",Zt,[t(c,{size:"lg",icon:["far","user"],class:"text-cornflower-blue-dark"}),p(" Employee Information ")]),a("div",Xt,[a("div",ea,[a("div",{innerHTML:T(B.value)},null,8,ta)]),t(C,{to:{name:"onboardingEmployeeWithHoldingCertificate"}},{default:o(()=>[t(m,{variant:"outline-primary",style:{width:"70px"}},{default:o(()=>[p("View")]),_:1})]),_:1})])])),v(E).mobile?(d(),r("div",aa,[a("div",la,[a("div",na,[t(c,{size:"lg",icon:["far","user"],class:"text-cornflower-blue-dark"}),p(" Employee Information ")]),t(C,{to:{name:"onboardingEmployeeWithHoldingCertificate"}},{default:o(()=>[t(m,{variant:"outline-primary",style:{width:"70px"}},{default:o(()=>[p("View")]),_:1})]),_:1})]),a("div",oa,[a("div",sa,[a("div",{innerHTML:T(B.value)},null,8,ia)])])])):y("",!0),v(E).mobile?y("",!0):(d(),r("div",da,[a("div",ra,[t(c,{size:"lg",icon:["far","city"],class:"text-task-blue"}),p(" Employer Information ")]),a("div",ca,[a("div",ua,[a("div",{innerHTML:T(le.value)},null,8,fa)]),t(C,{to:{name:"onboardingEmployerInformation"},disabled:B.value!==K.completed},{default:o(()=>[t(m,{variant:"primary",style:{width:"70px"}},{default:o(()=>[p("Start")]),_:1})]),_:1},8,["disabled"])])])),v(E).mobile?(d(),r("div",ma,[a("div",pa,[a("div",_a,[t(c,{size:"lg",icon:["far","city"],class:"text-task-blue"}),p(" Employer Information ")]),t(C,{to:{name:"onboardingEmployerInformation"},disabled:B.value!==K.completed},{default:o(()=>[t(m,{variant:"primary",style:{width:"70px"}},{default:o(()=>[p("Start")]),_:1})]),_:1},8,["disabled"])]),a("div",va,[a("div",ha,[a("div",{innerHTML:T(le.value)},null,8,ga)])])])):y("",!0),ya,v(E).mobile?y("",!0):(d(),Z(S,{key:4,class:"form_group mb-3"},{default:o(()=>[ba,a("input",{type:"file",name:"files",multiple:"",id:"upload_file",onChange:Y,hidden:""},null,32),t(m,{variant:"outline-primary",onClick:be,class:"d-flex gap-2"},{default:o(()=>[t(c,{icon:["fal","upload"],size:"lg"}),p("FORM W-4")]),_:1}),a("div",ka,G(ce.value),1),a("div",xa,[(d(!0),r(j,null,X(W.value,g=>(d(),r("div",{key:g.filePath,class:"file_item d-flex align-items-center mb-1 p"},[t(c,{icon:["fal","paperclip"]}),t(C,{onClick:F=>Te(g),class:"d-flex",style:{"margin-left":"10px",width:"200px"}},{default:o(()=>[a("span",Fa,G(v(pe)(g.fileName)),1)]),_:2},1032,["onClick"]),a("div",{style:{display:"inline",cursor:"pointer"},onClick:F=>ke(g)},[t(c,{icon:v(Me),class:"text-danger"},null,8,["icon"])],8,wa)]))),128))])]),_:1})),v(E).mobile?(d(),r("div",Ca,[t(n,{"no-body":"",class:"h-100"},{default:o(()=>[t(i,{class:"fs-16px font-weight-bold p-3 d-flex align-items-center justify-content-between"},{default:o(()=>[a("div",Sa,[t(c,{icon:["fal","upload"],size:"lg",class:"text-task-violet"}),p(" Form W-4 Upload ")]),a("div",Ia,[W.value.length>0?(d(),Z(m,{key:0,variant:"link",class:"text-decoration-none",onClick:be},{default:o(()=>[p("Upload")]),_:1})):y("",!0),a("input",{type:"file",name:"files",multiple:"",id:"upload_file",onChange:Y,hidden:""},null,32)])]),_:1}),t(e,{class:"p-0"},{default:o(()=>[W.value.length>0?(d(),r("div",$a,[(d(!0),r(j,null,X(W.value,g=>(d(),r("div",{key:g.fileName,class:"mb-2"},[a("div",Na,[t(C,{onClick:F=>Te(g),class:"d-flex gap-2 align-items-center text-decoration-none text-black"},{default:o(()=>[a("span",Ea,G(v(pe)(g.fileName)),1)]),_:2},1032,["onClick"]),a("div",{style:{display:"inline",cursor:"pointer"},onClick:F=>ke(g)},[t(c,{icon:v(Me),class:"text-danger"},null,8,["icon"])],8,Da)])]))),128))])):(d(),r("div",Wa,[Ta,t(m,{variant:"outline-green",onClick:be},{default:o(()=>[t(c,{icon:["fal","upload"],size:"lg",class:"me-2"}),p(" Upload")]),_:1}),a("input",{type:"file",name:"files",multiple:"",id:"upload_file",onChange:Y,hidden:""},null,32)]))]),_:1})]),_:1})])):y("",!0),t(u,{type:"FsTextArea",label:"Notes",modelValue:U.value.note,"onUpdate:modelValue":s[3]||(s[3]=g=>U.value.note=g),onInput:s[4]||(s[4]=g=>O.value=!0)},null,8,["modelValue"])])]),t(Ct,{ref:"leaveDialog",showModal:z.value,title:"Unsaved changes",okText:"YES, LEAVE",okTextVariant:"danger",cancelText:"STAY",cancelBtnVariant:"light",onClose:ne,onOk:Pe},{content:o(()=>[a("span",Pa,[t(c,{class:bt(["me-2","text-danger"]),icon:["fa-solid","fa-circle-exclamation"],size:"lg"}),Oa])]),_:1},8,["showModal"])])),v(N)?(d(),r("div",Ua,[t(_)])):y("",!0)],64)}}});const La=Ft(Ha,[["__scopeId","data-v-4fe77dfa"]]),A=M=>(kt("data-v-7d58ab07"),M=M(),xt(),M),ja={class:"position-relative"},Aa={class:"d-flex align-items-center px-4 justify-content-between form_header"},Ma={key:0,class:"title font-weight-bold"},Va={key:1,class:"title font-weight-bold"},Ra={class:"d-flex align-items-center"},za={key:0},Ba={key:0,class:"p-4"},Ka=A(()=>a("div",{class:"tax-withholding-label"},"A. State W-4 Form",-1)),Ga=A(()=>a("hr",null,null,-1)),Qa={key:0},qa={class:"d-flex align-items-center gap-3"},Ja={key:0,class:"text-black font-weight-bold",style:{textDecoration:"none"}},Ya={key:1,class:"tax-text-red"},Za={class:"d-flex align-items-center gap-3 mt-3"},Xa={key:0,class:"w-100"},el={class:"ms-2"},tl=["onClick"],al={key:1,class:"d-flex align-items-center justify-content-between w-100"},ll=A(()=>a("div",{class:"text-gray"}," No file has been uploaded. ",-1)),nl=["data-id","onChange"],ol={key:0,class:"my-3"},sl=["data-id","onChange"],il={key:1},dl=A(()=>a("div",null," Getting employee's state information...",-1)),rl=[dl],cl=A(()=>a("div",{class:"tax-withholding-label mt-4"},"B. Federal W-4 Form",-1)),ul=A(()=>a("hr",null,null,-1)),fl=A(()=>a("div",{class:"text-black font-weight-bold"}," Federal W-4 Form ",-1)),ml={class:"d-flex align-items-center gap-3 mt-3"},pl={key:0,class:"w-100"},_l={class:"d-flex align-items-center flex-1 w-100 justify-content-between"},vl={style:{flex:"1"}},hl=["onClick"],gl={key:1,class:"d-flex align-items-center justify-content-between w-100"},yl=A(()=>a("div",{class:"text-gray"}," No file has been uploaded. ",-1)),bl={key:0},kl={class:"mt-4"},xl={key:1,class:"p-4"},Fl={key:0},wl={class:"d-flex align-items-center gap-2"},Cl={class:"d-flex align-items-center"},Sl=["onChange","data-id"],Il={key:0,class:"p-3"},$l={class:"d-flex align-items-center flex-1 w-100 justify-content-between"},Nl={style:{flex:"1"}},El=["onClick"],Dl={key:1,class:"p-3 d-flex flex-column align-items-center gap-3"},Wl=A(()=>a("div",{class:"text-status-inactive"}," No file has been uploaded. ",-1)),Tl=["onChange","data-id"],Pl={class:"d-flex align-items-center gap-2"},Ol={class:"d-flex align-items-center"},Ul={key:0,class:"p-3"},Hl={class:"d-flex align-items-center flex-1 w-100 justify-content-between"},Ll={style:{flex:"1"}},jl=["onClick"],Al={key:1,class:"p-3 d-flex flex-column align-items-center gap-3"},Ml=A(()=>a("div",{class:"text-status-inactive"}," No file has been uploaded. ",-1)),Vl={class:"mt-4"},Rl={class:"d-flex py-3"},zl=A(()=>a("div",null,[p(" Are you sure you want to leave this page? "),a("br"),p(" You have unsaved changes, your data will be lost. ")],-1)),Bl=Be({__name:"onboardingQuickHireTaxWithHoldingInfo",setup(M){it.add(ft,rt,$t,Nt,Et,mt,Dt,Wt,ct,Tt,Pt,Ot,wt,we,ut,dt);const{responsive:V}=_t(),$=Ke(),{setLoading:H}=Ge(),N=_e(()=>$.params.id),ie=h(null),{notifyError:Q,notifySuccess:E}=gt(),R=h([]),x=h([]),w=h([]),Se=h(null),q=h(null),te=h([]),ve=h(null),ae=h(null),de=h(null),J=h(""),he=Oe.TaxWithholdingInfoQuickHire,P=h(!1),re=h(!1),Ie=h(""),D=h(!1),$e=pt(),ce=h(null),O=h({fieldModels:[{formFieldId:ve.value,fieldKey:"isDone",fieldValue:!1},{formFieldId:ae.value,fieldKey:"formFiles",fieldValue:"form files"},{formFieldId:de.value,fieldKey:"note",fieldValue:""}],uploadFileStateForms:[],formId:he}),z=ht(),Ne=vt(),{getOnboardingQuickHireTaxWithHoldingInfo:Ee,updateOnboardingQuickHireTaxWithHoldingInfo:W}=nt(),{onboardingQuickHireTaxiWithHoldingInfo:U}=ee(nt()),{markOnboardingSidenavItemAsDone:L,getOnboardingSideNavItems:le}=Ue(),{onboardingSideNavItem:B}=ee(Ue()),{stateDocuments:ge}=ee(ze()),{getDocumentTemplate:ye,getStateDocuments:ue}=ze(),De=_e(()=>Ne?.activeUserClient?.clientGuid??"Shared");function We(i){const e=["pdf","jpeg","png","jpg"],n=i.split(".").pop().toLowerCase();return e.includes(n)}const fe=(i,e)=>{[...i.target.files].forEach(u=>{if(!!St(u)){if(!We(u.name)){Q("Upload JPEG, JPG, PDF, PNG only!",null,"Uploaded Failed");return}Le(u,e.stateEnum),P.value=!0}})},Y=i=>{[...i.target.files].forEach(n=>{if(!We(n.name)){Q("Upload JPEG, JPG, PDF, PNG only!",null,"Uploaded Failed");return}be(n),P.value=!0})},be=async i=>{const e=await Ve(Re.EmployeeW4ByState,De.value,N.value.toString()),n=ke(i.name),u=new FileReader;u.onload=()=>{const _=u.result.toString(),g={fileName:n,filePath:`${e}`,fileObject:new File([i],n),fileUrl:_};w.value.push(g)},u.readAsDataURL(i)},Te=function(i){let e=0;const n=i.length;let u=0;if(n>0)for(;u<n;)e=(e<<5)-e+i.charCodeAt(u++)|0;return e};function ke(i){const e=new Date,n=i.split("."),u=`${n[0]}${Te(n[0]+e.getMilliseconds())}.${n[n.length-1]}`;return u.substring(u.length-50)}const Le=async(i,e)=>{const n=Ze.find(I=>I.value===e).value,u=await Ve(Re.EmployeeW4ByState,De.value,N.value.toString(),n),_=ke(i.name),g=new FileReader;x.value.some(I=>I.stateId===e)||x.value.push({stateId:e,fileData:[]}),g.onload=()=>{const I=g.result.toString(),oe={fileName:_,filePath:`${u}`,fileObject:new File([i],_),fileUrl:I};x.value.forEach(Fe=>{Fe.stateId===e&&Fe.fileData.push(oe)})},g.readAsDataURL(i)},xe=(i,e)=>{const u=x.value.find(_=>_.stateId===i).fileData.filter(_=>_.fileName!==e.fileName);x.value.forEach(_=>{_.stateId===i&&(_.fileData=u)}),te.value.push(`${e.filePath}/${e.fileName}`),P.value=!0},K=async i=>{const e=[],n=[];i.forEach(async u=>{const _=Ze.find(F=>F.value===u);await ue(_.text.replace(/\s+/g,""));const g=ge.value.reduce((F,I)=>(I.includes("Form")&&(F.form=I),I.includes("Worksheet")?F.worksheet=I:I.includes("Instructions")&&(F.instruction=I),F),{});if(_){const F={stateName:_?.text,stateEnum:_?.value,fileName:`${_?.text} W-4 Form.pdf `,filePath:_?.file,fileWorkSheetName:g.worksheet||"",filePathWorkSheet:_?.worksheet,fileInstructName:g.instruction||"",filePathInstruct:_?.instruction};n.push({stateId:_.value,fileData:[]}),e.push(F)}R.value=[...e]})},T=i=>{if(i){const e=document.querySelector(`input[data-id="${i}-input"]`);e.value="",e.click()}else q.value.value="",q.value.click()},Pe=i=>`State_${i.replace(/\s+/g,"")}_W4_Form.pdf`,ne=i=>{const e=x.value.find(n=>n.stateId===i);return e?e.fileData:[]},me=i=>{if(!!i)if(i?.fileObject)window.open("","_blank").document.write('<iframe src="'+i?.fileUrl+'" width="100%" height="100%"></iframe>');else{let e="";const n=i.fileName.split(".");n.length>1?e=n[n.length-1].toLowerCase():e="";const u=`${i.filePath}/${i.fileName}`;e==="pdf"?z.previewPDFFile(u):["png","jpg","jpeg"].includes(e)&&z.previewImageFile(u)}},f=i=>{if(!i)return;const e=w.value.filter(n=>n.fileName!==i.fileName);te.value.push(`${i.filePath}/${i.fileName}`),e&&(w.value=e),P.value=!0},s=async(i,e)=>{await z.uploadDocument({path:i,file:e,fileName:e.name},!0)},c=async i=>{H(!0);try{const e=[];if(x.value.every(u=>u.fileData.length===0)&&w.value.length===0){Q("Please upload at least 1 file.");return}w.value.length>0&&w.value.forEach(u=>{e.push({formFieldId:ae.value,filePath:u.filePath,fileName:u.fileName,payload:{fileType:"Federal"},description:"",documentCategory:null}),s(u.filePath,u.fileObject)}),x.value.length>0&&x.value.forEach(u=>{u.fileData.length>0&&u.fileData.forEach(_=>{e.push({formFieldId:ae.value,filePath:_.filePath,fileName:_.fileName,payload:{fileType:"State",fileStateId:u.stateId},description:"",documentCategory:null}),s(_.filePath,_.fileObject)})}),O.value={fieldModels:[{formFieldId:ve.value,fieldKey:"isDone",fieldValue:!1},{formFieldId:ae.value,fieldKey:"formFiles",fieldValue:"form files"},{formFieldId:de.value,fieldKey:"note",fieldValue:J.value}],uploadFileStateForms:[...e],formId:he},te.value.forEach(u=>{z.deleteFile(u),te.value=[]}),await W(Number(N.value),O.value),x.value.forEach(u=>{u.fileData.length>0&&w.value.length>0?L(ce.value.progressSidebarId,!0,Number(N.value)):L(ce.value.progressSidebarId,!1,Number(N.value))}),E("Information updated."),P.value=!1,i&&$e.push({name:"onboardingFormI9"})}catch(e){console.error(e)}finally{H(!1)}};Qe(async()=>{H(!0);try{await le(Number(N.value)),await K([Ae.ARIZONA,Ae.COLORADO,Ae.OREGON]),await Ee(Number(N.value),O.value.formId),ce.value=B.value.find(e=>e.progressSidebarUrl.trim().toLocaleLowerCase()===Mt.onboardingFormw4.trim().toLocaleLowerCase()),ve.value=U.value.fieldModels.find(e=>e.fieldKey==="isDone").formFieldId,ae.value=U.value.fieldModels.find(e=>e.fieldKey==="formFiles").formFieldId,de.value=U.value.fieldModels.find(e=>e.fieldKey==="note").formFieldId,J.value=U.value.fieldModels.find(e=>e.fieldKey==="note").fieldValue||"";const i=[...U.value.uploadFileStateForms];for(const e of i)if(e.payload.fileType==="Federal")w.value.push({fileName:e.fileName,fileObject:null,filePath:e.filePath,fileUrl:null});else if(e.payload.fileType==="State"){const n=x.value.find(u=>u.stateId===e.payload.fileStateId);n?n.fileData.push({fileName:e.fileName,fileObject:null,filePath:e.filePath,fileUrl:null}):x.value.push({stateId:e.payload.fileStateId,fileData:[{fileName:e.fileName,fileObject:null,filePath:e.filePath,fileUrl:null}]})}}catch(i){console.error(i)}finally{H(!1)}});const m=()=>{re.value=!1,D.value=!0,$e.push(Ie.value)},C=()=>{re.value=!1};yt((i,e,n)=>P.value?(re.value=!0,Ie.value=i.fullPath,D.value?(n(),!0):(n(!1),!1)):(n(),!0));const S=async(i,e)=>{H(!0);try{await ye(i,e)}catch{Q(`${i} is missing`)}finally{H(!1)}};return(i,e)=>{const n=k("font-awesome-icon"),u=k("fs-button"),_=k("fs-link"),g=k("fs-col"),F=k("fs-row"),I=k("fs-input"),oe=k("fs-dropdown-item"),Fe=k("fs-dropdown"),qe=k("fs-card-header"),Je=k("fs-card-body"),Ye=k("fs-card"),It=k("VeeForm");return d(),r(j,null,[a("div",ja,[t(It,{ref_key:"formData",ref:ie,onSubmit:e[18]||(e[18]=Ut(l=>c(!1),["prevent"]))},{default:o(()=>[a("div",Aa,[v(V).mobile?y("",!0):(d(),r("div",Ma,"Form W-4 | Employee's Withholding Certificate")),v(V).mobile?(d(),r("div",Va,"Form W-4")):y("",!0),a("div",Ra,[t(u,{class:"d-flex align-items-center",type:"submit",variant:"outline-primary",disabled:!P.value,onClick:e[0]||(e[0]=l=>c(!1))},{default:o(()=>[t(n,{icon:["far","floppy-disk"]}),v(V).mobile?y("",!0):(d(),r("span",za,"Save"))]),_:1},8,["disabled"]),t(u,{type:"submit",variant:"primary",onClick:e[1]||(e[1]=l=>c(!0)),disabled:!P.value},{default:o(()=>[p("Save & next")]),_:1},8,["disabled"])])]),v(V).mobile?y("",!0):(d(),r("div",Ba,[Ka,Ga,a("div",null,[R.value.length>0?(d(),r("div",Qa,[(d(!0),r(j,null,X(R.value,(l,se)=>(d(),r("div",{key:se},[t(F,{class:"card state_card mx-0 mb-3"},{default:o(()=>[t(g,{class:"state_card_left",cols:"4"},{default:o(()=>[a("div",qa,[l.fileName?(d(),r("div",Ja,G(l.fileName),1)):(d(),r("div",Ya,"No Data Found."))]),a("div",Za,[l.fileWorkSheetName?(d(),Z(_,{key:0,onClick:b=>S(l.fileWorkSheetName,!0)},{default:o(()=>[p("Worksheet")]),_:2},1032,["onClick"])):y("",!0),l.fileInstructName?(d(),Z(_,{key:1,onClick:b=>S(l.fileInstructName,!1)},{default:o(()=>[p("Instruction")]),_:2},1032,["onClick"])):y("",!0),t(_,{onClick:b=>S(Pe(l.stateName),!1)},{default:o(()=>[p("Download")]),_:2},1032,["onClick"])])]),_:2},1024),t(g,{cols:"8",class:"state_card_right"},{default:o(()=>[ne(l.stateEnum).length>0?(d(),r("div",Xa,[a("div",null,[(d(!0),r(j,null,X(ne(l.stateEnum),b=>(d(),r("div",{class:"d-flex align-items-center gap-2 justify-content-between",key:b.fileName},[t(_,{class:"d-flex my-2 align-items-center text-black text-decoration-none",onClick:je=>me(b),style:{width:"240px"}},{default:o(()=>[t(n,{icon:["fal","paperclip"],class:"text-task-blue"}),a("span",el,[a("div",null,G(v(pe)(b.fileName)),1)]),p(" \xA0 ")]),_:2},1032,["onClick"]),a("div",{style:{display:"inline",cursor:"pointer"},onClick:je=>xe(l.stateEnum,b)},[t(n,{icon:v(we),class:"text-danger"},null,8,["icon"])],8,tl)]))),128))])])):(d(),r("div",al,[ll,t(u,{variant:"outline-green",onClick:b=>T(l.stateEnum)},{default:o(()=>[t(n,{icon:["fal","upload"],size:"lg",class:"me-2"}),p(" Upload")]),_:2},1032,["onClick"]),Xe(a("input",{type:"file","data-id":l.stateEnum+"-input",multiple:"",ref_for:!0,ref_key:"W4StateFileInput",ref:Se,onChange:b=>fe(b,l)},null,40,nl),[[et,!1]])]))]),_:2},1024)]),_:2},1024),ne(l.stateEnum).length>0?(d(),r("div",ol,[t(u,{variant:"outline-green",onClick:b=>T(l.stateEnum)},{default:o(()=>[t(n,{icon:["fal","upload"],size:"lg",class:"me-2"}),p(" Upload ")]),_:2},1032,["onClick"]),Xe(a("input",{type:"file","data-id":l.stateEnum+"-input",multiple:"",ref_for:!0,ref_key:"W4StateFileInput",ref:Se,onChange:b=>fe(b,l)},null,40,sl),[[et,!1]])])):y("",!0)]))),128))])):(d(),r("div",il,rl))]),cl,ul,t(F,{class:"card state_card mx-0 mb-3"},{default:o(()=>[t(g,{class:"state_card_left",cols:"4"},{default:o(()=>[fl,a("div",ml,[t(_,{onClick:e[2]||(e[2]=l=>S(v(Ce).FEDERAL_W4_INSTRUCTIONS,!1))},{default:o(()=>[p("Instruction")]),_:1}),t(_,{onClick:e[3]||(e[3]=l=>S(v(Ce).FEDERAL_W4_FORM,!1))},{default:o(()=>[p("Download")]),_:1})])]),_:1}),t(g,{class:"state_card_right align-items-center",cols:"8"},{default:o(()=>[w.value.length>0?(d(),r("div",pl,[(d(!0),r(j,null,X(w.value,l=>(d(),r("div",{key:l.fileName,class:"mb-2"},[a("div",_l,[t(_,{onClick:se=>me(l),class:"d-flex gap-2 align-items-center text-decoration-none text-black"},{default:o(()=>[t(n,{icon:["fal","paperclip"],class:"text-task-blue"}),a("span",vl,G(v(pe)(l.fileName)),1)]),_:2},1032,["onClick"]),a("div",{style:{display:"inline",cursor:"pointer"},onClick:se=>f(l)},[t(n,{icon:v(we),class:"text-danger"},null,8,["icon"])],8,hl)])]))),128))])):(d(),r("div",gl,[yl,t(u,{variant:"outline-green",onClick:e[4]||(e[4]=l=>T(null))},{default:o(()=>[t(n,{icon:["fal","upload"],size:"lg",class:"me-2"}),p(" Upload")]),_:1}),a("input",{type:"file",name:"files",multiple:"",id:"upload_file",onChange:e[5]||(e[5]=l=>Y(l)),ref_key:"W4FederalFileInput",ref:q,hidden:""},null,544)]))]),_:1})]),_:1}),w.value.length>0?(d(),r("div",bl,[t(u,{variant:"outline-green",onClick:e[6]||(e[6]=l=>T(null))},{default:o(()=>[t(n,{icon:["fal","upload"],size:"lg",class:"me-2"}),p(" Upload")]),_:1}),a("input",{type:"file",name:"files",multiple:"",id:"upload_file",onChange:e[7]||(e[7]=l=>Y(l)),ref_key:"W4FederalFileInput",ref:q,hidden:""},null,544)])):y("",!0),a("div",kl,[t(I,{type:"FsTextArea",label:"Note",name:"note",modelValue:J.value,"onUpdate:modelValue":e[8]||(e[8]=l=>J.value=l),rules:{required:!1},required:!1,onInput:e[9]||(e[9]=l=>P.value=!0)},null,8,["modelValue"])])])),v(V).mobile?(d(),r("div",xl,[R.value.length>0?(d(),r("div",Fl,[(d(!0),r(j,null,X(R.value,(l,se)=>(d(),r("div",{key:se},[t(Ye,{"no-body":"",class:"h-100 mb-4"},{default:o(()=>[t(qe,{class:"title font-weight-bold p-3 d-flex align-items-center justify-content-between"},{default:o(()=>[a("div",wl,[t(n,{icon:["fal","user"],class:"text-cornflower-blue-dark",size:"lg"}),p(" "+G(l.stateName),1)]),a("div",Cl,[R.value.length>0?(d(),Z(u,{key:0,variant:"link",class:"text-decoration-none",onClick:b=>T(l.stateEnum)},{default:o(()=>[p("Upload")]),_:2},1032,["onClick"])):y("",!0),a("input",{type:"file",name:"files",multiple:"",id:"upload_file",onChange:b=>fe(b,l),hidden:"","data-id":l.stateEnum+"-input"},null,40,Sl),t(Fe,{size:"lg",variant:"link","no-caret":""},{"button-content":o(()=>[t(n,{icon:["fas","circle-ellipsis"],size:"lg"})]),default:o(()=>[l.fileWorkSheetName?(d(),Z(oe,{key:0,class:"dropdown-item",onClick:b=>S(l.fileWorkSheetName,!0)},{default:o(()=>[t(n,{icon:["fal","file-spreadsheet"],class:"me-2"}),p(" Worksheet")]),_:2},1032,["onClick"])):y("",!0),l.fileInstructName?(d(),Z(oe,{key:1,onClick:b=>S(l.fileInstructName,!1)},{default:o(()=>[t(n,{icon:["fal","memo"],class:"me-2"}),p(" Instructions")]),_:2},1032,["onClick"])):y("",!0),t(oe,{onClick:b=>S(Pe(l.stateName),!1)},{default:o(()=>[t(n,{icon:["fal","download"],class:"me-2"}),p(" Download")]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024),t(Je,{class:"p-0"},{default:o(()=>[ne(l.stateEnum).length>0?(d(),r("div",Il,[(d(!0),r(j,null,X(ne(l.stateEnum),b=>(d(),r("div",{key:b.fileName,class:"mb-2"},[a("div",$l,[t(_,{onClick:je=>me(b),class:"d-flex gap-2 align-items-center text-decoration-none text-black"},{default:o(()=>[a("span",Nl,G(v(pe)(b.fileName)),1)]),_:2},1032,["onClick"]),a("div",{style:{display:"inline",cursor:"pointer"},onClick:je=>xe(l.stateEnum,b)},[t(n,{icon:v(we),class:"text-danger"},null,8,["icon"])],8,El)])]))),128))])):(d(),r("div",Dl,[Wl,t(u,{variant:"outline-green",onClick:b=>T(l.stateEnum)},{default:o(()=>[t(n,{icon:["fal","upload"],size:"lg",class:"me-2"}),p(" Upload")]),_:2},1032,["onClick"]),a("input",{type:"file",name:"files",multiple:"",id:"upload_file",onChange:b=>fe(b,l),hidden:"","data-id":l.stateEnum+"-input"},null,40,Tl)]))]),_:2},1024)]),_:2},1024)]))),128))])):y("",!0),t(Ye,{"no-body":"",class:"h-100 mb-4"},{default:o(()=>[t(qe,{class:"title font-weight-bold p-3 d-flex align-items-center justify-content-between"},{default:o(()=>[a("div",Pl,[t(n,{icon:["fal","landmark"],class:"text-task-violet",size:"lg"}),p(" Federal W-4 ")]),a("div",Ol,[R.value.length>0?(d(),Z(u,{key:0,variant:"link",class:"text-decoration-none",onClick:e[10]||(e[10]=l=>T(null))},{default:o(()=>[p("Upload")]),_:1})):y("",!0),a("input",{type:"file",name:"files",multiple:"",id:"upload_file",ref_key:"W4FederalFileInput",ref:q,onChange:e[11]||(e[11]=l=>Y(l)),hidden:""},null,544),t(Fe,{size:"lg",variant:"link","no-caret":""},{"button-content":o(()=>[t(n,{icon:["fas","circle-ellipsis"],size:"lg"})]),default:o(()=>[t(oe,{onClick:e[12]||(e[12]=l=>S(v(Ce).FEDERAL_W4_INSTRUCTIONS,!1))},{default:o(()=>[t(n,{icon:["fal","memo"],class:"me-2"}),p(" Instructions")]),_:1}),t(oe,{onClick:e[13]||(e[13]=l=>S(v(Ce).FEDERAL_W4_FORM,!1))},{default:o(()=>[t(n,{icon:["fal","download"],class:"me-2"}),p(" Download")]),_:1})]),_:1})])]),_:1}),t(Je,{class:"p-0"},{default:o(()=>[w.value.length>0?(d(),r("div",Ul,[(d(!0),r(j,null,X(w.value,l=>(d(),r("div",{key:l.fileName,class:"mb-2"},[a("div",Hl,[t(_,{onClick:se=>me(l),class:"d-flex gap-2 align-items-center text-decoration-none text-black"},{default:o(()=>[a("span",Ll,G(v(pe)(l.fileName)),1)]),_:2},1032,["onClick"]),a("div",{style:{display:"inline",cursor:"pointer"},onClick:se=>f(l)},[t(n,{icon:v(we),class:"text-danger"},null,8,["icon"])],8,jl)])]))),128))])):(d(),r("div",Al,[Ml,t(u,{variant:"outline-green",onClick:e[14]||(e[14]=l=>T(null))},{default:o(()=>[t(n,{icon:["fal","upload"],size:"lg",class:"me-2"}),p(" Upload")]),_:1}),a("input",{type:"file",name:"files",multiple:"",id:"upload_file",ref_key:"W4FederalFileInput",ref:q,onChange:e[15]||(e[15]=l=>Y(l)),hidden:""},null,544)]))]),_:1})]),_:1}),a("div",Vl,[t(I,{type:"FsTextArea",label:"Note",name:"note",modelValue:J.value,"onUpdate:modelValue":e[16]||(e[16]=l=>J.value=l),rules:{required:!1},required:!1,onInput:e[17]||(e[17]=l=>P.value=!0)},null,8,["modelValue"])])])):y("",!0)]),_:1},512)]),t(Ct,{ref:"leaveDialog",showModal:re.value,title:"Unsaved changes",okText:"YES, LEAVE",okTextVariant:"danger",cancelText:"STAY",cancelBtnVariant:"light",onClose:C,onOk:m},{content:o(()=>[a("span",Rl,[t(n,{class:bt(["me-2","text-danger"]),icon:["fa-solid","fa-circle-exclamation"],size:"lg"}),zl])]),_:1},8,["showModal"])],64)}}});const Kl=Ft(Bl,[["__scopeId","data-v-7d58ab07"]]),Gl={key:0},Ql={key:1},sn=Be({__name:"onboardingTaxWithHoldingInfo",setup(M){const V=Ke(),{fetchEmployeeDetails:$}=tt(),{employeeDetails:H}=ee(tt()),{setLoading:N}=Ge(),ie=_e(()=>V.params.id);return Qe(async()=>{N(!0),await $(ie.value),N(!1)}),(Q,E)=>(d(),r(j,null,[Number(v(H).employeeStatusId)===v(at).QuickHire?(d(),r("div",Gl,[t(Kl)])):y("",!0),Number(v(H).employeeStatusId)===v(at).Onboard?(d(),r("div",Ql,[t(La)])):y("",!0)],64))}});export{sn as default};
