import{d as H,r as p,o as s,c as o,a as e,D as P,g as t,l as Z,ci as ee,ch as te,j as f,a1 as M,I as x,H as oe,ai as ie,cj as ce,a2 as I,w as l,F as ae,a4 as de,ax as J,ay as K,_ as Q,dN as ue,b as X,f as j,B as re,u as V,A as U,Q as ve,e as fe,aP as _e,dc as pe,aW as me,ak as be,z as he,Y as ge}from"./index.611fe570.js";import{c as ye}from"./commonModal.7c7715d3.js";import{B as xe}from"./bryntumSearchBar.3bdd630f.js";import{u as we}from"./EmployeePendingApprovalStore.dd669e09.js";import{d as ke}from"./debounce.cf77a06e.js";import"./foundationCompanyCasConnectionStore.b3301598.js";import"./isObject.c4ad145e.js";const $e={class:"p-1"},Ce={class:"d-block py-2"},Ve={class:"d-flex align-items-center"},Se={class:"bg-light px-2 py-1 rounded text-secondary"},Ie={class:"p-2"},Pe={class:"bg-primary bg-opacity-25 px-2 py-1 text-primary--dk rounded"},B=H({__name:"reviewField",props:{title:{type:String,required:!0},initialValue:{type:String,required:!0},finalValue:{type:String,required:!0}},setup(n){return($,b)=>{const h=p("font-awesome-icon");return s(),o("div",$e,[e("strong",Ce,P(n.title),1),e("div",Ve,[e("span",Se,P(n.initialValue),1),e("span",Ie,[t(h,{icon:["fa","arrow-right"],size:"sm"})]),e("span",Pe,P(n.finalValue),1)])])}}}),se=n=>(J("data-v-e2d087e0"),n=n(),K(),n),De={class:"d-flex align-items-center justify-content-between border-bottom p-3"},Re={class:"mx-1"},Be=se(()=>e("strong",null," Date Changed: ",-1)),Ae={class:"d-flex flex-grow-1 flex-row"},Ne={class:"flex-grow-1 p-3"},qe={key:0,class:"border-start p-3"},Te=se(()=>e("strong",{class:"d-block pb-2"},[x(" Rejection Comment "),e("span",{class:"text-danger"},"*")],-1)),je=["disabled"],Ee={class:"border-top"},Le={class:"d-flex justify-content-between p-3"},Ue={class:"d-flex justify-content-end align-items-center"},We={key:0,class:"d-flex"},Me={key:1,class:"d-flex"},Oe={key:2,class:"d-flex fw-bold align-items-center me-2"},ze={class:"m-1 circle-text bg-cyan text-white"},Ge={key:3,class:"d-flex fw-bold align-items-center me-2"},He={class:"m-1 circle-text bg-red text-white"},Fe={class:"d-flex ps-2 ms-2 border-start"},Ye=H({__name:"reviewPanelContent",props:{modelValue:{type:Boolean||null},title:{type:String,required:!0},dateChanged:{type:String,required:!1},submitDisabled:{type:Boolean,required:!0},cancelDisabled:{type:Boolean,required:!0}},emits:["update:modelValue","cancel","submit"],setup(n,{emit:$}){const b=n;Z.add(ee,te);const h=f(""),g=f(null),y=f(!1),E=()=>{y.value=!0,de(()=>{g.value&&g.value.focus()})},d=u=>{h.value.trim()&&u.key==="Enter"&&$("update:modelValue",!1)};return M(()=>b.modelValue,u=>{u||(y.value=!1)}),(u,c)=>{const r=p("fs-button"),w=p("font-awesome-icon");return s(),o(ae,null,[e("div",De,[e("strong",Re,P(n.title),1),e("span",null,[Be,x(" "+P(n.dateChanged??"N/A"),1)])]),e("div",Ae,[e("div",Ne,[oe(u.$slots,"default",{},void 0,!0)]),y.value||n.modelValue===!1?(s(),o("div",qe,[Te,ie(e("textarea",{ref_key:"textAreaRef",ref:g,maxlength:"500",disabled:n.modelValue===!1,"onUpdate:modelValue":c[0]||(c[0]=_=>h.value=_),class:"form-control",rows:"12",cols:"28",onKeyup:d},null,40,je),[[ce,h.value]])])):I("",!0)]),e("div",Ee,[e("div",Le,[t(r,{variant:"outline-secondary",disabled:n.cancelDisabled,onClick:c[1]||(c[1]=_=>u.$emit("cancel"))},{default:l(()=>[x(" CANCEL ")]),_:1},8,["disabled"]),e("div",Ue,[y.value?(s(),o("div",We,[t(r,{variant:"outline-secondary",onClick:c[2]||(c[2]=_=>y.value=!1)},{default:l(()=>[x(" Reset ")]),_:1}),t(r,{variant:"outline-danger",disabled:!h.value,onClick:c[3]||(c[3]=_=>u.$emit("update:modelValue",!1))},{default:l(()=>[x(" Save Comment ")]),_:1},8,["disabled"])])):n.modelValue===null?(s(),o("div",Me,[t(r,{variant:"outline-danger",onClick:E},{default:l(()=>[x(" REJECT ")]),_:1}),t(r,{variant:"outline-cyan",onClick:c[4]||(c[4]=_=>u.$emit("update:modelValue",!0))},{default:l(()=>[x(" APPROVE ")]),_:1})])):n.modelValue?(s(),o("div",Oe,[e("span",ze,[t(w,{icon:["fas","check"]})]),x(" Approved ")])):n.modelValue===!1?(s(),o("div",Ge,[e("span",He,[t(w,{icon:["fas","times"]})]),x(" Rejected ")])):I("",!0),e("div",Fe,[t(r,{variant:"primary",disabled:n.submitDisabled,onClick:c[5]||(c[5]=_=>u.$emit("submit"))},{default:l(()=>[x(" SUBMIT ")]),_:1},8,["disabled"])])])])])],64)}}});const W=Q(Ye,[["__scopeId","data-v-e2d087e0"]]),C=n=>(J("data-v-2bc57543"),n=n(),K(),n),Je={class:"d-flex justify-content-between p-1"},Ke={class:"d-flex"},Qe={class:"employee-avatar rounded-circle bg-grey--000 d-flex align-items-center justify-content-center me-3"},Xe={class:"text-grey--500"},Ze={class:"d-flex flex-column justify-content-center"},et={class:"fw-bold"},tt={key:0},at={class:"d-flex align-items-center"},st=C(()=>e("div",{class:"border-bottom p-3"},[e("strong",{class:"mx-1"}," Category ")],-1)),lt={class:"tab-container"},nt={key:1,class:"circle-text bg-cyan text-white"},ot={key:2,class:"circle-text bg-red text-white"},it=C(()=>e("span",{class:"flex-grow-1 text-black text-start"}," Personal Information ",-1)),ct={class:"fill-space"},dt=C(()=>e("h3",{class:"hq-pg__section-head mt-3"},[e("strong",null," General ")],-1)),ut=C(()=>e("h3",{class:"hq-pg__section-head mt-3"},[e("strong",null," Drivers License ")],-1)),rt={class:"tab-container"},vt={key:1,class:"circle-text bg-cyan text-white"},ft={key:2,class:"circle-text bg-red text-white"},_t=C(()=>e("span",{class:"flex-grow-1 text-black text-start"}," Direct Deposit ",-1)),pt={class:"fill-space"},mt=C(()=>e("h3",{class:"hq-pg__section-head mt-3"},[e("strong",null," General ")],-1)),bt={class:"tab-container"},ht={key:1,class:"circle-text bg-cyan text-white"},gt={key:2,class:"circle-text bg-red text-white"},yt=C(()=>e("span",{class:"flex-grow-1 text-black text-start"}," Benefits ",-1)),xt={class:"fill-space"},wt=C(()=>e("h3",{class:"hq-pg__section-head mt-3"},[e("strong",null," General ")],-1)),kt={class:"tab-container"},$t={key:1,class:"circle-text bg-cyan text-white"},Ct={key:2,class:"circle-text bg-red text-white"},Vt=C(()=>e("span",{class:"flex-grow-1 text-black text-start"}," Tax Withholding ",-1)),St={class:"fill-space"},It=C(()=>e("h3",{class:"hq-pg__section-head mt-3"},[e("strong",null," General ")],-1)),Pt={class:"tab-container"},Dt={key:1,class:"circle-text bg-cyan text-white"},Rt={key:2,class:"circle-text bg-red text-white"},Bt=C(()=>e("span",{class:"flex-grow-1 text-black text-start"}," W-2 ",-1)),At={class:"fill-space"},Nt=C(()=>e("h3",{class:"hq-pg__section-head mt-3"},[e("strong",null," General ")],-1)),qt=H({__name:"reviewPanel",props:{activeId:{type:Number,required:!0},locked:{type:Boolean,required:!0},triggerReset:{type:Boolean,required:!0},approval:{type:Object,required:!0}},emits:["prompt","update:activeId","update:triggerReset","cancel","submit","change"],setup(n,{emit:$}){const b=n;Z.add(ue,ee,te);const h=f(!1),g=f(!1),y=f(0),E=["Personal Information","Direct Deposit","Benefits","Tax Withholding","W-2"],d=f(null),u=f(null),c=f(null),r=f(null),w=f(null),_=f(null),A=X(()=>!(u.value!==null&&c.value!==null&&r.value!==null&&w.value!==null&&_.value!==null)),T=i=>{if(!d.value)if(b.locked){$("prompt",()=>{d.value=!d.value,$("update:activeId",i.id)});return}else $("update:activeId",i.id);d.value=!d.value,!(!d.value||h.value)&&(h.value=!0,console.log(`getting Approval with Id: ${i.id}...`),g.value=!0,window.setTimeout(()=>{g.value=!1},1200))},k=i=>y.value===E.indexOf(i),S=X(()=>!(u.value===null&&c.value===null&&r.value===null&&w.value===null&&_.value===null)),N=()=>{$("submit",b.approval)},O=()=>{u.value=null,c.value=null,r.value=null,w.value=null,_.value=null},D=()=>{$("cancel",()=>{O()})};return M(S,i=>{$("change",{hasPendingChange:i,approval:b.approval})}),M(()=>b.triggerReset,()=>{b.triggerReset&&!b.locked&&(d.value=!1,console.log(`Review for ${b.approval.fullName} has been reset`),O(),$("update:triggerReset",!1))}),M(()=>b.activeId,i=>{b.approval.id!==i&&(d.value=!1)}),(i,a)=>{const z=p("fs-button"),G=p("fs-card-header"),F=p("fs-overlay"),m=p("font-awesome-icon"),q=p("fs-tab"),Y=p("fs-tabs"),R=p("fs-card-body"),L=p("fs-collapse"),ne=p("fs-card");return s(),j(ne,{"no-body":"",class:"shadow my-3 overflow-hidden"},{default:l(()=>[t(G,{class:"bg-white","header-tag":"header",role:"tab",style:re({zIndex:g.value?"11":"1"})},{default:l(()=>[e("div",Je,[e("div",Ke,[e("div",Qe,[e("span",Xe,P(n.approval.avatar),1)]),e("div",Ze,[e("div",et,[x(P(n.approval.fullName)+" ",1),V(S)?(s(),o("span",tt,"*")):I("",!0)]),e("div",null,P(n.approval.jobTitle),1)])]),e("div",at,[d.value?(s(),j(z,{key:0,variant:"outline-secondary",class:"btn-review",onClick:a[0]||(a[0]=v=>T(n.approval))},{default:l(()=>[x(" Close ")]),_:1})):(s(),j(z,{key:1,variant:"outline-primary",class:"btn-review",onClick:a[1]||(a[1]=v=>T(n.approval))},{default:l(()=>[x(" Review ")]),_:1}))])])]),_:1},8,["style"]),t(F,{"spinner-variant":"primary",show:g.value,class:"fsi-pg__overlay","no-wrap":"",opacity:"1"},null,8,["show"]),t(L,{modelValue:d.value,"onUpdate:modelValue":a[13]||(a[13]=v=>d.value=v),role:"tabpanel"},{default:l(()=>[t(R,null,{default:l(()=>[t(Y,{modelValue:y.value,"onUpdate:modelValue":a[12]||(a[12]=v=>y.value=v),"active-tab-class":"d-flex flex-column justify-content-between border-start h-100",pills:"",vertical:""},{"tabs-start":l(()=>[st]),default:l(()=>[t(q,{active:""},{title:l(()=>[e("div",lt,[u.value===null?(s(),o("span",{key:0,class:U(["circle-text","border",k("Personal Information")?"text-cyan border-cyan bg-white":"text-secondary"])}," 1 ",2)):u.value?(s(),o("span",nt,[t(m,{icon:["fas","check"]})])):(s(),o("span",ot,[t(m,{icon:["fas","times"]})])),it,e("div",ct,[u.value!==null&&k("Personal Information")?(s(),o("span",{key:0,onClick:a[2]||(a[2]=v=>u.value=null),class:"text-secondary"},[t(m,{icon:["fas","rotate-left"],size:"sm"})])):I("",!0)])])]),default:l(()=>[t(W,{modelValue:u.value,"onUpdate:modelValue":a[3]||(a[3]=v=>u.value=v),title:"Personal Information","submit-disabled":V(A),"cancel-disabled":!V(S),onSubmit:N,onCancel:D},{default:l(()=>[dt,t(B,{title:"Phone Number","initial-value":"(561) 389-9678","final-value":"(561) 389-9678"}),t(B,{title:"Address","initial-value":"1234 Main Street NW, Strongsville, OH 44136","final-value":"7856 Lynn Toad, Brunswick, OH 44135"}),ut,t(B,{title:"Expiration Date","initial-value":"04/28/2023","final-value":"04/28/2027"})]),_:1},8,["modelValue","submit-disabled","cancel-disabled"])]),_:1}),t(q,null,{title:l(()=>[e("div",rt,[c.value===null?(s(),o("span",{key:0,class:U(["circle-text","border",k("Direct Deposit")?"text-cyan border-cyan bg-white":"text-secondary"])}," 2 ",2)):c.value?(s(),o("span",vt,[t(m,{icon:["fas","check"]})])):(s(),o("span",ft,[t(m,{icon:["fas","times"]})])),_t,e("div",pt,[c.value!==null&&k("Direct Deposit")?(s(),o("span",{key:0,onClick:a[4]||(a[4]=v=>c.value=null),class:"text-secondary"},[t(m,{icon:["fas","rotate-left"],size:"sm"})])):I("",!0)])])]),default:l(()=>[t(W,{modelValue:c.value,"onUpdate:modelValue":a[5]||(a[5]=v=>c.value=v),title:"Direct Deposit","submit-disabled":V(A),"cancel-disabled":!V(S),onSubmit:N,onCancel:D},{default:l(()=>[mt,t(B,{title:"Account Number","initial-value":"8066-3899-8790-5430","final-value":"7006-6789-8090-1952"}),t(B,{title:"Routing Number","initial-value":"8066-3899-8790-5430","final-value":"7006-6789-8090-1952"})]),_:1},8,["modelValue","submit-disabled","cancel-disabled"])]),_:1}),t(q,null,{title:l(()=>[e("div",bt,[r.value===null?(s(),o("span",{key:0,class:U(["circle-text","border",k("Benefits")?"text-cyan border-cyan bg-white":"text-secondary"])}," 3 ",2)):r.value?(s(),o("span",ht,[t(m,{icon:["fas","check"]})])):(s(),o("span",gt,[t(m,{icon:["fas","times"]})])),yt,e("div",xt,[r.value!==null&&k("Benefits")?(s(),o("span",{key:0,onClick:a[6]||(a[6]=v=>r.value=null),class:"text-secondary"},[t(m,{icon:["fas","rotate-left"],size:"sm"})])):I("",!0)])])]),default:l(()=>[t(W,{modelValue:r.value,"onUpdate:modelValue":a[7]||(a[7]=v=>r.value=v),title:"Benefits","submit-disabled":V(A),"cancel-disabled":!V(S),onSubmit:N,onCancel:D},{default:l(()=>[wt,t(B,{title:"High Deductible Health Plan","initial-value":"Not Active","final-value":"Active"})]),_:1},8,["modelValue","submit-disabled","cancel-disabled"])]),_:1}),t(q,null,{title:l(()=>[e("div",kt,[w.value===null?(s(),o("span",{key:0,class:U(["circle-text","border",k("Tax Withholding")?"text-cyan border-cyan bg-white":"text-secondary"])}," 4 ",2)):w.value?(s(),o("span",$t,[t(m,{icon:["fas","check"]})])):(s(),o("span",Ct,[t(m,{icon:["fas","times"]})])),Vt,e("div",St,[w.value!==null&&k("Tax Withholding")?(s(),o("span",{key:0,onClick:a[8]||(a[8]=v=>w.value=null),class:"text-secondary"},[t(m,{icon:["fas","rotate-left"],size:"sm"})])):I("",!0)])])]),default:l(()=>[t(W,{modelValue:w.value,"onUpdate:modelValue":a[9]||(a[9]=v=>w.value=v),title:"Tax Withholding","submit-disabled":V(A),"cancel-disabled":!V(S),onSubmit:N,onCancel:D},{default:l(()=>[It,t(B,{title:"Maritial Status","initial-value":"Single","final-value":"Married"})]),_:1},8,["modelValue","submit-disabled","cancel-disabled"])]),_:1}),t(q,null,{title:l(()=>[e("div",Pt,[_.value===null?(s(),o("span",{key:0,class:U(["circle-text","border",k("W-2")?"text-cyan border-cyan bg-white":"text-secondary"])}," 5 ",2)):_.value?(s(),o("span",Dt,[t(m,{icon:["fas","check"]})])):(s(),o("span",Rt,[t(m,{icon:["fas","times"]})])),Bt,e("div",At,[_.value!==null&&k("W-2")?(s(),o("span",{key:0,onClick:a[10]||(a[10]=v=>_.value=null),class:"text-secondary"},[t(m,{icon:["fas","rotate-left"],size:"sm"})])):I("",!0)])])]),default:l(()=>[t(W,{modelValue:_.value,"onUpdate:modelValue":a[11]||(a[11]=v=>_.value=v),title:"W-2","submit-disabled":V(A),"cancel-disabled":!V(S),onSubmit:N,onCancel:D},{default:l(()=>[Nt,t(B,{title:"Max Withholding","initial-value":"On","final-value":"Off"})]),_:1},8,["modelValue","submit-disabled","cancel-disabled"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}}});const Tt=Q(qt,[["__scopeId","data-v-2bc57543"]]),le=n=>(J("data-v-90e6fb57"),n=n(),K(),n),jt={class:"hq-pg bg-grey--000"},Et={key:0,class:"d-flex justify-content-center m-5"},Lt=le(()=>e("h4",null,"No records to display",-1)),Ut=[Lt],Wt={style:{"font-style":"italic"}},Mt=le(()=>e("p",null," Are you sure you want to continue? ",-1)),Ot=H({__name:"reviews",setup(n){const{notifySuccess:$}=ve(),b=we(),h=f(b.pendingApprovalList),g=f(""),y=f(!1),E=ke(()=>{y.value=!0,h.value=b.searchEmployeeInApprovalList(g.value),y.value=!1},500);M(g,E);const d=f(null),u=f(0),c=f(!1),r=f(!1),w=i=>d.value?i!==d.value.id:!1,_=i=>{i.hasPendingChange?d.value=i.approval:d.value=null},A=i=>{d.value=null,h.value=h.value.filter(a=>a.id!==i.id),window.setTimeout(()=>{$(`Review for ${i.fullName} submitted`)},1e3)};let T=()=>{};const k=i=>{r.value=!0,T=()=>{c.value=!0,i()}},S=i=>{r.value=!0,T=i},N=()=>{r.value=!1},O=()=>{T(),r.value=!1},D=i=>{d.value?i.returnValue="Changes you made may not be saved.":delete i.returnValue};return fe(async()=>{y.value=!0;const i=await b.fetchPendingApprovalList();h.value=i.map(a=>(a.avatar=_e(a.fullName),a)),y.value=!1,window.addEventListener("beforeunload",D)}),pe(()=>{window.removeEventListener("beforeunload",D)}),me(i=>{if(d.value)return k(()=>{ge.push(i)}),!1}),(i,a)=>{const z=p("fs-form-input"),G=p("font-awesome-icon"),F=p("fs-button"),m=p("fs-form-group"),q=p("fs-overlay"),Y=p("fs-container");return s(),o("div",jt,[t(xe,{sticky:!0,class:"hq-pg__header--sticky",title:"Review Employee Changes",showBackButton:!0,returnRoute:{name:"employees"}},{buttons:l(()=>[t(m,{class:"fs-input__form-group fs-input__form-group--search"},{default:l(()=>[t(z,{type:"text",class:"fs-input__input mb-0",modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=R=>g.value=R),placeholder:"Search employees..."},null,8,["modelValue"]),t(F,{variant:"link",class:"px-3 fs-input__button fs-input__button--right",disabled:g.value==="",onClick:a[1]||(a[1]=R=>g.value="")},{default:l(()=>[t(be,{name:"iconSwitch","enter-active-class":"animate__animated animate__fadeInDown animate__faster","leave-active-class":"animate__animated animate__fadeOutDown animate__faster"},{default:l(()=>[g.value===""?(s(),j(G,{key:"search",icon:["fal","search"],class:"fs-input__button-icon fs-input__button-icon--right"})):(s(),j(G,{key:"times",icon:["fal","times"],class:"fs-input__button-icon fs-input__button-icon--right"}))]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1}),t(Y,{class:"contain",fluid:""},{default:l(()=>[t(q,{"spinner-variant":"primary",show:y.value,class:"fsi-pg__overlay","no-wrap":""},null,8,["show"]),(s(!0),o(ae,null,he(h.value,R=>(s(),j(Tt,{key:R.id,approval:R,locked:w(R.id),"active-id":u.value,"onUpdate:active-id":a[2]||(a[2]=L=>u.value=L),"trigger-reset":c.value,"onUpdate:trigger-reset":a[3]||(a[3]=L=>c.value=L),onSubmit:A,onCancel:S,onChange:_,onPrompt:k},null,8,["approval","locked","active-id","trigger-reset"]))),128)),h.value.length===0&&y.value===!1?(s(),o("div",Et,Ut)):I("",!0)]),_:1}),t(ye,{showModal:r.value,title:"Cancel Review","ok-text":"CONFIRM","cancel-text":"CANCEL","ok-text-variant":"primary",onEmitParent:O,onEmitCloseParent:N},{content:l(()=>[e("p",null,[x(" You are about to lose your pending review for "),e("span",Wt,P(d.value?.fullName),1),x(". ")]),Mt]),_:1},8,["showModal"])])}}});const Qt=Q(Ot,[["__scopeId","data-v-90e6fb57"]]);export{Qt as default};
