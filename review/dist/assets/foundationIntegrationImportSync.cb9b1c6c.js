import{d as K,l as Q,dU as W,b as w,j as g,y as Y,Q as H,e as R,r as i,o as _,c as A,g as e,w as t,a as c,D as n,u as a,I as r,f as b,a2 as G,F as J,z as O,C as X,dT as Z,b2 as ee}from"./index.611fe570.js";import{a as te,I as oe}from"./IntegrationFunction.c3156a3a.js";import{u as ne}from"./foundationIntegrationFactory.460aee6e.js";import{c as ae}from"./commonModal.7c7715d3.js";const se={class:"hq-pg"},le={class:"hq-pg__title"},ie={class:"fw-bold"},re={class:"message-content"},ce=c("br",null,null,-1),ue=c("br",null,null,-1),fe=c("b",null," Warning:",-1),ye=K({__name:"foundationIntegrationImportSync",props:{importType:{default:null},isSync:{type:Boolean,default:!1}},setup(M){const u=M;Q.add(W);const l=w(()=>u.isSync?"Sync":"Import"),f=w(()=>Z(F.value)),F=w(()=>te.displayName(u.importType)),T=w(()=>d.value.filter(o=>o.isSelected)),y=ne(+u.importType)(),v=g(!1),I=g(!1),d=g(null),x=g(!1),h=g(!1),N=Y(),S=H();async function B(){if(T.value.length===0){S.notifyError(`You must select at least one record to ${l.value.toLowerCase()}.`);return}u.isSync?I.value=!0:L()}async function L(){let o;h.value=!0;try{const s=ee.cloneDeep(T.value);u.isSync?o=await y.syncData(s):o=await y.importData(s)}finally{h.value=!1}o?(u.importType==oe.Employee?S.notifySuccess(`${f.value} ${l.value.toLowerCase()} process triggered successfully. It will take some time to complete the process.`):S.notifySuccess(`${f.value} ${l.value.toLowerCase()}ed successfully.`),N.push({name:"settingsFoundation"})):S.notifyError(`An error occurred attempting to ${l.value.toLowerCase()} ${f.value}.`)}function q(){v.value=!v.value,d.value=d.value?.map(o=>({...o,isSelected:v.value}))}function $(){N.push({name:"settingsFoundation"})}function U(o,s,C){return o?.map(m=>({...m,key:m[s],name:m[C],isSelected:!1}))}return R(async()=>{x.value=!0;try{const o=await y.getData(u.isSync);d.value=U(o,y.propKey.id,y.propKey.name)}finally{x.value=!1}}),(o,s)=>{const C=i("fs-col"),m=i("fs-button"),D=i("fs-spinner"),j=i("fs-row"),V=i("fs-container"),E=i("fs-form-checkbox"),k=i("fs-list-group-item"),z=i("fs-list-group");return _(),A("div",se,[e(V,{fluid:"",class:"hq-pg__header hq-pg__header--sticky contain"},{default:t(()=>[e(j,{"align-v":"center"},{default:t(()=>[e(C,{cols:"auto"},{default:t(()=>[c("h2",le,n(a(l))+" "+n(a(f)),1)]),_:1}),e(C,{cols:"auto",class:"ms-auto"},{default:t(()=>[e(m,{variant:"outline-secondary",onClick:$},{default:t(()=>[r("Cancel")]),_:1}),e(m,{variant:"primary",disabled:h.value,onClick:B},{default:t(()=>[h.value?(_(),b(D,{key:0,small:"",class:"me-2 outline-secondary"})):G("",!0),r(" "+n(a(l))+" "+n(a(f)),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),e(V,{fluid:"",class:"contain py-4"},{default:t(()=>[c("span",ie,"Select Foundation "+n(a(f))+" to "+n(a(l)),1)]),_:1}),e(z,{flush:"",class:"border-top border-bottom"},{default:t(()=>[e(k,{class:"d-flex align-items-center"},{default:t(()=>[e(E,{onClick:q,value:v.value},null,8,["value"]),c("strong",null,n(a(F))+" Name",1)]),_:1}),x.value?(_(),b(k,{key:0,class:"list-group-item d-flex align-items-center justify-content-center"},{default:t(()=>[e(D,{small:"",class:"me-2 text-primary"}),r(" Loading ")]),_:1})):d.value?.length>0?(_(!0),A(J,{key:1},O(d.value,p=>(_(),b(k,{class:"d-flex align-items-center",key:p.key},{default:t(()=>[e(E,{modelValue:p.isSelected,"onUpdate:modelValue":P=>p.isSelected=P},null,8,["modelValue","onUpdate:modelValue"]),r(" "+n(p.name),1)]),_:2},1024))),128)):(_(),b(k,{key:2,class:"list-group-item d-flex align-items-center justify-content-center"},{default:t(()=>[r(" No data to "+n(a(l).toLocaleLowerCase()),1)]),_:1}))]),_:1}),e(ae,{showModal:I.value,title:"Sync Confirmation",okText:"SYNC",cancelText:"CANCEL",okTextVariant:"primary",onEmitParent:s[0]||(s[0]=p=>L()),onEmitCloseParent:s[1]||(s[1]=p=>$())},{content:t(()=>[c("div",re,[r(" Are you sure you want to sync your "),c("b",null,n(a(f)),1),r(" from Foundation? "),ce,ue,e(a(X),{class:"text-warning",size:"lg",icon:["fal","triangle-exclamation"]}),fe,r(" Foundation values will overwrite existing WorkforceHQ values if they differ. ")])]),_:1},8,["showModal"])])}}});export{ye as default};
