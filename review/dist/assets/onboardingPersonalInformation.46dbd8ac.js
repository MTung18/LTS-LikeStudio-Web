import{db as de,y as ie,bU as L,s as z,Q as ne,j as r,aU as ue,cP as me,b as Q,h as ce,e as fe,dc as be,aW as ve,l as Se,a_ as ye,aA as _e,aF as he,by as xe,dd as Ne,_ as we,r as n,aM as pe,o as d,c as k,a as u,g as t,w as i,bm as H,I as B,F as W,z as X,A as b,ax as ge,ay as Pe,D as Z,f as v,a2 as A,ai as K}from"./index.611fe570.js";import{u as $}from"./onboardingEmployeeContactStore.4a6b6ed4.js";import{D as Ie}from"./darkThemeModal.c38e7d4c.js";Se.add(ye,_e,he,xe,Ne);const Fe={components:{DarkThemeModal:Ie},directives:{maska:de},setup(){const m=ie(),c=m.currentRoute.value.params.id,U=L(),{PersonalInformation:a,isSubmittedOnboardFormStatus:T}=z(U),{fetchEmployeeInformationById:M,fetchPersonalInfoFormStatus:S,fetchPersonalInfoSsn:N,updateEmployeeInformationById:y}=L(),{fetchPrefixList:w,fetchGenderList:O}=$(),{prefixOfEmployeeContact:p,genderListOfEmployeeContact:g}=z($()),{fetchMaritalStatusList:V}=L(),{maritalStatusListOfEmployeeInformation:E}=z(L()),{notifyError:P,notifySuccess:f}=ne(),e=r([]),s=r([]),R=r([]),D=r(null),h=r(null),C=r(!1),ae=ue([{formName:"General Info",formId:"generalInfo",inputList:[{inputName:"Prefix",id:"namePrefixId",colSize:1,rules:"max:20",required:!1,as:"select",disabled:!1,class:"select flex-1",options:e,colClass:"firstRow"},{inputName:"First Name",id:"firstNameOnboarding",colSize:2,rules:"max:20",required:!0,as:"input",disabled:!1,class:"control flex-2",error:"",colClass:"firstRow"},{inputName:"Middle Initial",id:"middleName",colSize:2,rules:"max:1",required:!1,as:"input",disabled:!1,class:"control flex-2",colClass:"firstRow"},{inputName:"Last Name",id:"lastNameOnboarding",colSize:2,rules:"max:20",required:!0,as:"input",disabled:!1,class:"control flex-2",colClass:"firstRow"},{inputName:"Suffix",id:"suffix",colSize:1,rules:"max:4",required:!1,as:"input",disabled:!1,class:"control flex-1",colClass:"firstRow"},{inputName:"SSN",id:"ssn",colSize:6,rules:"max:11",required:!1,as:"input",type:"password",disabled:!1,class:"control password",mask:"###-##-####",showPassword:!1},{inputName:"Gender",id:"genderId",colSize:6,rules:"",required:!0,as:"select",disabled:!1,class:"select",options:s},{inputName:"Marital Status",id:"martialStatus",colSize:6,rules:"",required:!1,as:"select",disabled:!1,class:"select",options:R},{inputName:"Date of Birth",id:"dateOfBirth",colSize:6,rules:"date|onOrAfterToday",required:!0,as:"",type:"date",disabled:!1,class:"control"}]},{formName:"Contact",formId:"contact",inputList:[{inputName:"Email Address",id:"email",colSize:6,rules:"email|max:100",required:!0,as:"input",disabled:!1,class:"control"},{inputName:"Phone Number",id:"mainPhone",subField:"number",colSize:6,rules:"phoneNumber|max:14",required:!1,as:"input",disabled:!1,class:"control",mask:"(###) ###-####"}]},{formName:"Address",formId:"address",inputList:[{inputName:"Address Line 1",id:"address",subField:"address1",colSize:12,rules:"max:30",required:!0,as:"input",disabled:!1,class:"control"},{inputName:"Address Line 2",id:"address",subField:"address2",colSize:12,rules:"max:30",required:!1,as:"input",disabled:!1,class:"control"},{inputName:"City",id:"address",subField:"city",colSize:4,rules:"max:30",required:!0,as:"input",disabled:!1,class:"control"},{inputName:"State",id:"address",subField:"state_Province",colSize:4,rules:"max:2",required:!0,as:"select",disabled:!1,class:"select",options:me},{inputName:"Zipcode",id:"address",subField:"zip_PostalCode",colSize:4,rules:"max:10",required:!0,as:"input",disabled:!1,class:"control",showPassword:!1}]},{formName:"Driver License",formId:"driverLicense",inputList:[{inputName:"License Number",id:"driversLicenseNumber",colSize:4,rules:"max:25",required:!1,as:"input",type:"password",disabled:!1,class:"control password",showPassword:!1},{inputName:"License State",id:"driversLicenseState",colSize:4,rules:"max:2",required:!1,as:"input",disabled:!1,class:"control"},{inputName:"Expiration Date",id:"driversLicenseExpirationDate",colSize:4,rules:"",required:!1,as:"",type:"date",disabled:!1,class:"control"}]}]),o=r({firstNameOnboarding:null,middleName:null,lastNameOnboarding:null,namePrefixId:null,suffix:null,email:null,mainPhone:{number:null},socialSecurityNumber:null,ssn:null,dateOfBirth:null,address:{address1:null,address2:null,city:null,state_Province:null,zip_PostalCode:null},genderId:null,martialStatus:null,driversLicenseNumber:null,driversLicenseState:null,driversLicenseExpirationDate:null,isSubmitted:null,employeeStatusId:null}),_=r({firstNameOnboarding:null,middleName:null,lastNameOnboarding:null,namePrefixId:null,suffix:null,email:null,mainPhone:{number:null},socialSecurityNumber:null,ssn:null,dateOfBirth:null,address:{address1:null,address2:null,city:null,state_Province:null,zip_PostalCode:null},genderId:null,martialStatus:null,driversLicenseNumber:null,driversLicenseState:null,driversLicenseExpirationDate:null,isSubmitted:null,employeeStatusId:null}),j=r(null),I=r(!1),q=r(!1),J=r(""),F=Q(()=>Object.keys(o.value).some(l=>{if(h.value)return l!="ssn"?JSON.stringify(o.value[l])!==JSON.stringify(_.value[l]):o.value.ssn.replaceAll("-","")!==_.value.ssn;if(D.value)return JSON.stringify(o.value[l])!==JSON.stringify(_.value[l])})),se=Q(()=>!(h.value&&!C.value)&&F.value);ce(async()=>{await w(),await O(),await V(),e.value=[...p.value],s.value=[...g.value],R.value=[...E.value]}),fe(async()=>{if(await M(Number(c)),await N(Number(c)),D.value=a.value.employeeStatusId==3,h.value=a.value.employeeStatusId==2,h.value&&(await S(Number(c)),T.value)){C.value=!0;const l={...a.value,email:a.value.email,dateOfBirth:a.value.dateOfBirth?.split("T")[0],expirationDate:a.value.driversLicenseExpirationDate?.split("T")[0],firstNameOnboarding:a.value.firstName,lastNameOnboarding:a.value.lastName};o.value={...l},_.value={...l}}window.addEventListener("beforeunload",G)}),be(()=>{window.removeEventListener("beforeunload",G)});async function le(l,Y=!1){const{valid:x}=await j.value.validate();if(x){const te={...o.value,dateOfBirth:o.value.dateOfBirth+"T00:00:00",driversLicenseExpirationDate:o.value.driversLicenseExpirationDate+"T00:00:00",firstName:o.value.firstNameOnboarding,lastName:o.value.lastNameOnboarding};await y({id:Number(c),formData:te}),_.value={...o.value},q.value=!0,f("Personal information updated.",1e3),Y&&m.push({name:"onboardingContacts"})}else P("Cannot submit due to invalid fields.",1e3)}function G(l){!F.value||(l.returnValue="")}const oe=()=>{I.value=!1,q.value=!0,m.push(J.value)},re=()=>{I.value=!1};return ve((l,Y,x)=>{if(q.value){x();return}return F.value?(I.value=!0,J.value=l.fullPath,x(!1),!1):(x(),!0)}),{formList:ae,formData:o,onSubmit:le,isChanged:F,formRef:j,openSaveChangeModal:I,handleStay:re,handleLeavePage:oe,formInitialData:_,isQuickHire:D,isOnboard:h,isEmployeeSubmitted:C,isActiveSaveBtn:se}}};const ee=m=>(ge("data-v-8fc8579f"),m=m(),Pe(),m),Le={class:"p-3"},ke={class:"header d-flex justify-content-between align-items-center"},Oe=ee(()=>u("div",{class:"hq-pg__title"},"Personal Information",-1)),Ve={class:"button-group"},Ee={class:"sub_title"},De=["for"],Ce={class:"d-flex"},qe=ee(()=>u("div",{style:{"font-size":"14px"}},[u("p",null,"Are you sure you want to leave this page?"),u("p",null,"You have unsaved changes, your data will be lost.")],-1));function ze(m,c,U,a,T,M){const S=n("font-awesome-icon"),N=n("fs-button"),y=n("VeeField"),w=n("fs-form-select"),O=n("ErrorMessage"),p=n("fs-col"),g=n("fs-row"),V=n("VeeForm"),E=n("dark-theme-modal"),P=pe("maska");return d(),k("div",Le,[u("div",ke,[Oe,u("div",Ve,[t(N,{variant:"outline-info",form:"form",type:"submit",onClick:H(a.onSubmit,["prevent"]),disabled:!a.isActiveSaveBtn},{default:i(()=>[t(S,{class:"mr-8",icon:["fal","floppy-disk"]}),B("SAVE")]),_:1},8,["onClick","disabled"]),t(N,{variant:"info",form:"form",type:"submit",onClick:c[0]||(c[0]=H(f=>a.onSubmit(f,!0),["prevent"])),disabled:!a.isActiveSaveBtn},{default:i(()=>[B(" SAVE & NEXT")]),_:1},8,["disabled"])])]),t(g,{gap:"4"},{default:i(()=>[t(p,{cols:"9"},{default:i(()=>[t(V,{class:"form",id:"form",ref:"formRef",onSubmit:a.onSubmit},{default:i(()=>[(d(!0),k(W,null,X(a.formList,f=>(d(),k("div",{key:f.formId},[u("div",Ee,Z(f.formName),1),t(g,{class:"d-flex justify-content-between"},{default:i(()=>[(d(!0),k(W,null,X(f.inputList,e=>(d(),v(p,{key:e.id+e.subField,lg:e.colSize,class:b([e.type,e.colClass])},{default:i(()=>[u("label",{for:e.id+e.subField,class:"input-label"},[B(Z(e.inputName)+" ",1),e.required?(d(),v(S,{key:0,class:"text-danger",icon:["fas","asterisk"],size:"sm"})):A("",!0)],8,De),e.as!=="select"&&e.hasOwnProperty("subField")?K((d(),v(y,{key:0,type:e.type=="password"&&e.showPassword?"text":e.type,name:e.id+e.subField,id:e.id+e.subField,disabled:a.isOnboard&&!a.isEmployeeSubmitted,modelValue:a.formData[e.id][e.subField],"onUpdate:modelValue":s=>a.formData[e.id][e.subField]=s,rules:(e.required?"required|":"")+e.rules,class:b(`form-${e.class}`),"data-maska":e.mask},null,8,["type","name","id","disabled","modelValue","onUpdate:modelValue","rules","class","data-maska"])),[[P]]):e.as!=="select"&&!e.hasOwnProperty("subField")?K((d(),v(y,{key:1,type:e.type=="password"&&e.showPassword?"text":e.type,name:e.id+e.subField,id:e.id+e.subField,disabled:a.isOnboard&&!a.isEmployeeSubmitted,modelValue:a.formData[e.id],"onUpdate:modelValue":s=>a.formData[e.id]=s,rules:(e.required?"required|":"")+e.rules,class:b(`form-${e.class}`),"data-maska":e.mask},null,8,["type","name","id","disabled","modelValue","onUpdate:modelValue","rules","class","data-maska"])),[[P]]):e.as=="select"&&e.hasOwnProperty("subField")?(d(),v(y,{key:2,name:e.id+e.subField,id:e.id+e.subField,rules:(e.required?"required|":"")+e.rules,modelValue:a.formData[e.id][e.subField],"onUpdate:modelValue":s=>a.formData[e.id][e.subField]=s,class:b([`form-${e.class}`])},{default:i(()=>[t(w,{disabled:a.isOnboard&&!a.isEmployeeSubmitted,options:e.options,"value-field":["namePrefixId","genderId","martialStatus"].includes(e.id)?"id":"value","text-field":["namePrefixId","genderId","martialStatus"].includes(e.id)?"name":e.id==="address"&&e.subField==="state_Province"?"value":"text",name:e.id+e.subField,modelValue:a.formData[e.id][e.subField],"onUpdate:modelValue":s=>a.formData[e.id][e.subField]=s},null,8,["disabled","options","value-field","text-field","name","modelValue","onUpdate:modelValue"])]),_:2},1032,["name","id","rules","modelValue","onUpdate:modelValue","class"])):e.as=="select"&&!e.hasOwnProperty("subField")?(d(),v(y,{key:3,name:e.id+e.subField,id:e.id+e.subField,rules:(e.required?"required|":"")+e.rules,modelValue:a.formData[e.id],"onUpdate:modelValue":s=>a.formData[e.id]=s,class:b([`form-${e.class}`])},{default:i(()=>[t(w,{disabled:a.isOnboard&&!a.isEmployeeSubmitted,options:e.options,"value-field":["namePrefixId","genderId","martialStatus"].includes(e.id)?"id":"value","text-field":["namePrefixId","genderId","martialStatus"].includes(e.id)?"name":e.id==="address"&&e.subField==="state_Province"?"value":"text",name:e.id+e.subField,modelValue:a.formData[e.id],"onUpdate:modelValue":s=>a.formData[e.id]=s},null,8,["disabled","options","value-field","text-field","name","modelValue","onUpdate:modelValue"])]),_:2},1032,["name","id","rules","modelValue","onUpdate:modelValue","class"])):A("",!0),e.type=="password"?(d(),v(S,{key:4,class:b(["icon-eye",{disable:a.isOnboard&&!a.isEmployeeSubmitted}]),icon:["fal",e.showPassword?"eye":"eye-slash"],onClick:s=>e.showPassword=!e.showPassword},null,8,["class","icon","onClick"])):A("",!0),t(O,{class:"text-danger",name:e.id+e.subField},null,8,["name"])]),_:2},1032,["lg","class"]))),128))]),_:2},1024)]))),128))]),_:1},8,["onSubmit"])]),_:1})]),_:1}),t(E,{ref:"leaveDialog",showModal:a.openSaveChangeModal,title:"Unsaved Changes",okText:"YES, LEAVE",okTextVariant:"danger",cancelText:"STAY",cancelBtnVariant:"light",onClose:a.handleStay,onOk:a.handleLeavePage},{content:i(()=>[u("span",Ce,[t(S,{class:b(["me-2","text-danger"]),icon:["fa-solid","fa-circle-exclamation"],size:"lg"}),qe])]),_:1},8,["showModal","onClose","onOk"])])}const Te=we(Fe,[["render",ze],["__scopeId","data-v-8fc8579f"]]);export{Te as default};
