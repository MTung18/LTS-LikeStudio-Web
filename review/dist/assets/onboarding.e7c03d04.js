import{d as pe,bO as _e,l as he,af as Ie,cm as Ee,cn as Te,co as $e,j as l,b as oe,r as V,o as S,f as se,w as m,a as t,g as n,I as u,D as te,u as f,c as q,a9 as Ce,E as v,aH as Be,ax as ke,ay as xe,_ as ye,cp as Fe,at as Ne,s as De,Y as me,a1 as Le,e as He,a3 as ae,a2 as K,ai as fe,cq as be}from"./index.611fe570.js";import{u as ie}from"./onboardingStore.b8199798.js";import{c as Q}from"./commonModal.7c7715d3.js";import{B as Ue}from"./bryntumSearchBar.3bdd630f.js";import{S as ne}from"./grid.module.3b00878a.js";import{g as ve,a as ge}from"./statefulSortFeature.3df4a43a.js";import{B as le}from"./BryntumGrid.2c4be387.js";import{f as Y}from"./gridConfigDefaults.8c72c19b.js";import"./foundationCompanyCasConnectionStore.b3301598.js";import"./debounce.cf77a06e.js";import"./isObject.c4ad145e.js";const B=i=>(ke("data-v-e96cb085"),i=i(),xe(),i),Re={class:"mr-3 d-flex align-items-center"},qe=B(()=>t("div",{class:"h5 pl-2 my-auto font-weight-bold"}," Actions ",-1)),Qe={class:"ms-auto"},Me={class:"onboard-panel"},Ge=B(()=>t("div",null,"Cancel",-1)),Ye={class:"message-content",style:{display:"flex",gap:"8px"}},ze=B(()=>t("div",null,[u(" Are you sure you want to cancel onboarding? "),t("br"),u(" This action will remove the employee(s) from list of current onboards. ")],-1)),Ke={class:"message-content",style:{display:"flex",gap:"8px"}},Je=B(()=>t("br",null,null,-1)),je={class:"mt-2 d-flex"},We=B(()=>t("label",{for:"clearInformationSkipPanel"},"Clear all entered information.",-1)),Xe={class:"message-content",style:{display:"flex",gap:"8px"}},Ze=B(()=>t("br",null,null,-1)),et={class:"mt-2 d-flex"},tt=B(()=>t("label",{for:"clearInformationAssignPanel"},"Clear all entered information.",-1)),at=pe({__name:"assignOnboardingPlanPanel",props:{showAssignOnboardingPlan:{type:Boolean,default:!1},listCurrentOnboard:{default:()=>[]}},emits:["update:showAssignOnboardingPlan","refreshOnboardingPlan"],setup(i,{emit:p}){const _=i,{setLoading:c}=_e();he.add(Ie,Ee,Te,$e);const k=l(!1),w=l(!1),F=l(!1),h=l(!1),O=l(!1),{changeEmployeeStatus:N,updateForm:D,updateMultipleSidebar:M}=ie(),b=async g=>{c(!0);const o=_.listCurrentOnboard.map(s=>s.id);await N(o,v.Cancelled).then(()=>{p("refreshOnboardingPlan"),p("update:showAssignOnboardingPlan",g)}),c(!1)},A=async g=>{c(!0);const o=g===v.QuickHire?_.listCurrentOnboard.filter(s=>!s.isFormSubmit).map(s=>s.id):_.listCurrentOnboard.map(s=>s.id);o.length>0&&(await D(o,O.value||h.value),(O.value||h.value)&&await M(o),await N(o,g).then(()=>{p("refreshOnboardingPlan"),p("update:showAssignOnboardingPlan",_.listCurrentOnboard)}),L()),c(!1)},L=()=>{h.value=!1,O.value=!1},I=()=>{k.value=!0},E=()=>{w.value=!0},j=()=>{F.value=!0},H=oe({get(){return _.showAssignOnboardingPlan},set(g){p("update:showAssignOnboardingPlan",g)}}),U=oe(()=>{let g="";return _.listCurrentOnboard.length&&(_.listCurrentOnboard[0].employeeStatusName=="Onboard"?g="Skip":_.listCurrentOnboard[0].employeeStatusName=="QuickHire"&&(g="Assign")),g});return(g,o)=>{const s=V("font-awesome-icon"),P=V("fs-link"),R=V("fs-form-checkbox"),G=V("fs-sidebar");return S(),se(G,{id:"onboardingPlanId","sidebar-class":"fsi-sidebar help-center","body-class":"help-center__body",right:"","no-close-on-esc":"","no-close-on-backdrop":"","bg-variant":"white",width:"425px",shadow:"sm","header-class":"border-bottom","footer-class":"border-top","aria-label":"onboarding plan","no-header-close":"",modelValue:f(H),"onUpdate:modelValue":o[7]||(o[7]=d=>Be(H)?H.value=d:null)},{title:m(({hide:d})=>[t("div",Re,[qe,t("div",Qe,[n(P,{class:"text-secondary",tag:"a",onClick:d},{default:m(()=>[n(s,{icon:["fal","times"],size:"sm"})]),_:2},1032,["onClick"])])])]),default:m(()=>[t("div",Me,[u(te(i.listCurrentOnboard.length)+" items are selected ",1),f(U)=="Skip"?(S(),q("button",{key:0,class:"onboard-panel-cancel",onClick:E},[n(s,{icon:["fal","right-to-line"]}),t("div",null,te(f(U)),1)])):(S(),q("button",{key:1,class:"onboard-panel-cancel",onClick:j},[n(s,{icon:["fal","file-check"]}),t("div",null,te(f(U)),1)])),t("button",{class:"onboard-panel-cancel",onClick:I},[n(s,{icon:["fal","xmark"]}),Ge])]),(S(),se(Ce,{to:"body"},[n(Q,{data:i.listCurrentOnboard,onEmitParent:b,centered:"",modelValue:k.value,"onUpdate:modelValue":o[0]||(o[0]=d=>k.value=d),okText:"Yes, Cancel Plan",cancelText:"No",title:"Cancel Onboarding",okTextVariant:"danger",buttonCancelCustomClass:"custom-btn"},{content:m(()=>[t("div",Ye,[t("div",null,[n(s,{class:"text-danger",icon:["fas","circle-exclamation"]})]),ze])]),_:1},8,["data","modelValue"]),n(Q,{data:i.listCurrentOnboard,onEmitParent:o[2]||(o[2]=d=>A(f(v).QuickHire)),onEmitCloseParent:L,centered:"",modelValue:w.value,"onUpdate:modelValue":o[3]||(o[3]=d=>w.value=d),okText:"Yes, Skip",cancelText:"No",title:"Skip Onboarding",okTextVariant:"success",buttonCancelCustomClass:"custom-btn"},{content:m(()=>[t("div",Ke,[t("div",null,[n(s,{class:"text-warning",icon:["fas","circle-exclamation"]})]),t("div",null,[u(" Are you sure you want to skip onboarding? "),Je,u(" This action will prevent the employee(s) from entering their own information! "),t("div",je,[n(R,{modelValue:O.value,"onUpdate:modelValue":o[1]||(o[1]=d=>O.value=d),id:"clearInformationSkipPanel"},null,8,["modelValue"]),u(),We])])])]),_:1},8,["data","modelValue"]),n(Q,{data:i.listCurrentOnboard,onEmitParent:o[5]||(o[5]=d=>A(f(v).Onboard)),onEmitCloseParent:L,centered:"",modelValue:F.value,"onUpdate:modelValue":o[6]||(o[6]=d=>F.value=d),okText:"Yes, Assign Plan",cancelText:"No",title:"Assign Onboarding Plan",okTextVariant:"success",buttonCancelCustomClass:"custom-btn"},{content:m(()=>[t("div",Xe,[t("div",null,[n(s,{class:"text-warning",icon:["fas","circle-exclamation"]})]),t("div",null,[u(" Are you sure you want to assign onboarding plan? "),Ze,u(" This action will allow the employee(s) to enter their own information! "),t("div",et,[n(R,{modelValue:h.value,"onUpdate:modelValue":o[4]||(o[4]=d=>h.value=d),type:"checkbox",id:"clearInformationAssignPanel"},null,8,["modelValue"]),u(),tt])])])]),_:1},8,["data","modelValue"])]))]),_:1},8,["modelValue"])}}});const nt=ye(at,[["__scopeId","data-v-e96cb085"]]);var J=(i=>(i[i.ONBOARDS=0]="ONBOARDS",i[i.QUICK_HIRES=1]="QUICK_HIRES",i[i.COMPLETED=2]="COMPLETED",i))(J||{});const z=i=>(ke("data-v-3c1b7ba2"),i=i(),xe(),i),lt={key:0,class:"fsi-pg"},ot={id:"current-on-board"},st={key:0},it={class:"action-grid list__table list__table--onpage list__b-grid--hover"},rt={key:0},dt={class:"action-grid list__table list__table--onpage list__b-grid--hover"},ut={key:0},ct={class:"action-grid list__table list__table--onpage list__b-grid--hover"},mt={class:"message-content"},ft=z(()=>t("div",null,[u(" Are you sure you want to cancel onboarding? "),t("br"),u("This action will remove the employee from the list of current onboards. ")],-1)),bt={class:"message-content"},vt=z(()=>t("br",null,null,-1)),gt={class:"mt-2"},pt=z(()=>t("label",{for:"clearInformationSkipBoard"},"Clear all entered information.",-1)),_t={class:"message-content"},ht=z(()=>t("br",null,null,-1)),Ct={class:"mt-2"},kt=z(()=>t("label",{for:"clearInformationAssignBoard"},"Clear all entered information.",-1)),xt=pe({__name:"onboarding",setup(i){he.add(Fe);const{setLoading:p}=_e(),_=Ne(),c="OnboardingList",k={field:"name",ascending:!0},w=l(localStorage.getItem(`${c}SearchText`)??""),F=l(!1),h=l(0),O=l(0),N=l(!1),D=l(!1),M=l(!1),b=l(null),A=l(null),L=oe(()=>A.value?.instance.value.features),I=l(!1),E=l(!1),{currentOnboards:j}=De(ie()),{fetchCurrentOnboards:H,changeEmployeeStatus:U,updateForm:g,updateMultipleSidebar:o}=ie(),s=l(0),P=l(!1),R=l(new Array),G=l([]),d=l([]),W=l([]),Se=l({...Y.gridConfig,...ve(c),...ge(c,k),minHeight:"50em",columns:[{flex:1,text:"Name",id:"name",field:"fullName",groupable:!1,htmlEncode:!1,renderer:({value:a})=>a},{flex:1,text:"Onboarding Type",id:"onboardType",field:"employmentStatus",groupable:!1,editor:!1,htmlEncode:!1,renderer:({record:a})=>`<div class="text-capitalize">${a.data.textOnboardingType}</div>`},{flex:1,text:"Completion Date",id:"completionDate",field:"completionDate",groupable:!1,htmlEncode:!0,renderer:({record:a})=>a.data.completionDate},{flex:1,type:"action",id:"action",text:"Actions",groupable:!1,htmlEncode:!0,cellCls:"b-action-cell--hover",actions:[{visible:!0,renderer:()=>'<div class="b-action-item b-fa b-fa-arrow-up-right-from-square btn btn-link btn-view text-success no-underline viewOnboardBtn"></div>',onClick:({record:a})=>me.push({name:"onboardingDetail",params:{id:a.id,fullName:a.fullName}})}]}]}),re=l({...Y.gridConfig,...ve(c),...ge(c,k),selectionMode:{triggerEvent:"",row:!0,checkboxOnly:!0,flex:1,minColumnWidth:45,deselectOnClick:!1,checkbox:!0,showCheckAll:!0},minHeight:"50em",columns:[{flex:1,text:"Name",id:"fullName",field:"fullName",groupable:!1,htmlEncode:!1,renderer:({value:a})=>a},{flex:1,text:"Onboarding Status",id:"textOnboardStatus",field:"textOnboardStatus",groupable:!1,editor:!1,htmlEncode:!0,vue:!0,textContent:!0,renderer:({record:a,size:e,cellElement:C})=>(e.height=70,C.style.alignItems="center",{is:"onboarding-button-status",employeeId:a.data.id,isFormSubmit:a.data.isFormSubmit,isData:!0})},{flex:1,text:"Progress",id:"nrOfCompletedTasks",field:"nrOfCompletedTasks",groupable:!1,htmlEncode:!0,vue:!0,renderer:({record:a})=>({is:"hr-onboarding-tasks",employeeId:a.data.id,isRightText:!0,isData:!0})},{flex:1,type:"action",id:"action",text:"Actions",groupable:!1,htmlEncode:!0,cellCls:"b-action-cell--hover",actions:[{visible:!0,renderer:()=>'<div class="b-action-item b-fa b-fa-arrow-up-right-from-square btn btn-link btn-view text-success no-underline viewOnboardBtn"></div>',onClick:({record:a})=>me.push({name:"onboardingDetail",params:{id:a.data.id,fullName:a.data.fullName}})},{visible:!0,renderer:({record:a})=>a.data.employeeStatusId===v.Onboard&&a.data.isFormSubmit===!1?'<div class="b-action-item b-fa b-fa-forward btn btn-link text-success btn-skip no-underline skipOnboardBtn"></div>':a.data.employeeStatusId===v.QuickHire?'<div class="b-action-item b-fa b-fa-file-check btn btn-link text-success btn-assign no-underline skipOnboardBtn"></div>':"",onClick:({record:a})=>{b.value=a.data,a.data.employeeStatusId==v.Onboard?D.value=!0:M.value=!0}},{visible:!0,renderer:()=>'<div class="b-action-item b-fa b-fa-times-circle btn btn-link text-red btn-cancel no-underline cancelOnboardBtn"></div>',onClick:({record:a})=>{b.value=a.data,N.value=!0}}]}],listeners:{selectionChange:a=>{Array.isArray(a.selection)&&a.selection.length>0?(P.value=!0,R.value=a.selection.map(e=>e.data)):(R.value=[],P.value=!1)}}}),x=l(new ne({...Y.gridStoreConfig,sorters:[k],onFilter:()=>{w.value&&x.value.filters.count<h.value&&(h.value=x.value.filters.count)}})),T=l(new ne({...Y.gridStoreConfig,sorters:[k],onFilter:()=>{w.value&&T.value.filters.count<h.value&&(h.value=T.value.filters.count)}})),$=l(new ne({...Y.gridStoreConfig,sorters:[k],onFilter:()=>{w.value&&$.value.filters.count<O.value&&(O.value=$.value.filters.count)}})),we=()=>{localStorage.setItem(`${c}State`,JSON.stringify(x.value.state)),localStorage.setItem(`${c}SearchText`,w.value)},Oe=()=>{x.value.clearFilters(),x.value.clearSorters(),T.value.clearFilters(),T.value.clearSorters(),$.value.clearFilters(),$.value.clearSorters(),localStorage.removeItem(`${c}State`),localStorage.removeItem(`${c}SearchText`)},Pe=async a=>{if(b.value){const e=[b.value.id];await U(e,a).then(()=>{b.value=null,X()})}},de=async a=>{if(b.value){p(!0);const e=[b.value],C=a===v.QuickHire?e.filter(y=>!y.isFormSubmit).map(y=>y.id):e.map(y=>y.id);C.length>0&&(await g(C,E.value||I.value),(E.value||I.value)&&await o(C),await U(C,a).then(()=>{b.value=null,X()}),ue(),ce()),p(!1)}},X=async()=>{await H(),Z()},Ve=()=>{x.value.clearFilters(),T.value.clearFilters(),$.value.clearFilters(),L.value.filterBar.hideFilterBar()};Le(()=>s.value,()=>{b.value=null,Z(),p(!0),setTimeout(()=>p(!1),500),P.value=!1},{deep:!0});const Z=()=>{G.value=[],d.value=[],W.value=[],j.value.forEach(async e=>{e.employeeStatusId===v.Onboard&&G.value.push(e),e.employeeStatusId===v.QuickHire&&d.value.push(e),e.employeeStatusId===v.Active&&W.value.push(e)}),x.value.data=[...G.value],T.value.data=[...d.value],$.value.data=[...W.value];const a=localStorage.getItem(`${c}State`);a&&(x.value.state=JSON.parse(a))},ue=()=>{I.value=!1},ce=()=>{E.value=!1,D.value=!1};return He(async()=>{p(!0),await H(),_.query.status!=null&&_.query.status!=null&&(s.value=Number(_.query.status)),Z(),F.value=!0,p(!1)}),(a,e)=>{const C=V("fs-card-body"),y=V("fs-tab"),Ae=V("fs-tabs"),ee=V("font-awesome-icon");return F.value?(S(),q("div",lt,[n(Ue,{title:"Current Onboards","local-storage-key":c,"show-settings-button":!0,"show-filter-button":!0,onSaveSettings:e[0]||(e[0]=r=>we()),onClearSettings:e[1]||(e[1]=r=>Oe()),onHideFilterBar:e[2]||(e[2]=r=>Ve()),onShowFilterBar:e[3]||(e[3]=r=>f(L).filterBar.showFilterBar())}),t("div",ot,[n(Ae,{modelValue:s.value,"onUpdate:modelValue":e[4]||(e[4]=r=>s.value=r),pills:"",class:"onboard-tabs","active-nav-item-class":"bg-employee-cyan hq-pg__tab--active"},{default:m(()=>[n(y,{title:"Onboards",active:"",lazy:"","title-item-class":"mx-1","title-link-class":"hq-pg__tab"},{default:m(()=>[s.value==f(J).ONBOARDS?(S(),q("div",st,[n(C,{class:"dashboard-card__content list__table"},{default:m(()=>[t("div",it,[n(f(le),ae({ref_key:"grid",ref:A},re.value,{store:x.value}),null,16,["store"])])]),_:1})])):K("",!0)]),_:1}),n(y,{title:"Quick Hires",lazy:"","title-item-class":"mx-1","title-link-class":"hq-pg__tab"},{default:m(()=>[s.value==f(J).QUICK_HIRES?(S(),q("div",rt,[n(C,{class:"dashboard-card__content list__table"},{default:m(()=>[t("div",dt,[n(f(le),ae({ref_key:"grid",ref:A},re.value,{store:T.value}),null,16,["store"])])]),_:1})])):K("",!0)]),_:1}),n(y,{title:"Completed",lazy:"","title-item-class":"mx-1","title-link-class":"hq-pg__tab"},{default:m(()=>[s.value==f(J).COMPLETED?(S(),q("div",ut,[n(C,{class:"dashboard-card__content list__table"},{default:m(()=>[t("div",ct,[n(f(le),ae({ref_key:"grid",ref:A},Se.value,{store:$.value}),null,16,["store"])])]),_:1})])):K("",!0)]),_:1})]),_:1},8,["modelValue"])]),n(nt,{modelValue:P.value,"onUpdate:modelValue":e[5]||(e[5]=r=>P.value=r),"onUpdate:showAssignOnboardingPlan":e[6]||(e[6]=r=>P.value=!1),onRefreshOnboardingPlan:X,listCurrentOnboard:R.value},null,8,["modelValue","listCurrentOnboard"]),(S(),se(Ce,{to:"body"},[n(Q,{modelValue:N.value,"onUpdate:modelValue":e[7]||(e[7]=r=>N.value=r),onEmitParent:e[8]||(e[8]=r=>Pe(f(v).Cancelled)),data:b.value,centered:"",okText:"Yes, Cancel",cancelText:"No",title:"Cancel Onboarding",okTextVariant:"danger",buttonCancelCustomClass:"custom-btn"},{content:m(()=>[t("div",mt,[n(ee,{class:"text-danger top-5",icon:["fas","circle-exclamation"]}),ft])]),_:1},8,["modelValue","data"]),n(Q,{modelValue:D.value,"onUpdate:modelValue":e[10]||(e[10]=r=>D.value=r),onEmitParent:e[11]||(e[11]=r=>de(f(v).QuickHire)),onEmitCloseParent:ce,data:b.value,centered:"",okText:"Yes, Skip",cancelText:"No",title:"Skip Onboarding",buttonCancelCustomClass:"custom-btn",okTextVariant:"success"},{content:m(()=>[t("div",bt,[n(ee,{class:"text-warning top-5",icon:["fas","circle-exclamation"]}),t("div",null,[u(" Are you sure you want to skip onboarding? "),vt,u("This action will prevent the employee(s) from entering their own information! "),t("div",gt,[fe(t("input",{"onUpdate:modelValue":e[9]||(e[9]=r=>E.value=r),type:"checkbox",id:"clearInformationSkipBoard"},null,512),[[be,E.value]]),u(),pt])])])]),_:1},8,["modelValue","data"]),n(Q,{modelValue:M.value,"onUpdate:modelValue":e[13]||(e[13]=r=>M.value=r),onEmitParent:e[14]||(e[14]=r=>de(f(v).Onboard)),onEmitCloseParent:ue,data:b.value,centered:"",okText:"Yes, Assign Plan",cancelText:"No",title:"Assign Onboarding Plan",okTextVariant:"success",buttonCancelCustomClass:"custom-btn"},{content:m(()=>[t("div",_t,[n(ee,{class:"text-warning top-5",icon:["fas","circle-exclamation"]}),t("div",null,[u(" Are you sure you want to assign onboarding plan? "),ht,u("This action will allow the employee(s) to enter their own information! "),t("div",Ct,[fe(t("input",{"onUpdate:modelValue":e[12]||(e[12]=r=>I.value=r),type:"checkbox",id:"clearInformationAssignBoard"},null,512),[[be,I.value]]),u(),kt])])])]),_:1},8,["modelValue","data"])]))])):K("",!0)}}});const Bt=ye(xt,[["__scopeId","data-v-3c1b7ba2"]]);export{Bt as default};
