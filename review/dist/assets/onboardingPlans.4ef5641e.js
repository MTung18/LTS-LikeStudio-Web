import{B as V}from"./bryntumSearchBar.3bdd630f.js";import{S as E}from"./grid.module.3b00878a.js";import{B as L}from"./BryntumGrid.2c4be387.js";import{f as _}from"./gridConfigDefaults.8c72c19b.js";import{f as N}from"./filterStoreDataBySearchText.3eea2082.js";import{u as v}from"./onboardingStore.b8199798.js";import{d as x,s as O,j as s,b as D,a1 as h,e as G,r as I,o as S,c as w,g as i,w as d,I as C,a as y,a3 as M,u as U}from"./index.611fe570.js";import"./foundationCompanyCasConnectionStore.b3301598.js";import"./debounce.cf77a06e.js";import"./isObject.c4ad145e.js";const F={class:"large-header"},H={class:"action-grid list__table list__table--onpage list__b-grid--hover"},j=x({__name:"onboardingPlanList",setup(A,{emit:a}){const{fetchOnboardingList:u}=v(),{onboardingPlanList:o}=O(v()),t="onboardingPlanListGrid",f={field:"name",ascending:!0},g=s(null);D(()=>g.value?.instance.value.features);const P=s({..._.gridConfig,minHeight:"100%",emptyText:"",columns:[{flex:1,text:"Plan Name",id:"name",field:"name",groupable:!1,sortable:!0},{flex:1,text:"Description",id:"description",field:"description",sortable:!0,groupable:!1},{flex:1,align:"center",text:"# of Assignees",id:"assigneeCount",field:"assigneeCount",sortable:!0,groupable:!1,htmlEncode:!1,cellCls:"text-link-green",renderer:({record:e})=>`<span class="text-success" style="text-decoration: underline;">${e.data.assigneeCount}</span>`},{flex:1,type:"action",id:"action",text:"Actions",columnDragToolbar:!1,enableHeaderContextMenu:!1,enableCellContextMenu:!1,cellCls:"b-action-cell--hover",actions:[{visible:!0,renderer:()=>'<i class="b-action-item b-fa b-fa-user-plus btn btn-link text-success no-underline"><span>Assign</span></i>',onClick:B},{visible:!0,renderer:()=>'<i class="b-action-item b-fa b-fa-edit btn btn-link text-success no-underline"><span>Edit</span></i>',onClick:$}]}]}),l=s(new Array),k=["id"],b=s(0),n=s(new E({..._.gridStoreConfig,sorters:[f],onFilter:()=>{r.value&&n.value.filters.count<b.value&&c(),b.value=n.value.filters.count}}));async function m(){n.value.data=l.value;const e=localStorage.getItem(`${t}State`);e&&(n.value.state=JSON.parse(e))}function c(){N(l.value,k,r.value,n.value)}const r=s(localStorage.getItem(`${t}SearchText`)??"");h(r,()=>{c()});function B(e){a("assignUser",e.record.data)}function $(e){a("editPlan",e.record.data)}function T(e){e.column.id==="assigneeCount"&&a("viewAssignees",e.record.data)}return G(async()=>{await u(),l.value=o.value,m(),r.value!==""&&c()}),h(o,()=>{l.value=o.value,m(),r.value!==""&&c()}),(e,K)=>{const p=I("fs-button");return S(),w("div",F,[i(V,{title:"Onboarding Plans","show-settings-button":!1,"show-search-button":!1,"show-filter-button":!1,"show-refresh-button":!1,"show-footer-search":!1,"show-back-button":!0,"return-route":"/onboarding"},{buttons:d(()=>[i(p,{variant:"outline-secondary",class:"btn btn-outline-green"},{default:d(()=>[C("Create Plan")]),_:1}),i(p,{variant:"btn-primary",class:"btn btn-primary"},{default:d(()=>[C("Assign Plan")]),_:1})]),_:1}),y("div",H,[i(U(L),M(P.value,{store:n.value,ref_key:"grid",ref:g,onCellClick:T}),null,16,["store"])])])}}}),q={class:"hq-pg list"},J={class:"list__table"},se=x({__name:"onboardingPlans",setup(A){function a(t){console.log(`Assign User to ${t.name}`)}function u(t){console.log(`Edit ${t.name}`)}function o(t){console.log(`View Assignees on ${t.name}`)}return(t,f)=>(S(),w("div",q,[y("div",J,[i(j,{onAssignUser:a,onEditPlan:u,onViewAssignees:o})])]))}});export{se as default};
