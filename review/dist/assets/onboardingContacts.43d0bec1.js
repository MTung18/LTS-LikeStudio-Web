import{d as he,l as ye,ar as _e,bA as Se,aA as Ce,aF as ke,s as Z,j as i,a0 as xe,b as ee,e as te,aU as we,E as f,bO as Ee,Y as Ne,a1 as Be,r as g,o as h,c as Ae,g as o,w as s,a as d,A as De,I as x,u as S,f as C,a2 as V,a3 as Q,F as Le,at as Ie,aD as We,ax as Xe,ay as Pe,_ as Te}from"./index.611fe570.js";import{u as ae}from"./onboardingEmployeeContactStore.4a6b6ed4.js";import{u as oe}from"./onboardingStore.b8199798.js";import{S as F}from"./grid.module.3b00878a.js";import{B as R}from"./BryntumGrid.2c4be387.js";import{B as G}from"./bryntumSearchBar.3bdd630f.js";import{f as k}from"./gridConfigDefaults.8c72c19b.js";import{g as M,a as O}from"./statefulSortFeature.3df4a43a.js";import{D as He}from"./darkThemeModal.c38e7d4c.js";import"./foundationCompanyCasConnectionStore.b3301598.js";import"./debounce.cf77a06e.js";import"./isObject.c4ad145e.js";const K=E=>(Xe("data-v-95e6c887"),E=E(),Pe(),E),Ve={class:"d-flex"},Qe=K(()=>d("div",null,[x(" Do you really want to delete this contact? "),d("br"),x(" This process cannot be undone. ")],-1)),Fe={class:"m-3"},Re=K(()=>d("h2",{class:"hq-pg__title onboarding-VEVRAA__title fw-bold"}," Contacts ",-1)),Ge=K(()=>d("p",{class:"onboardingContactSubTitle"}," You need at least one emergency contact to complete the contact section. ",-1)),Me={class:"list__table"},Oe={class:"list__table"},Ke={class:"list__table"},Ue={class:"content"},$e=he({__name:"onboardingContacts",setup(E){ye.add(_e,Se,Ce,ke);const{fetchEmployeeContactList:ne,deleteEmployeeContactById:se,fetchEmployeeStatusId:ie,fetchEmployeeSubmitStatusId:le,fetchEmployeeContactSsnById:U}=ae(),{employeeContactList:N,employeeStatusId:re,employeeSubmitStatusId:ce,employeeContactSSNById:$}=Z(ae()),l=i(0),r=i(),{responsive:de}=xe(),w=ee(()=>Ie().params?.id?.toString()),y=i(!1),m=i(null);te(async()=>{v(!0);try{await ie(w.value),l.value=re.value}catch(e){console.error(e)}finally{v(!1)}});const u="employeeListGrid",_={},B=i(0),A=i(0),D=i(0),L=i(null),ue=async e=>{if(b.value.data.find(t=>t.id==e).isCallApiSsn){b.value.data=b.value.data.map(t=>({...t,isShowSsn:t.id==e?!t.isShowSsn:t.isShowSsn}));return}await U(e),b.value.data=b.value.data.map(t=>({...t,socialSecurityNumber:t.id==e?$:t.socialSecurityNumber,isShowSsn:t.id==e?!t.isShowSsn:t.isShowSsn,isCallApiSsn:t.id==e?!0:t.isCallApiSsn}))},fe=async e=>{if(p.value.data.find(t=>t.id==e).isCallApiSsn){p.value.data=p.value.data.map(t=>({...t,isShowSsn:t.id==e?!t.isShowSsn:t.isShowSsn}));return}await U(e),p.value.data=p.value.data.map(t=>({...t,socialSecurityNumber:t.id==e?$:t.socialSecurityNumber,isShowSsn:t.id==e?!t.isShowSsn:t.isShowSsn,isCallApiSsn:t.id==e?!0:t.isCallApiSsn}))},n=we({beneficiary:{...k.gridConfig,...M(u),...O(u,_),autoHeight:!0,responsiveLevels:{small:400,medium:800,large:"*"},emptyText:"No Beneficiary.",subGridConfigs:{left:{flex:"1"},right:{width:120}},columns:[{flex:1,autoWidth:!1,region:!1,text:"Contact Person",field:"contactPerson"},{flex:1,autoWidth:!1,region:!1,text:"Relationship",field:"relation",groupable:!1,htmlEncode:!1},{flex:1,autoWidth:!1,region:!1,text:"gender",field:"gender"},{flex:1,autoWidth:!1,region:!1,text:"socialSecurityNumber",field:"socialSecurityNumber",class:"socialSecurityNumber",type:"action",htmlEncode:!1,actions:[{renderer:({record:e})=>e.data.isShowSsn?`<span class="cursor-pointer visible">${e.data.socialSecurityNumber}</span> <div class="b-action-item b-fa b-fa-eye btn-eye btn-link socialSecurityNumberBtn"></div>`:'<span class="cursor-pointer visible">XXX-XX-XXXX</span> <div class="b-action-item b-fa b-fa-eye-slash btn-eye-slash socialSecurityNumberBtn btn-link"></div>',onClick:({record:e})=>ue(e.data.id)}]},{flex:1,autoWidth:!1,region:"right",locked:!1,text:"Actions",type:"action",htmlEncode:!1,responsiveLevels:{small:{flex:1}},actions:[{renderer:()=>l.value===f.QuickHire||r.value===!0?'<div class="b-action-item b-fa b-fa-edit btn-onboardingEdit updateContactBtn btn-link"></div>':"",onClick:({record:e})=>X(e)},{visible:!0,renderer:()=>l.value===f.QuickHire||r.value===!0?'<div class="b-action-item b-fa b-fa-trash-alt btn-delete deleteContactBtn"></div>':"",onClick:({record:e})=>{m.value=e,y.value=!0}}]}]},dependent:{...k.gridConfig,...M(u),...O(u,_),autoHeight:!0,responsiveLevels:{small:400,medium:800,large:"*"},emptyText:"No Dependent.",subGridConfigs:{left:{flex:"1"},right:{width:120}},columns:[{flex:1,autoWidth:!1,region:!1,text:"Contact Person",field:"contactPerson"},{flex:1,autoWidth:!1,region:!1,text:"Relationship",field:"relation",groupable:!1,htmlEncode:!1},{flex:1,autoWidth:!1,region:!1,text:"gender",field:"gender"},{flex:1,autoWidth:!1,region:!1,text:"socialSecurityNumber",field:"socialSecurityNumber",class:"socialSecurityNumber",type:"action",htmlEncode:!1,actions:[{renderer:({record:e})=>e.data.isShowSsn?`<span class="cursor-pointer visible">${e.data.socialSecurityNumber}</span> <div class="b-action-item b-fa b-fa-eye btn-eye btn-link socialSecurityNumberBtn"></div>`:'<span class="cursor-pointer visible">XXX-XX-XXXX</span> <div class="b-action-item b-fa b-fa-eye-slash btn-eye-slash socialSecurityNumberBtn btn-link"></div>',onClick:({record:e})=>fe(e.data.id)}]},{flex:1,autoWidth:!1,region:"right",locked:!1,text:"Actions",type:"action",htmlEncode:!1,responsiveLevels:{small:{flex:1}},actions:[{visible:!0,renderer:()=>l.value===f.QuickHire||r.value===!0?'<div class="b-action-item b-fa b-fa-edit btn-onboardingEdit updateContactBtn btn-link"></div>':"",onClick:({record:e})=>X(e)},{visible:!0,renderer:()=>l.value===f.QuickHire||r.value===!0?'<div class="b-action-item b-fa b-fa-trash-alt btn-delete deleteContactBtn"></div>':"",onClick:({record:e})=>{m.value=e,y.value=!0}}]}]},contactPerson:{...k.gridConfig,...M(u),...O(u,_),autoHeight:!0,responsiveLevels:{small:400,medium:800,large:"*"},emptyText:"No Emergency Contacts.",subGridConfigs:{left:{flex:"1"},right:{width:120}},columns:[{flex:1,autoWidth:!1,region:!1,text:"Contact Person",field:"contactPerson"},{flex:1,autoWidth:!1,region:!1,text:"Relationship",field:"relation",groupable:!1,htmlEncode:!1},{flex:1,autoWidth:!1,region:!1,text:"Mobile",field:"phoneNumber",filterable({value:e,record:a}){return a.data.phoneNumber.trim().toLowerCase().includes(e.trim().toLowerCase())?a:!1}},{flex:1,autoWidth:!1,region:!1,text:"email",field:"emailAddress"},{flex:1,autoWidth:!1,region:"right",locked:!1,text:"Actions",type:"action",htmlEncode:!1,responsiveLevels:{small:{flex:1}},actions:[{visible:!0,renderer:()=>l.value===f.QuickHire||r.value===!0?'<div class="b-action-item b-fa b-fa-edit btn-onboardingEdit updateContactBtn btn-link"></div>':"",onClick:({record:e})=>X(e)},{visible:!0,renderer:()=>l.value===f.QuickHire||r.value===!0?'<div class="b-action-item b-fa b-fa-trash-alt btn-delete deleteContactBtn"></div>':"",onClick:({record:e})=>{m.value=e,y.value=!0}}]}]}}),I=i(new F({...k.gridStoreConfig,sorters:[_]})),b=i(new F({...k.gridStoreConfig,sorters:[_]})),p=i(new F({...k.gridStoreConfig,sorters:[_]})),{setLoading:v}=Ee();function W(e,a){if(e)return e.filter(t=>t[a])}async function z(){v(!0),await ne(Number(w.value));const e=W(N.value,"isEmergencyContact"),a=W(N.value,"isBeneficiary"),t=W(N.value,"isDependent");return N.value!==void 0&&e.map(c=>({...c,phoneNumber:c.phoneNumber?We(c.phoneNumber):""})),v(!1),{dataEmployeeEmergencyContactsList:e,dataEmployeeBeneficiaryList:a,dataEmployeeDependentList:t}}te(async()=>{v(!0);try{const{dataEmployeeEmergencyContactsList:e,dataEmployeeBeneficiaryList:a,dataEmployeeDependentList:t}=await z();await le(w.value),r.value=ce.value,I.value.data=e,b.value.data=a.map(c=>({...c,isCallApiSsn:!1,isShowSsn:!1})),p.value.data=t.map(c=>({...c,isCallApiSsn:!1,isShowSsn:!1}))}catch(e){console.error(e)}finally{v(!1)}n.contactPerson.columns[n.contactPerson.columns.length-1].region=!1,n.beneficiary.columns[n.beneficiary.columns.length-1].region=!1,n.dependent.columns[n.dependent.columns.length-1].region=!1,B.value++,A.value++,D.value++});const X=async e=>{Ne.push({name:"onboardingContactUpdate",params:{contactId:e.id}})},Y=ee(()=>de.breakpoint);Be(Y,()=>{const e=Y.value;e==="sm"?(n.contactPerson.columns.forEach(a=>{a.autoWidth=!0}),n.beneficiary.columns.forEach(a=>{a.autoWidth=!0}),n.dependent.columns.forEach(a=>{a.autoWidth=!0})):e==="md"?(n.contactPerson.columns[3].region="right",n.beneficiary.columns[3].region="right",n.dependent.columns[3].region="right"):(n.contactPerson.columns.forEach(a=>{a.autoWidth=!1,a.region=!1}),n.beneficiary.columns.forEach(a=>{a.autoWidth=!1,a.region=!1}),n.dependent.columns.forEach(a=>{a.autoWidth=!1,a.region=!1})),B.value++,A.value++,D.value++});const{onboardingSideNavItem:j}=Z(oe()),q=oe(),J=i(null),me=async e=>{j.value.length==0&&await q.getOnboardingSideNavItems(Number(w.value)),J.value=j.value.find(a=>a.progressSidebarUrl.trim().toLowerCase()==="onboardingContacts".trim().toLocaleLowerCase()),await q.markOnboardingSidenavItemAsDone(J.value.progressSidebarId,e,Number(w.value))},be=async()=>{v(!0);try{await se(m.value.id),p.value.remove(m.value),b.value.remove(m.value),I.value.remove(m.value);const{dataEmployeeEmergencyContactsList:e}=await z();y.value=!1;const a=!!(e&&e.length);await me(a),m.value=null}catch(e){console.error(e)}finally{v(!1)}};return(e,a)=>{const t=g("font-awesome-icon"),c=g("fs-col"),pe=g("fs-button"),ve=g("fs-row"),P=g("fs-link"),T=g("fs-card-body"),H=g("fs-card"),ge=g("router-view");return h(),Ae(Le,null,[o(He,{showModal:y.value,title:"Delete Contact",okText:"delete",okTextVariant:"danger",cancelText:"cancel",cancelBtnVariant:"light",onClose:a[0]||(a[0]=ze=>y.value=!1),onOk:be},{content:s(()=>[d("span",Ve,[o(t,{class:De(["me-2","text-danger"]),icon:["fa-solid","fa-circle-exclamation"],size:"lg"}),Qe])]),_:1},8,["showModal"]),d("div",Fe,[o(ve,{"align-v":"center"},{default:s(()=>[o(c,{cols:"12",md:"6"},{default:s(()=>[Re,Ge]),_:1}),o(c,{ls:6,cols:"12",md:"6",class:"onboarding-VEVRAA__saveBtn"},{default:s(()=>[o(pe,{class:"btn bg-primary text-white border-primary",to:{name:"onboardingDirectDeposit"}},{default:s(()=>[x(" NEXT")]),_:1})]),_:1})]),_:1})]),o(H,{class:"dashboard-card marginlr-10 mb-3","no-body":"",style:{height:"auto !important"}},{default:s(()=>[o(T,{class:"dashboard-card__content",id:"onboarding__emergencyContacts"},{default:s(()=>[o(G,{icon:"phone",title:"Emergency Contacts","local-storage-key":u,"show-icon":!0},{buttons:s(()=>[l.value===S(f).QuickHire||r.value===!0?(h(),C(P,{key:0,variant:"link",to:{name:"onboardingContactAdd"},class:"text-decoration-none"},{default:s(()=>[o(t,{icon:["fal","circle-plus"]}),x(" ADD")]),_:1})):V("",!0)]),_:1}),d("div",Me,[(h(),C(S(R),Q(n.contactPerson,{store:I.value,ref_key:"grid",ref:L,key:B.value}),null,16,["store"]))])]),_:1})]),_:1}),o(H,{class:"dashboard-card marginlr-10 mb-3","no-body":"",style:{height:"auto !important"}},{default:s(()=>[o(T,{class:"dashboard-card__content",id:"onboarding__beneficiary"},{default:s(()=>[o(G,{icon:"badge-dollar",title:"Beneficiary","local-storage-key":u,"show-icon":!0},{buttons:s(()=>[l.value===S(f).QuickHire||r.value===!0?(h(),C(P,{key:0,variant:"link",to:{name:"onboardingContactAdd"},class:"text-decoration-none"},{default:s(()=>[o(t,{icon:["fal","circle-plus"]}),x(" ADD")]),_:1})):V("",!0)]),_:1}),d("div",Oe,[(h(),C(S(R),Q(n.beneficiary,{store:b.value,ref_key:"grid",ref:L,key:A.value}),null,16,["store"]))])]),_:1})]),_:1}),o(H,{class:"dashboard-card marginlr-10 mb-3","no-body":"",style:{height:"auto !important"}},{default:s(()=>[o(T,{class:"dashboard-card__content",id:"onboarding__dependent"},{default:s(()=>[o(G,{icon:"family-pants",title:"Dependent","local-storage-key":u,"show-icon":!0},{buttons:s(()=>[l.value===S(f).QuickHire||r.value===!0?(h(),C(P,{key:0,variant:"link",to:{name:"onboardingContactAdd"},class:"text-decoration-none"},{default:s(()=>[o(t,{icon:["fal","circle-plus"]}),x(" ADD")]),_:1})):V("",!0)]),_:1}),d("div",Ke,[(h(),C(S(R),Q(n.dependent,{store:p.value,ref_key:"grid",ref:L,key:D.value}),null,16,["store"]))])]),_:1})]),_:1}),d("div",Ue,[o(ge)])],64)}}});const lt=Te($e,[["__scopeId","data-v-95e6c887"]]);export{lt as default};
