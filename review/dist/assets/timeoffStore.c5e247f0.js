import{J as R,K as w,L as g,N as y,ck as m,bk as i,R as v,j as I}from"./index.611fe570.js";class c{id;employeeId;fullName;supervisorId;supervisorFullName;totalHours;note;planTypeId;planTypeName;status;rejectReason;currentBalance;dateFilter;requestDates;constructor(t){Object.assign(this,t)}}class E extends g{constructor(t){const e=y().ClientSide.WorkforceManagement+"/v1";super(t,e)}async getRequests(t){let e=[];try{const a=await this.axiosInstance.get("TimeOffRequests",{params:t});if(a&&a.data&&a.status===200)e=a.data.map(u=>{const n=new c(u);return n.dateFilter=m(n.requestDates),n});else throw new Error("Failed to parse timeoff request list")}catch{console.error("An unexpected error occurred attempting to retrieve the Timeoff Request list.")}return e}async getRequest(t){let e;try{const a=await this.axiosInstance.get(`TimeOffRequests/${t}/detail`);if(a&&a.data&&a.status===200)e=new c(a.data);else throw new Error(`Failed to parse timeoff request ${t} detail`)}catch{console.error("An unexpected error occurred attempting to retrieve this Timeoff Request.")}return e}async approveRequest(t){return await this.axiosInstance.put("TimeOffRequests/approve",t).then(e=>({status:e.status,errorMessage:e.data,success:!0,data:e.data?.listOfDateId})).catch(e=>({status:e.response.status,errorMessage:e.response.data.errorMessage,success:!1}))}async cancelRequest(t){return await this.axiosInstance.put(`TimeOffRequests/${t}/cancel`).then(e=>({status:e.status,errorMessage:e.data,success:!0,data:e.data?.listOfDateId})).catch(e=>({status:e.response.status,errorMessage:e.response.data.errorMessage,success:!1}))}async rejectRequest(t){return await this.axiosInstance.put("TimeOffRequests/reject",t).then(e=>({status:e.status,errorMessage:e.data,success:!0,data:e.data?.listOfDateId})).catch(e=>({status:e.response.status,errorMessage:e.response.data.errorMessage,success:!1}))}async bulkApprove(t){return await this.axiosInstance.post("TimeOffRequests/bulkApprove",t).then(e=>({status:e.status,errorMessage:e.data,success:!0})).catch(e=>({status:e.response.status,errorMessage:e.response.data.errorMessage,success:!1}))}async bulkReject(t){return await this.axiosInstance.post("TimeOffRequests/bulkReject",t).then(e=>({status:e.status,errorMessage:e.data,success:!0})).catch(e=>({status:e.response.status,errorMessage:e.response.data.errorMessage,success:!1}))}async addEvent(t){t.id&&delete t.id,t.eventId&&delete t.eventId,t.notificationDate&&(t.notificationDate=i(t.notificationDate));try{return(await this.axiosInstance.post("Events",t)).data}catch(e){console.error("Error add event:",e)}}async updateEvent(t){const e=t.eventId;e&&delete t.eventId,t.id&&delete t.id,t.notificationDate&&(t.notificationDate=i(t.notificationDate));try{await this.axiosInstance.put("Events/"+e,t)}catch(a){console.error("Error update event:",a)}}async deleteEvent(t){try{await this.axiosInstance.delete("Events/"+t.eventId)}catch(e){console.error("Error delete event:",e)}}async getRequestedLeaveYears(){let t;try{const e=await this.axiosInstance.get("TimeOffRequests/requestedLeaveYears");if(e&&e.data&&e.data.length>0&&e.status===200)t=e.data;else throw new Error("Failed to parse the list of requested leave years.")}catch(e){console.error("An unexpected error occurred while attempting to retrieve the list of requested leave years.",e)}return t}}const r=new E([R,w]),x=v("timeoff",()=>{const o=I(new Array);async function t(s){o.value=await r.getRequests(s)}async function e(s){return await r.getRequest(s)}async function a(s){return await r.approveRequest(s)}async function u(s){return await r.cancelRequest(s)}async function n(s){return await r.rejectRequest(s)}async function d(s){return await r.bulkApprove(s)}async function f(s){return await r.bulkReject(s)}async function l(s){return s.notificationDate===null&&delete s.notificationDate,await r.addEvent(s)}async function p(s){return s.sendNotification||delete s.notificationDate,await r.updateEvent(s)}async function q(s){return await r.deleteEvent(s)}async function h(){return await r.getRequestedLeaveYears()}return{requestList:o,fetchRequestList:t,getRequest:e,rejectRequest:n,approveRequest:a,cancelRequest:u,bulkApprove:d,bulkReject:f,addEvent:l,updateEvent:p,deleteEvent:q,getListRequestedLeaveYears:h}});export{x as u};
