import{J as _e,K as ge,L as ve,N as he,R as ye,j as l,d as ie,l as ce,cr as be,bf as ae,cp as ke,at as de,s as Q,h as xe,r as g,o as T,c as I,g as e,w as s,a as t,u as p,A as R,I as f,D as m,a2 as le,F as Z,ax as ue,ay as fe,_ as pe,q as we,cs as Ce,m as Te,az as Ie,S as Se,ct as Oe,cu as $e,cv as Ee,cw as De,cx as Ne,cy as Ae,cz as Fe,cA as Le,cB as Re,i as re,bU as ze,bO as Pe,b as je,e as Me,Y as K,E as Be,V as Ye,z as te}from"./index.611fe570.js";import{a as Ve}from"./index.a003826a.js";import{T as N}from"./TaskStatus.0f667542.js";import{d as Ue}from"./darkThemeModal.413e0de8.js";import{u as qe}from"./onboardingStore.b8199798.js";class We{employeeId;employeeTaskId;employeeTaskName;isComplete;isDelete;phqClientId;updateEmployeeId;id;subject;status;constructor(r){Object.assign(this,r)}}class Ge extends ve{constructor(r){const i=he().ClientSide.WorkforceManagement+"/v1";super(r,i)}async getListOfTasks(r){let i;try{const n=await this.axiosInstance.get(`/employee/${r}/tasks`);if(n&&n.data&&n.status===200)i=n.data;else throw new Error("Failed to parse Tasks list")}catch(n){console.error("An unexpected error occurred attempting to retrieve the Tasks list.",n)}return new Promise(n=>{n({list:i})})}async updateTask(r,i,n){try{const c=await this.axiosInstance.put(`/employee/${r}/tasks/${i}/complete?isComplete=${n}`);if(c&&c.status===200)return!0;throw new Error("Failed to update task.")}catch(c){console.error("An unexpected error occurred attempting to update the task.",c)}return!1}async removeTask(r,i){try{const n=await this.axiosInstance.delete(`/employee/${i}/tasks/${r}`);if(n&&n.status===200)return!0;throw new Error("Failed to delete task.")}catch(n){console.error("An unexpected error occurred attempting to delete the task.",n)}return!1}}const X=new Ge([_e,ge]),He=ye("onboardingTasks",()=>{const v=l(new Array),r=l(new We),i=l(0);async function n(k){let _=await X.getListOfTasks(k);(_.list.length==0||_.list==null)&&(_=await X.getListOfTasks(k)),v.value=_.list}async function c(k,_,z){return await X.updateTask(k,_,z)}async function b(k,_){return await X.removeTask(k,_)}return{listOfTasks:v,task:r,switchPage:i,getDataForOnePage:n,updateTask:c,removeTask:b}}),Y=v=>(ue("data-v-c4f437ce"),v=v(),fe(),v),Je=Y(()=>t("div",null," Tasks ",-1)),Ke={class:"d-flex align-items-center"},Xe={class:"text-center my-2 d-flex gap-2 align-items-center justify-content-center"},Qe=Y(()=>t("strong",null,"Loading...",-1)),Ze={class:"d-flex justify-content-end gap-3"},es=["onClick"],ss=["onClick"],ts=["onClick"],as={class:"d-flex py-3"},os=Y(()=>t("br",null,null,-1)),ns=Y(()=>t("br",null,null,-1)),ls=Y(()=>t("br",null,null,-1)),rs=ie({__name:"onboardingDetailTasks",setup(v){ce.add(be,ae,Ve,ae,ke);const r=He(),i=l(!0),n=l(!1),c=l(!1),b=l(""),k=l(null),_=l(!1),z=de(),S=Number(z.params.id),P=[{key:"employeeTaskName",label:"employeeTaskName",thStyle:{width:"90%"}},{key:"actions",label:"Actions",thStyle:{width:"10%"}}],x=l([]),{listOfTasks:y}=Q(r),j=l(!1),A=async(u,o)=>{c.value=!0;try{if(j.value=await r.updateTask(S,u,o),await r.getDataForOnePage(S),j.value){const w=i.value?N.New:N.Complete;await O(w)}}catch(w){console.error(w)}finally{c.value=!1}},U=async(u,o)=>{!u||!o||(_.value=!0,b.value=o,k.value=u)},O=async u=>{c.value=!0,u==N.New&&(n.value=!1,i.value=!0,x.value=y.value.filter(o=>!o.isComplete),c.value=!1),u==N.Complete&&(n.value=!0,i.value=!1,x.value=y.value.filter(o=>o.isComplete),c.value=!1)},L=async()=>{c.value=!0;try{await r.getDataForOnePage(S)}finally{x.value=y.value.filter(u=>u.isComplete==!1),c.value=!1}},q=async u=>{if(!!u){c.value=!0;try{if(await r.removeTask(u,S)){await r.getDataForOnePage(S);const w=i.value?N.New:N.Complete;await O(w)}}catch(o){console.error(o)}finally{_.value=!1,c.value=!1}}};return xe(async()=>{await L()}),(u,o)=>{const w=g("fs-card-header"),W=g("fs-spinner"),E=g("font-awesome-icon"),ee=g("fs-table"),se=g("fs-card-body"),M=g("fs-card");return T(),I(Z,null,[e(M,{id:"onboardingTaskList",class:"dashboard-card p-0","no-body":""},{default:s(()=>[e(w,{class:"fs-16px font-weight-bold d-flex align-items-center justify-content-between py-0 px-4"},{default:s(()=>[Je,t("div",Ke,[t("div",{onClick:o[0]||(o[0]=a=>O(p(N).New)),class:R(["action-button",i.value?"active":""])}," New ",2),t("div",{onClick:o[1]||(o[1]=a=>O(p(N).Complete)),class:R(["action-button",n.value?"active":""])}," Completed ",2)])]),_:1}),e(se,{class:"p-0"},{default:s(()=>[e(ee,{"thead-class":"d-none",busy:c.value,striped:"",hover:"",items:x.value,fields:P},{"table-busy":s(()=>[t("div",Xe,[e(W,{class:"align-middle"}),Qe])]),"cell(tasks)":s(a=>[f(m(a.item.employeeTaskName),1)]),"cell(actions)":s(a=>[t("div",Ze,[a.item.isComplete?(T(),I("div",{key:0,class:"d-flex flex-column text-success gap-1 cursor-pointer",onClick:D=>A(a.item.employeeTaskId,!a.item.isComplete)},[e(E,{icon:["fas","circle-check"],size:"lg"}),f(" Mark Incomplete ")],8,es)):le("",!0),a.item.isComplete?le("",!0):(T(),I("div",{key:1,class:"d-flex flex-column text-success gap-1 cursor-pointer",onClick:D=>A(a.item.employeeTaskId,!a.item.isComplete)},[e(E,{icon:["far","circle"],size:"lg"}),f(" Complete ")],8,ss)),t("div",{class:"d-flex flex-column text-danger gap-1 cursor-pointer",onClick:D=>U(a.item.employeeTaskId,a.item.employeeTaskName)},[e(E,{icon:["fal","circle-minus"],size:"lg"}),f(" Remove ")],8,ts)])]),_:1},8,["busy","items"])]),_:1})]),_:1}),e(Ue,{"show-modal":_.value,title:"Remove Task","ok-text":"YES, REMOVE","cancel-text":"NO","ok-text-variant":"danger",onClose:o[2]||(o[2]=a=>_.value=!1),onOk:o[3]||(o[3]=a=>q(k.value)),"cancel-btn-variant":"light"},{content:s(()=>[t("span",as,[e(E,{class:R(["me-2","text-danger"]),icon:["fa-solid","fa-circle-exclamation"],size:"lg"}),t("div",null,[f(" Are you sure you want to remove the following task? "),os,f(" This action cannot be undone. "),ns,ls,t("strong",null,'"'+m(b.value)+'"',1)])])]),_:1},8,["show-modal"])],64)}}});const is=pe(rs,[["__scopeId","data-v-c4f437ce"]]),V=v=>(ue("data-v-4153ffbf"),v=v(),fe(),v),cs={class:"d-flex align-items-center gap-2"},ds={class:"fs-5 font-weight-bold"},us=V(()=>t("span",null,"View Info",-1)),fs=V(()=>t("strong",null,"Employee Start Date",-1)),ps=V(()=>t("strong",null," Onboarding Assigned",-1)),ms=V(()=>t("strong",null,"Onboarding Started",-1)),_s=V(()=>t("strong",null," Last Accessed",-1)),gs={class:"d-flex align-items-center gap-2"},vs={class:"flex-1"},hs={class:"fs-12px text-status-inactive font-weight-normal"},ys={class:"h-100 p-0 d-flex flex-column justify-content-between"},bs=["onClick"],ks={class:"text-decoration-none",style:{cursor:"pointer"}},xs={class:"d-flex align-items-center gap-2"},ws={class:"flex-1"},Cs={class:"fs-12px text-status-inactive font-weight-normal"},Ts={class:"h-100 p-0 d-flex flex-column justify-content-between"},Is=["onClick"],Ss={class:"text-decoration-none",style:{cursor:"pointer"}},Os={class:"d-flex align-items-center gap-2"},$s={class:"flex-1"},Es={class:"fs-12px text-status-inactive font-weight-normal"},Ds={class:"h-100 p-0 d-flex flex-column justify-content-between"},Ns=["onClick"],As={class:"text-decoration-none",style:{cursor:"pointer"}},Fs=ie({__name:"onboardingDetail",setup(v){ce.add(we,Ce,ae,Te,Ie,Se,Oe,$e,Ee,De,Ne,Ae,Fe,Le,Re);const r=0,i=1,n=2,b=de().params.id,k=l(""),{currentOnboards:_}=Q(qe()),{fetchEmployeeDetails:z}=re(),{employeeDetails:S}=Q(re()),P=ze(),{listOfEmployeeInformation:x,progressOverview:y}=Q(P),{setLoading:j}=Pe(),A=l([]),U=l(0),O=l(0),L=l([]),q=l(0),u=l(0),o=l([]),w=l(0),W=l(0),E=l(0),ee={chart:{type:"radialBar",height:350},plotOptions:{radialBar:{startAngle:0,endAngle:360,hollow:{margin:0,size:"60%",background:"#fff",image:void 0,imageOffsetX:0,imageOffsetY:0,position:"front",dropShadow:{enabled:!1}},track:{background:"#D9D9D9",strokeWidth:"80%",margin:0,dropShadow:{enabled:!1}},dataLabels:{show:!0,name:{show:!1},value:{color:"#111",fontSize:"30px",fontWeight:"600",offsetY:13,show:!0}}}},responsive:[{breakpoint:1500,options:{plotOptions:{radialBar:{dataLabels:{value:{fontSize:"25px"}}}}}},{breakpoint:1300,options:{plotOptions:{radialBar:{dataLabels:{value:{offsetY:8,fontSize:"20px"}}}}}}],fill:{type:"gradient",gradient:{shade:"dark",type:"vertical",shadeIntensity:.5,gradientToColors:["#68D7EF"],inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,100]}},stroke:{lineCap:"round"}},se=()=>{K.push(`/onboarding/${b}/detail/subtab`)},M=a=>{K.push({name:a,params:{id:b}})};return je(()=>{const a=[],D=K.options.routes.find($=>$.name==="onboardingSubTab"),C=D?D.children:[];for(let $=0;$<C.length;$++)$>=1&&$<=8&&a.push({name:C[$].name});return a}),Me(async()=>{j(!0);try{Promise.allSettled([await P.getEmployeeInformation(+b),await z(b),await P.getProgressOverview(+b)]),A.value=x.value.filter(a=>a.progressSidebarType===r),U.value=A.value.length,O.value=A.value.filter(a=>a.isDone).length,L.value=x.value.filter(a=>a.progressSidebarType===i),q.value=L.value.length,u.value=L.value.filter(a=>a.isDone).length,o.value=x.value.filter(a=>a.progressSidebarType===n),w.value=o.value.length,W.value=o.value.filter(a=>a.isDone).length,x.value.length===0?E.value=0:E.value=Math.round((O.value+u.value+W.value)/x.value.length*100),_.value.find(a=>{a.id===Number(b)&&(k.value=a.fullName)})}catch(a){console.error(a)}finally{j(!1)}}),(a,D)=>{const C=g("font-awesome-icon"),$=g("fs-button"),oe=g("fs-container"),me=g("employee-status-badge"),G=g("fs-card-header"),h=g("fs-col"),F=g("fs-row"),H=g("fs-card-body"),J=g("fs-card");return T(),I("div",null,[e(oe,{fluid:"",class:"hq-pg__header d-flex align-items-center justify-content-between flex-row"},{default:s(()=>[t("div",cs,[e(C,{onClick:D[0]||(D[0]=d=>p(K).push({name:"onboarding"})),icon:["fal","circle-arrow-left"],size:"2x",class:"text-success cursor-pointer"}),t("div",ds,m(p(S).fullName),1)]),e($,{variant:"outline-primary",onClick:se},{default:s(()=>[us]),_:1})]),_:1}),e(oe,{fluid:"",class:"contain hq-pg__container dashboard_container"},{default:s(()=>[e(F,{class:"mb-3"},{default:s(()=>[e(h,{md:"6",xs:"12"},{default:s(()=>[e(J,{"no-body":"",class:"h-100"},{default:s(()=>[e(G,{class:"fs-16px font-weight-bold p-3 d-flex justify-content-between align-items-center"},{default:s(()=>[f(" Onboarding Progress Overview "),e(me,{"status-id":p(S).employeeStatusId,"status-content":p(Be)[p(S).employeeStatusId]},null,8,["status-id","status-content"])]),_:1}),e(H,{class:"d-flex align-items-center"},{default:s(()=>[e(F,{class:"w-100"},{default:s(()=>[e(h,{cols:"4"},{default:s(()=>[e(p(Ye),{options:ee,series:[E.value]},null,8,["series"])]),_:1}),e(h,{cols:"8",class:"d-flex flex-column justify-content-center"},{default:s(()=>[e(F,{class:"mb-2"},{default:s(()=>[e(h,{cols:"6"},{default:s(()=>[fs]),_:1}),e(h,{cols:"6"},{default:s(()=>[f(m(p(y)?p(y)[0]?.employeeStartDate:""),1)]),_:1})]),_:1}),e(F,{class:"mb-2"},{default:s(()=>[e(h,{cols:"6"},{default:s(()=>[ps]),_:1}),e(h,{cols:"6"},{default:s(()=>[f(m(p(y)?p(y)[0]?.onboardingAssigned:""),1)]),_:1})]),_:1}),e(F,{class:"mb-2"},{default:s(()=>[e(h,{cols:"6"},{default:s(()=>[ms]),_:1}),e(h,{cols:"6"},{default:s(()=>[f(m(p(y)?p(y)[0]?.onboardingStarted:""),1)]),_:1})]),_:1}),e(F,{class:"mb-2"},{default:s(()=>[e(h,{cols:"6"},{default:s(()=>[_s]),_:1}),e(h,{cols:"6"},{default:s(()=>[f(m(p(y)?p(y)[0]?.lastAccessed:""),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(h,{md:"6",xs:"12"},{default:s(()=>[e(J,{"no-body":"",class:"h-100"},{default:s(()=>[e(G,{class:"fs-16px font-weight-bold p-3 d-flex align-items-center justify-content-between"},{default:s(()=>[t("div",gs,[e(C,{icon:["fal","user"],class:"text-cornflower-blue-dark",size:"lg"}),f(" Employee Information ")]),t("div",vs,[f(m(O.value),1),t("span",hs,m(`/${U.value} Done`),1)])]),_:1}),e(H,{class:"p-0"},{default:s(()=>[t("ul",ys,[(T(!0),I(Z,null,te(A.value,(d,B)=>(T(),I("li",{key:"employee"+d.progressSidebarId,class:"d-flex flex-column border-gray py-3 border-gray px-3 link-item h-100",onClick:ne=>M(d.progressSidebarUrl)},[t("div",{class:R([d.isDone?"item-done":"","d-flex gap-2 align-items-center"])},[e(C,{icon:d.isDone?["fa","circle-check"]:["fal",`circle-${B+1}`],class:"text-task-cyan fs-24px"},null,8,["icon"]),t("span",ks,m(d.progressSidebarName),1)],2)],8,bs))),128))])]),_:1})]),_:1})]),_:1})]),_:1}),e(F,{class:"mb-3"},{default:s(()=>[e(h,{md:"6",xs:"12"},{default:s(()=>[e(J,{"no-body":"",class:"h-100"},{default:s(()=>[e(G,{class:"fs-16px font-weight-bold p-3 d-flex align-items-center justify-content-between"},{default:s(()=>[t("div",xs,[e(C,{icon:["fal","city"],class:"text-task-blue",size:"lg"}),f(" Employer Information ")]),t("div",ws,[f(m(O.value),1),t("span",Cs,m(`/${w.value} Done`),1)])]),_:1}),e(H,{class:"p-0"},{default:s(()=>[t("ul",Ts,[(T(!0),I(Z,null,te(o.value,(d,B)=>(T(),I("li",{key:"employee"+d.progressSidebarId,class:"d-flex flex-column border-gray py-3 border-gray px-3 link-item h-100",onClick:ne=>M(d.progressSidebarUrl)},[t("div",{class:R([d.isDone?"item-done":"","d-flex gap-2 align-items-center"])},[e(C,{icon:d.isDone?["fa","circle-check"]:["fal",`circle-${B+1}`],class:"text-task-cyan fs-24px"},null,8,["icon"]),t("span",Ss,m(d.progressSidebarName),1)],2)],8,Is))),128))])]),_:1})]),_:1})]),_:1}),e(h,{md:"6",xs:"12"},{default:s(()=>[e(J,{"no-body":"",class:"h-100"},{default:s(()=>[e(G,{class:"fs-16px font-weight-bold p-3 d-flex align-items-center justify-content-between"},{default:s(()=>[t("div",Os,[e(C,{icon:["fal","landmark"],class:"text-boat-orchid",size:"lg"}),f(" Federal Reporting ")]),t("div",$s,[f(m(u.value),1),t("span",Es,m(`/${q.value} Done`),1)])]),_:1}),e(H,{class:"p-0"},{default:s(()=>[t("ul",Ds,[(T(!0),I(Z,null,te(L.value,(d,B)=>(T(),I("li",{key:"employee"+d.progressSidebarId,class:"d-flex flex-column border-gray py-3 border-gray px-3 link-item h-100",onClick:ne=>M(d.progressSidebarUrl)},[t("div",{class:R([d.isDone?"item-done":"","d-flex gap-2 align-items-center"])},[e(C,{icon:d.isDone?["fa","circle-check"]:["fal",`circle-${B+1}`],class:"text-task-cyan fs-24px"},null,8,["icon"]),t("span",As,m(d.progressSidebarName),1)],2)],8,Ns))),128))])]),_:1})]),_:1})]),_:1})]),_:1}),t("div",null,[e(is)])]),_:1})])}}});const Ms=pe(Fs,[["__scopeId","data-v-4153ffbf"]]);export{Ms as default};
