import{u as E}from"./bulletinBoardStore.4a56183b.js";import{d as I,l as N,c3 as T,aJ as A,c4 as P,af as U,b1 as F,c5 as L,c6 as S,y as M,at as V,bb as $,j as m,e as R,r as p,o as j,c as q,a as t,g as e,w as o,u,C as r,I as _,D as H}from"./index.611fe570.js";import{_ as O,D as z}from"./Bulletin.21652042.js";const G={id:"view-bulletinDetail"},J={class:"view-bulletin"},Q={class:"view-bulletin__header d-flex justify-content-between m-3"},K={class:"d-flex align-items-center"},W=t("strong",{class:"ms-2"},"Post Detail",-1),X={class:"d-flex"},Y=t("hr",{class:"my-0"},null,-1),Z={class:"w-100 d-flex align-items-center justify-content-between"},ee=t("div",{class:"title"},"Delete Post",-1),te={class:"p-3"},ae={class:"lh-base"},le=t("br",null,null,-1),oe={class:"fw-bold dataTitle"},ue=I({__name:"viewBulletinDetail",setup(ne){N.add(T,A,P,U,F,L,S);const h=M(),v=V(),i=E(),{downloadFile:D,getFile:w}=$(),d=m({postId:null,title:null,postDescription:null,postContent:null,thumbnailUrl:null,updatedEmployeeFullName:null,createdEmployeeFullName:null,isPublishedOnESSDashboard:null,essDashboardPublishDate:null,essDashboardExpirationDate:null,postCategoryId:null,categoryName:null,categoriesColor:null,statusId:null,updatedEmployeeId:null,phqClientId:null,createdEmployeeId:null,createdDateUTC:null,updatedDateUTC:null,postDocumentMetadata:[],documentCategoryName:z}),c=m("");R(async()=>{await i.fetchBulletinBoardDetail(Number(v.params.id)),d.value=i.bulletinBoardDetail;const s="/images/default-thumbnail.png";if(i.bulletinBoardDetail.thumbnailUrl)try{const a=await w(i.bulletinBoardDetail.thumbnailUrl),l=new FileReader;l.readAsDataURL(a.data),l.onloadend=async function(){c.value=l.result}}catch{c.value=s}else c.value=s});const f=m(!1),b=m(null),y=async()=>{i.deletePost(b.value),h.push({name:"bulletinBoard"})},C=()=>{h.push({name:"bulletinBoard"})};async function g(s){await D(s.filePath)}return(s,a)=>{const l=p("fs-button"),B=p("fs-link"),x=p("fs-modal");return j(),q("div",G,[t("div",J,[t("div",Q,[t("div",K,[e(l,{variant:"outline-info",class:"btn rounded-circle icon-arrow-left px-2",onClick:C},{default:o(()=>[e(u(r),{icon:["fal","fa-arrow-left"]})]),_:1}),W]),t("div",X,[e(l,{variant:"outline-info",class:"btn btn-custom py-0",onClick:a[0]||(a[0]=n=>s.$router.push({name:"editPost",params:{id:d.value.postId}}))},{default:o(()=>[e(u(r),{icon:["fal","fa-pen-to-square"]})]),_:1}),e(l,{variant:"outline-danger",class:"btn btn-custom py-0",onClick:a[1]||(a[1]=n=>f.value=!0)},{default:o(()=>[e(u(r),{icon:["fal","fa-trash-can"]})]),_:1})])]),Y,e(O,{thumbnail:c.value,dataBulletinBoardDetail:d.value,onDownload:g},null,8,["thumbnail","dataBulletinBoardDetail"])]),e(x,{id:"delete-modal",ref:"modal","content-class":"content-fsModal","body-class":"body-fsModal","header-bg-variant":"blue","header-close-variant":"light","header-text-variant":"white","hide-header-close":"true",modelValue:f.value,"onUpdate:modelValue":a[2]||(a[2]=n=>f.value=n),onClose:a[3]||(a[3]=n=>f.value=!1),onOk:y},{"modal-header":o(({cancel:n})=>[t("div",Z,[ee,e(B,{class:"text-secondary",tag:"a",onClick:n},{default:o(()=>[e(u(r),{icon:["fal","times"],size:"lg",class:"text-white"})]),_:2},1032,["onClick"])])]),default:o(()=>[t("div",te,[t("h5",ae,[e(u(r),{icon:["fal","fa-circle-exclamation"],class:"me-2 text-danger"}),_(" Are you sure you want to delete the following post? "),le,t("span",oe,H(d.value?.title),1)])])]),"modal-footer":o(({ok:n,cancel:k})=>[e(l,{onClick:k,variant:"light",class:"px-4 py-2 fw-semibold"},{default:o(()=>[_("CANCEL ")]),_:2},1032,["onClick"]),e(l,{onClick:()=>{b.value=d.value?.postId,n()},variant:"danger",class:"px-4 py-2 fw-semibold"},{default:o(()=>[_("DELETE ")]),_:2},1032,["onClick"])]),_:1},8,["modelValue"])])}}});export{ue as default};
