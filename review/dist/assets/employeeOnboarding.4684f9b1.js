import{d as T,l as M,bS as j,b as g,r as l,o as C,f as F,w as t,g as e,I as y,D as w,u,V as z,C as U,a as p,J as Y,K as H,L as J,N as K,O as D,R as V,j as O,s as I,e as Q,c as R,a3 as X,A as E,i as $,bT as Z,at as ee}from"./index.611fe570.js";import{S as te}from"./grid.module.3b00878a.js";import{B as ae}from"./BryntumGrid.2c4be387.js";import{f as N}from"./gridConfigDefaults.8c72c19b.js";import{T as h}from"./TaskStatus.0f667542.js";import{e as se}from"./employeeHeader.c061ea79.js";const oe=p("h2",{class:"hq-pg__title text-employee-blue"},"Overview",-1),ne=p("strong",null,"Date Started",-1),re=p("strong",null,"Date Completed",-1),le=p("strong",null,"Days Elapsed",-1),de=p("strong",null,"Last Accessed",-1),ce=p("b",null,"Onboarding Progress",-1),ie=["href"],ue=T({__name:"employeeOnboardingOverviewWidget",props:{employeeOnboarding:{default:null},employeeDetails:{default:null}},setup(n){const o=n;M.add(j);const a=o.employeeOnboarding,d={chart:{type:"radialBar"},plotOptions:{radialBar:{hollow:{size:"60%"},dataLabels:{name:{show:!1},value:{fontSize:"35px",offsetY:10}}}},labels:["Onboarding progress"]},c=[a.onboardingProgress],_=g(()=>!a||!a.dateStarted?"Not Started Yet":a.dateStarted),m=g(()=>!a||!a.dateCompleted?"Not Completed":a.dateCompleted),f=g(()=>{if(!a||!a.dateStarted)return 0;const k=new Date,i=new Date(a.dateStarted),b=Math.abs(k.getTime()-i.getTime());return Math.ceil(b/(1e3*60*60*24))}),S=g(()=>!a||!a.lastAccessed?"Not Accessed Yet":a.lastAccessed);return(k,i)=>{const b=l("fs-card-header"),s=l("fs-col"),r=l("fs-row"),v=l("fs-container"),x=l("fs-card-body"),A=l("fs-button"),W=l("fs-card-footer"),G=l("fs-card");return C(),F(G,{class:"dashboard-card","no-body":""},{default:t(()=>[e(b,{class:"dashboard-card__header"},{default:t(()=>[oe]),_:1}),e(x,{class:"dashboard-card__content"},{default:t(()=>[e(v,{fluid:"",class:"mt-2"},{default:t(()=>[e(r,{class:"dashboard__row"},{default:t(()=>[e(s,{cols:"8"},{default:t(()=>[e(r,{class:"py-1"},{default:t(()=>[e(s,{cols:"6"},{default:t(()=>[ne]),_:1}),e(s,null,{default:t(()=>[y(w(u(_)),1)]),_:1})]),_:1}),e(r,{class:"py-1"},{default:t(()=>[e(s,{cols:"6"},{default:t(()=>[re]),_:1}),e(s,null,{default:t(()=>[y(w(u(m)),1)]),_:1})]),_:1}),e(r,{class:"py-1"},{default:t(()=>[e(s,{cols:"6"},{default:t(()=>[le]),_:1}),e(s,null,{default:t(()=>[y(w(u(f)),1)]),_:1})]),_:1}),e(r,{class:"py-1"},{default:t(()=>[e(s,{cols:"6"},{default:t(()=>[de]),_:1}),e(s,null,{default:t(()=>[y(w(u(S)),1)]),_:1})]),_:1})]),_:1}),e(s,{cols:"3",class:"mr-50"},{default:t(()=>[e(r,null,{default:t(()=>[ce]),_:1}),e(r,null,{default:t(()=>[e(u(z),{options:d,series:c,height:"200px"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(W,{class:"dashboard-card__footer"},{default:t(()=>[e(A,{variant:"outline-primary",class:"btn outline-primary border-0"},{default:t(()=>[e(u(U),{icon:["fal","envelope"]}),p("a",{style:{"text-decoration":"none"},href:"mailto:"+n.employeeDetails.email},"Send Email To "+w(n.employeeDetails.fullName),9,ie)]),_:1})]),_:1})]),_:1})}}});class _e{taskStatusId;constructor(o){Object.assign(this,o)}}const P="task";class fe extends J{constructor(o){const a=K().ClientSide.WorkforceManagement+"/v1";super(o,a,"/task")}async getTasks(){let o=new Array;try{o=await this.PerformFetch(`${P}`)}catch(a){console.error(this.errormessage(D.Fetch),a)}return o}async updateTaskStatus(o,a){let d;try{await this.PerformPost(`${P}/${o}/status`,new _e({taskStatusId:a}))}catch(c){console.error(this.errormessage(D.Update),c)}return d}}const B=new fe([Y,H]),L=V("task",()=>{const n=O(new Array);async function o(){n.value=await B.getTasks()}async function a(d,c){const _=await B.updateTaskStatus(d,c);n.value=n.value.map(m=>d===_.id?_:m)}return{taskList:n,fetchTaskList:o,updateTaskStatus:a}}),pe={class:"action-grid list__table list__table--onpage list__b-grid--hover"},me=T({__name:"taskList",props:{taskStatusFilter:{default:null}},setup(n,{emit:o}){const a=n,d={field:"name",ascending:!0},c=O(null),_=g(()=>({...N.gridConfig,minHeight:"100%",emptyText:"",columns:[{flex:2,text:"Title",id:"title",field:"title",groupable:!1,sortable:!0,htmlEncode:!1,renderer:({record:s})=>`<span class="${s.data.taskStatusId===h.Complete?"action-item__table--completed":""}">${s.data.title}</span>`},{flex:2,text:"Complete",id:"taskStatusId",groupable:!1,htmlEncode:!1,vue:!0,align:"center",renderer:({record:s})=>({is:"fs-form-checkbox",modelValue:s.data.taskStatusId===h.Complete,onmousedown:(r,v=s.data.id)=>{r.stopPropagation(),b(r,v)}})}]})),m=g(()=>{const s=new te({...N.gridStoreConfig,sorters:[d],data:f.value});return s.data=f.value,s}),f=g(()=>a.taskStatusFilter!==null?i.value.filter(s=>Array.isArray(a.taskStatusFilter)?a.taskStatusFilter.indexOf(s.taskStatusId)>=0:s.taskStatusId===a.taskStatusFilter):i.value),{fetchTaskList:S,updateTaskStatus:k}=L(),{taskList:i}=I(L());async function b(s,r){setTimeout(async()=>{s.target.disabled=!0;const v=f.value.findIndex(A=>A.id===r),x=f.value[v].taskStatusId===h.Complete?h.InProgress:h.Complete;await k(r,x),s.target.disabled=!1},100)}return Q(async()=>{await S()}),(s,r)=>(C(),R("div",pe,[e(u(ae),X(u(_),{store:u(m),ref_key:"grid",ref:c}),null,16,["store"])]))}}),ge=p("div",{class:"dashboard-card__icon-and-heading"},[p("h2",{class:"hq-pg__title text-cyan"},"Tasks")],-1),be={class:"ms-auto filter-tabs"},he=T({__name:"taskWidget",setup(n){const o=O("new");function a(d){o.value=d}return(d,c)=>{const _=l("fs-button"),m=l("fs-button-group"),f=l("fs-card-header"),S=l("fs-card-body"),k=l("fs-card");return C(),F(k,{class:"dashboard-card","no-body":""},{default:t(()=>[e(f,{class:"dashboard-card__header"},{default:t(()=>[ge,p("div",be,[e(m,null,{default:t(()=>[e(_,{variant:"link",onClick:c[0]||(c[0]=i=>a("new")),class:E({active:o.value==="new"})},{default:t(()=>[y("New ")]),_:1},8,["class"]),e(_,{variant:"link",onClick:c[1]||(c[1]=i=>a("completed")),class:E({active:o.value==="completed"})},{default:t(()=>[y("Completed ")]),_:1},8,["class"])]),_:1})])]),_:1}),e(S,{class:"dashboard-card__content"},{default:t(()=>[e(me,{"task-status-filter":o.value==="completed"?u(h).Complete:[u(h).New,u(h).InProgress]},null,8,["task-status-filter"])]),_:1})]),_:1})}}});class ye{employeeId;onboardingId;dateStarted;dateCompleted;lastAccessed;onboardingProgress;constructor(o){Object.assign(this,o)}}const q=V("employeeOnboarding",()=>{const n=O(new ye),o=g(()=>n.value);async function a(d){n.value={employeeId:"1",onboardingId:"1",dateStarted:"06/01/2022",dateCompleted:null,lastAccessed:"06/10/2022",onboardingProgress:25}}return{employeeOnboarding:n,getEmployeeOnboarding:o,fetchEmployeeOnboarding:a}}),ke={class:"hq-pg"},Se=p("h2",{class:"hq-pg__title"},"Onboarding",-1),Ae=T({__name:"employeeOnboarding",async setup(n){let o,a;const{getEmployeeOnboarding:d}=I(q()),{fetchEmployeeOnboarding:c}=q(),{getEmployeeDetails:_}=I($()),{fetchEmployeeDetails:m}=$(),f=g(()=>ee().params?.id?.toString());return c(f.value),[o,a]=Z(()=>m(f.value)),await o,a(),(S,k)=>{const i=l("fs-col"),b=l("fs-button"),s=l("fs-row"),r=l("fs-container");return C(),R("div",ke,[e(se,{employeeId:"employeeId"}),e(r,{fluid:"",class:"hq-pg__header hq-pg__header--sticky contain"},{default:t(()=>[e(s,{"align-v":"center"},{default:t(()=>[e(i,null,{default:t(()=>[Se]),_:1}),e(i,{cols:"auto"},{default:t(()=>[e(b,{variant:"outline-primary",class:"btn outline-primary"},{default:t(()=>[y("VIEW ONBOARDING")]),_:1})]),_:1}),e(i,{cols:"auto"},{default:t(()=>[e(b,{variant:"btn-primary",class:"btn btn-primary"},{default:t(()=>[y("APPROVE ONBOARDING")]),_:1})]),_:1})]),_:1})]),_:1}),e(r,{fluid:"",class:"contain hq-pg__container"},{default:t(()=>[e(s,{class:"dashboard__row"},{default:t(()=>[e(i,{cols:"6"},{default:t(()=>[e(r,{fluid:"",class:"contain hq-pg__container"},{default:t(()=>[e(s,{class:"dashboard__row"},{default:t(()=>[e(i,null,{default:t(()=>[e(ue,{employeeOnboarding:u(d),employeeDetails:u(_)},null,8,["employeeOnboarding","employeeDetails"])]),_:1})]),_:1}),e(s,{class:"dashboard__row mt-3"},{default:t(()=>[e(i,null,{default:t(()=>[e(he)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}});export{Ae as default};
