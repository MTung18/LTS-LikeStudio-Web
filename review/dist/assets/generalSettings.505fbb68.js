import{J as $,K as O,L as T,N as P,R as B,j as m,d as A,l as j,aJ as J,a_ as R,bg as W,cp as D,Q as L,s as X,e as K,r as i,o as d,c as h,a as c,g as a,w as n,f as Q,I as S,a2 as f,D as b,aX as E,ax as z,ay as Y,_ as Z}from"./index.611fe570.js";import{P as ee}from"./PaymentMethod.1e9311f3.js";class te{name;value;constructor(t){Object.assign(this,t)}}class ae extends T{url;keyHrContactInformation;keyGetPaymentMethod;keyUpdatePaymentMethod;constructor(t){const e=P().ClientSide.WorkforceManagement+"/v1";super(t,e),this.url="GeneralClientSettings",this.keyHrContactInformation="GeneralClientSettings",this.keyGetPaymentMethod="getPaymentMethod",this.keyUpdatePaymentMethod="updatePaymentMethod"}async getEmployeeSetting(){let t;const e=P().ClientSide.WorkforceEmployeeManagement+"/api/v1";try{const r=await this.axiosInstance.get(`${e}/EmployeePayrollAndTax/getPaymentMethod`);if(r&&r.status===200)t=r.data;else throw new Error("Failed to parse setting")}catch{console.error("An unexpected error occurred attempting to retrieve the setup")}return t}async getGeneralClientSetting(){let t;try{const e=await this.axiosInstance.get(`${this.keyHrContactInformation}`);if(e&&e.status===200)t=e.data;else throw new Error("Failed to parse setting")}catch{console.error("An unexpected error occurred attempting to retrieve the setup")}return t}async changeSetting(t){try{const e=await this.axiosInstance.post(this.url,t);return e&&e.status===200?{success:!0}:{success:!1,errorMessage:"An unexpected error occurred attempting to add request."}}catch(e){return{success:!1,status:e.response.status,errorMessage:"An unexpected error occurred attempting to add request."}}}async saveHrContactInformation(t){try{const e=await this.axiosInstance.put(this.keyHrContactInformation,t);return e&&e.status===200?{success:!0}:{success:!1,errorMessage:"An unexpected error occurred attempting to add request."}}catch(e){return{success:!1,status:e.response.status,errorMessage:"An unexpected error occurred attempting to add request."}}}async getPaymentMethod(){const t=await this.getEmployeeSetting();return t?JSON.parse(t.value):new ee}async savePaymentMethod(t){const e=new te;return e.name=this.keyUpdatePaymentMethod,e.value=JSON.stringify(t),await this.changeSetting(e)}}const y=new ae([$,O]),q=B("setup",()=>{const o=m({}),t=m({});async function e(){o.value=await y.getGeneralClientSetting()}async function r(){t.value=await y.getPaymentMethod()}async function p(s){return await y.savePaymentMethod(s)}return{hrContactInformation:o,fetchHrContactInformation:e,paymentMethod:t,fetchPaymentMethod:r,savePaymentMethod:p}});class N{hrContactEmail;hrContactPhoneNumber;constructor(t){Object.assign(this,t)}}const I=o=>(z("data-v-a69a1056"),o=o(),Y(),o),se={class:"tab-container"},ne={class:"form-section"},oe={class:"header"},re=I(()=>c("div",{class:"title"},"HR Contact Information",-1)),ce={key:1,class:"button-groups"},ie={key:0,class:"details"},le={class:"detail-group"},ue=I(()=>c("div",{class:"label"},"Email",-1)),de=I(()=>c("div",{class:"label"},"Phone Number",-1)),me={key:1,class:"form"},pe=A({__name:"hrContactInformation",setup(o){j.add(J,R,W,D);const{notifySuccess:t,notifyError:e}=L(),{fetchHrContactInformation:r}=q(),p=X(q()),s=m(new N),_=m(new N),u=m(!1),k=m(null),V=()=>{s.value={..._.value},g()},H=async()=>{const{errors:x}=await k.value.validate();if(Object.keys(x).length===0){const l=await y.saveHrContactInformation(s.value);l.success?(t("HR Contact updated."),_.value={...s.value},g()):e(l.errorMessage,null,"Error")}},g=async()=>{u.value=!u.value};return K(async()=>{await r(),s.value=p.hrContactInformation.value,_.value={...s.value}}),(x,l)=>{const M=i("fs-col"),F=i("font-awesome-icon"),v=i("fs-button"),C=i("fs-row"),G=i("fs-container"),U=i("VeeForm");return d(),h("div",se,[c("div",ne,[c("div",oe,[a(G,{fluid:""},{default:n(()=>[a(C,{"align-v":"center"},{default:n(()=>[a(M,{cols:"auto"},{default:n(()=>[re]),_:1}),a(M,{cols:"auto",class:"action-buttons"},{default:n(()=>[u.value?f("",!0):(d(),Q(v,{key:0,variant:"outline-primary",onClick:g,style:{gap:"8px"}},{default:n(()=>[a(F,{icon:"fa-light fa-pen-to-square"}),S(" Edit")]),_:1})),u.value?(d(),h("div",ce,[a(v,{onClick:V,variant:"outline-secondary"},{default:n(()=>[S("Cancel")]),_:1}),a(v,{onClick:H,variant:"primary"},{default:n(()=>[S("Save")]),_:1})])):f("",!0)]),_:1})]),_:1})]),_:1})]),u.value?f("",!0):(d(),h("div",ie,[c("div",le,[ue,c("span",null,b(s.value.hrContactEmail),1)]),c("div",null,[de,c("div",null,b(s.value.hrContactPhoneNumber),1)])])),u.value?(d(),h("div",me,[a(U,{ref_key:"form",ref:k},{default:n(()=>[a(C,{class:"align-items-center pt-2"},{default:n(()=>[a(E,{modelValue:s.value.hrContactPhoneNumber,"onUpdate:modelValue":l[0]||(l[0]=w=>s.value.hrContactPhoneNumber=w),type:"fsTextInput",maskFormat:"(###) ###-####",name:"Phone Number",label:"Phone Number",rules:"phoneNumber|required",required:!0},null,8,["modelValue"])]),_:1}),a(C,{class:"align-items-center pt-2"},{default:n(()=>[a(E,{type:"fsTextInput",modelValue:s.value.hrContactEmail,"onUpdate:modelValue":l[1]||(l[1]=w=>s.value.hrContactEmail=w),name:"Email",label:"Email",rules:"required|email|max:255",maxlength:"255",required:!0},null,8,["modelValue"])]),_:1})]),_:1},512)])):f("",!0)])])}}});const he=Z(pe,[["__scopeId","data-v-a69a1056"]]),_e={class:"hq-pg"},fe=c("h2",{class:"hq-pg__title"},"General",-1),ve=A({__name:"generalSettings",setup(o){return(t,e)=>{const r=i("fs-col"),p=i("fs-row"),s=i("fs-container");return d(),h("div",_e,[a(s,{fluid:"",class:"hq-pg__header hq-pg__header--sticky contain"},{default:n(()=>[a(p,{"align-v":"center"},{default:n(()=>[a(r,{cols:"auto"},{default:n(()=>[fe]),_:1})]),_:1})]),_:1}),a(he)])}}});export{ve as default};
