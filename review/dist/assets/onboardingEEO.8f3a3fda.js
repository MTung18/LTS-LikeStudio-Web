import{d as je,l as Ye,cb as We,c5 as Je,bK as Ke,dt as Xe,du as Ze,a0 as et,Q as tt,bb as at,T as lt,y as nt,at as Le,s as me,bO as Ae,b as pe,j as p,e as Re,aW as ot,r as _,o as d,c,g as e,w as o,a as l,u as v,a2 as x,I as g,F as j,z as te,f as ae,A as st,bd as it,be as rt,dG as yt,D as ce,cN as ke,ax as dt,ay as ut,_ as ct,ct as bt,a_ as wt,c4 as Ue,bm as kt,i as He,E as Be}from"./index.611fe570.js";import{i as De,b as ft}from"./index.a003826a.js";import{F as mt}from"./FormField.7af7663e.js";import{a as Ge,u as Qe}from"./onboardingQuickHireEEOStore.792fa940.js";import{S as St}from"./SignaturePad.d0e9082f.js";import{D as pt}from"./darkThemeModal.c38e7d4c.js";import{u as fe}from"./onboardingStore.b8199798.js";import{F as Et}from"./FormStatus.4b30ff79.js";import{i as _t}from"./fileUtils.932fb01d.js";import{u as vt}from"./reportTemplateStore.f0128478.js";import{S as Pe}from"./StaticFiles.040feba2.js";const w=N=>(dt("data-v-f9155df7"),N=N(),ut(),N),xt={class:"d-flex justify-content-between align-items-center form_header px-4"},Ft={class:"title"},Ct={key:0,class:"font-weight-bold form_title"},Nt={key:1,class:"font-weight-bold form_title"},It={class:"d-flex align-items-center"},$t={key:0},Ot={class:"p-4"},Vt={key:0},Tt=w(()=>l("div",{class:"d-flex align-items-center gap-3"},null,-1)),Ut={key:0,class:"w-100"},Dt={class:"d-flex align-items-center flex-1 w-100 justify-content-between"},Pt={style:{flex:"1"}},jt=["onClick"],Lt={key:1,class:"d-flex align-items-center justify-content-between w-100"},At=w(()=>l("div",{class:"text-gray"}," No file has been uploaded. ",-1)),Rt={key:0},Mt={key:1},qt={class:"d-flex align-items-center gap-2"},zt={class:"d-flex align-items-center"},Ht={key:0,class:"p-3"},Bt={class:"d-flex align-items-center flex-1 w-100 justify-content-between"},Gt={style:{flex:"1"}},Qt=["onClick"],Yt={key:1,class:"p-3 d-flex flex-column align-items-center gap-3"},Wt=w(()=>l("div",{class:"text-status-inactive"}," No file has been uploaded. ",-1)),Jt=w(()=>l("hr",null,null,-1)),Kt=w(()=>l("p",{style:{textAlign:"justify"}},"The Equal Employment Opportunity Commission (EEOC) requires organizations with 100 or more employees to complete an EEO-1 report each year. Your employer invites you to self-identify gender and race/ethnicity. Completion of this data is VOLUNTARY and will not affect your opportunity for employment, or terms or conditions of employment. This form will be used for EEO-1 reporting purposes only and will be kept separate from all other personnel records only accessed by Human Resources.",-1)),Xt=w(()=>l("hr",null,null,-1)),Zt=w(()=>l("span",{style:{textTransform:"uppercase",marginBottom:"10px"}},"Please answer the following questions:",-1)),ea={class:"form_label"},ta=w(()=>l("label",{class:"mb-2"},"What is your Gender?",-1)),aa={class:"form_label"},la=w(()=>l("label",null,"What is your race/ethnicity?",-1)),na=w(()=>l("div",{class:"form_sub-label mb-2"}," Please mark the box that describes the race/ethnicity category with which you primarily identify. ",-1)),oa=["innerHTML"],sa=w(()=>l("hr",null,null,-1)),ia=w(()=>l("h5",null,"Thank you for your participation.",-1)),ra={class:"form_label"},da=w(()=>l("label",null,"Date",-1)),ua={class:"d-flex align-items-center",style:{gap:"10px"}},ca=w(()=>l("hr",null,null,-1)),fa=w(()=>l("p",{style:{fontSize:"12px",color:"#6E7C8F"}}," Refusal to complete this form will not subject you to any adverse treatment. This form will be used for governmental reporting purposes only. If we have not received your completed form, the Company will interpret that to mean you have declined self-identification and will be required to obtain the necessary information from visual identification and/or other available information. ",-1)),ma={class:"d-flex py-3"},pa=w(()=>l("div",null,[g(" Are you sure you want to leave this page? "),l("br"),g(" You have unsaved changes, your data will be lost. ")],-1)),_a=je({__name:"onboardingEEOSelfIdentification",setup(N){Ye.add(De,ft,We,Je,Ke,Xe,Ze);const{responsive:k}=et(),{notifyError:D}=tt(),L=at(),G=lt(),Q=nt(),le=Le(),{genderList:_e,raceList:Se,getOnboardingEEOSelfIdentification:Y,updateOnboardingEEOSelfIdentification:F}=Ge(),{onboardingEEOSelfIdentification:W}=me(Ge()),{markOnboardingSidenavItemAsDone:ne,getOnboardingSideNavItems:ve}=fe(),{onboardingSideNavItem:Ee}=me(fe()),{setLoading:S}=Ae(),{getDocumentTemplate:he}=vt(),xe=pe(()=>G?.activeUserClient?.clientGuid??"Shared"),M={note:"",firstName:"",middleInitial:"",lastName:"",jobTitle:"",gender:null,race:null,signaturePath:null,signatureValue:null,date:null,time:null,formStatus:null,formFiles:"formFiles"},b=mt.EEOOnboard,I=pe(()=>le.params.id),$=p(null),O=p(!1),y=p([]),f=p(M),V=p(!1),J=p({path:"",fileObject:null,name:""}),K=p(""),ge=p(!1),T=p(void 0),P=p(!1),ye=p(!1),be=p(""),A=p(null),X=p([]),oe=p(null),we=p(null),se=async(a,t)=>{S(!0),a.preventDefault();try{const s=y.value.map(E=>({formFieldId:T.value.fieldModels.find(de=>de.fieldKey==="formFiles").formFieldId,fileName:E.fileName,filePath:E.filePath,description:"",payload:"",documentCategory:null}));T.value.uploadFileStateForms=s,f.value.formStatus=Et.HRCompleted,f.value.formFiles="form files";const m=T.value.fieldModels.map(E=>{const de=f.value[E.fieldKey]||"";return{...E,fieldValue:de}}),{formStatus:C,formFiles:Z,note:U,...ee}=f.value;let H=!0;for(const E in ee)if(ee[E]!==""){H=!1;break}T.value.fieldModels=m,O.value=!1,y.value.forEach(async E=>{await q(E.filePath,E.fileObject)}),H&&y.value.length===0?await ne(A.value.progressSidebarId,!1,Number(I.value)):H&&y.value.length>0&&await ne(A.value.progressSidebarId,!0,Number(I.value)),S(!0),X.value.forEach(E=>{L.deleteFile(E),X.value=[]}),F(Number(I.value),T.value),t&&Q.push({name:"onboardingVEVRAASelfIdentification"})}catch(s){console.error(s)}finally{S(!1)}};function Fe(a){const t=["pdf","jpeg","png","jpg"],s=a.split(".").pop().toLowerCase();return t.includes(s)}const Ce=function(a){let t=0;const s=a.length;let m=0;if(s>0)for(;m<s;)t=(t<<5)-t+a.charCodeAt(m++)|0;return t},r=a=>{const t=new Date,s=a.split("."),m=`${s[0]}${Ce(s[0]+t.getMilliseconds())}.${s[s.length-1]}`;return m.substring(m.length-50)},n=async a=>{const s=a.target.files;for(let m=0;m<s.length;m++){if(!_t(s[m]))return;if(!Fe(s[m].name)){D("Wrong file format, upload PDF, PNG, JPEG or JPG only!");return}const C=await it(rt.EmployeeW4,`${xe.value}`,I.value.toString()),Z=r(s[m].name),U=new FileReader;U.onload=()=>{const ee=U.result.toString(),H={fileName:Z,filePath:C,fileObject:new File([s[m]],Z),fileUrl:ee};y.value.push(H)},U.readAsDataURL(s[m])}O.value=!0},i=()=>{const a=document.getElementById("upload_file");a.value="",a.click()},h=async a=>{if(!!a)if(a?.fileObject)window.open("","_blank").document.write('<iframe src="'+a?.fileUrl+'" width="100%" height="100%"></iframe>');else{let t="";const s=a.fileName.split(".");s.length>1?t=s[s.length-1].toLowerCase():t="";const m=`${a.filePath}/${a.fileName}`;t==="pdf"?(S(!0),await L.previewPDFFile(m).finally(()=>{S(!1)})):["png","jpg","jpeg"].includes(t)&&(S(!0),L.previewImageFile(m).finally(()=>{S(!1)}))}},R=a=>{y.value=y.value.filter(t=>t.fileName!==a.fileName),X.value.push(`${a.filePath}/${a.fileName}`),O.value=!0},q=async(a,t)=>{await L.uploadDocument({path:a,file:t,fileName:t.name},!0)},z=()=>{V.value=!V.value},ie=()=>{f.value.signaturePath=""},re=async a=>{const t=`FormEEOSelfIdentification-Signature-${new Date().getTime()}.png`,s=await yt(a,t);J.value.path=K.value,J.value.name=t,J.value.fileObject=s,f.value.signatureValue=a,f.value.signaturePath=`${K.value}/${t}`},Ne=a=>{f.value.signaturePath=a;const t=localStorage.getItem("signature");f.value.signatureValue=t};Re(async()=>{S(!0);try{await ve(Number(I.value)),A.value=Ee.value.find(t=>t.progressSidebarUrl.trim().toLocaleLowerCase()==="onboardingEEOSelfIdentification".trim().toLocaleLowerCase()),await Y(Number(I.value),b),T.value=W.value,T.value.uploadFileStateForms.forEach(t=>{y.value.push({fileName:t.fileName,filePath:t.filePath})});const a=T.value.fieldModels.reduce((t,{fieldKey:s,fieldValue:m})=>(m!==void 0&&(t[s]=m),t),{});if(a.employeeSignatureDateUTC){const[t,s]=a.employeeSignatureDateUTC.split("T"),m=new Date(`2000-01-01T${s}`),C=`${m.getUTCHours().toString().padStart(2,"0")}:${m.getUTCMinutes().toString().padStart(2,"0")}`;oe.value=t,we.value=C}f.value=a,ge.value=!0}catch(a){console.error(a)}finally{S(!1)}});const Ie=a=>a.description?`<strong>${a.value}: </strong>
                <span>${a.description}</span>`:`<strong>${a.value}</strong>`,$e=()=>{P.value=!1,ye.value=!0,Q.push(be.value)},Oe=()=>{P.value=!1},Ve=async(a,t)=>{S(!0);try{await he(a,t)}catch{D(`${a} is missing`)}finally{S(!1)}};return ot((a,t,s)=>O.value?(P.value=!0,be.value=a.fullPath,ye.value?(s(),!0):(s(!1),!1)):(s(),!0)),(a,t)=>{const s=_("font-awesome-icon"),m=_("fs-button"),C=_("fs-col"),Z=_("fs-link"),U=_("fs-row"),ee=_("fs-dropdown-item"),H=_("fs-dropdown"),E=_("fs-card-header"),de=_("fs-card-body"),ht=_("fs-card"),ue=_("fs-input"),qe=_("fs-form-radio"),Te=_("fs-form-group"),ze=_("fs-form-input"),gt=_("VeeForm");return d(),c(j,null,[e(gt,{ref_key:"formRef",ref:$},{default:o(()=>[l("div",xt,[l("div",Ft,[v(k).mobile?(d(),c("div",Ct,"EEO Self-Identification ")):(d(),c("div",Nt,"EEO Self-Identification | Equal Employment Opportunity Self-Identification "))]),l("div",It,[e(m,{class:"d-flex align-items-center",type:"submit",variant:"outline-primary",disabled:!O.value,onClick:t[0]||(t[0]=u=>se(u,!1))},{default:o(()=>[e(s,{icon:["far","floppy-disk"]}),v(k).mobile?x("",!0):(d(),c("span",$t,"Save"))]),_:1},8,["disabled"]),e(m,{type:"submit",variant:"primary",onClick:t[1]||(t[1]=u=>se(u,!0)),disabled:!O.value},{default:o(()=>[g("Save & next")]),_:1},8,["disabled"])])]),l("div",Ot,[v(k).mobile?x("",!0):(d(),c("div",Vt,[e(U,{class:"card state_card mx-0 mb-3"},{default:o(()=>[e(C,{class:"state_card_left d-flex align-items-center",cols:"4"},{default:o(()=>[Tt]),_:1}),e(C,{class:"state_card_right",cols:"8"},{default:o(()=>[y.value.length>0?(d(),c("div",Ut,[(d(!0),c(j,null,te(y.value,u=>(d(),c("div",{key:u.fileName,class:"mb-2"},[l("div",Dt,[e(Z,{onClick:B=>h(u),class:"d-flex gap-2 align-items-center text-decoration-none text-black"},{default:o(()=>[e(s,{icon:["fal","paperclip"],class:"text-task-blue"}),l("span",Pt,ce(v(ke)(u.fileName)),1)]),_:2},1032,["onClick"]),l("div",{style:{display:"inline",cursor:"pointer"},onClick:B=>R(u)},[e(s,{icon:v(De),class:"text-danger"},null,8,["icon"])],8,jt)])]))),128))])):(d(),c("div",Lt,[At,e(m,{variant:"outline-green",onClick:i},{default:o(()=>[e(s,{icon:["fal","upload"],size:"lg",class:"me-2"}),g(" Upload")]),_:1}),l("input",{type:"file",name:"files",multiple:"",id:"upload_file",onChange:n,ref:"W4FederalFileInput",hidden:""},null,544)]))]),_:1})]),_:1}),y.value.length>0?(d(),c("div",Rt,[e(m,{variant:"outline-green",onClick:i},{default:o(()=>[e(s,{icon:["fal","upload"],size:"lg",class:"me-2"}),g(" Upload")]),_:1}),l("input",{type:"file",name:"files",multiple:"",id:"upload_file",onChange:n,ref:"W4FederalFileInput",hidden:""},null,544)])):x("",!0)])),v(k).mobile?(d(),c("div",Mt,[e(ht,{"no-body":"",class:"h-100"},{default:o(()=>[e(E,{class:"fs-16px font-weight-bold p-3 d-flex align-items-center justify-content-between"},{default:o(()=>[l("div",qt,[e(s,{icon:["fal","landmark"],class:"text-cornflower-blue-dark",size:"lg"}),g(" EEO Self-Identification ")]),l("div",zt,[y.value.length>0?(d(),ae(m,{key:0,variant:"link",class:"text-decoration-none",onClick:i},{default:o(()=>[g("Upload")]),_:1})):x("",!0),l("input",{type:"file",name:"files",multiple:"",id:"upload_file",onChange:n,hidden:""},null,32),e(H,{size:"lg",variant:"link","no-caret":""},{"button-content":o(()=>[e(s,{icon:["fas","circle-ellipsis"],size:"lg"})]),default:o(()=>[e(ee,{onClick:t[2]||(t[2]=u=>Ve(v(Pe).FORM_EEO,!1))},{default:o(()=>[e(s,{icon:["fal","download"],class:"me-2"}),g(" Download")]),_:1})]),_:1})])]),_:1}),e(de,{class:"p-0"},{default:o(()=>[y.value.length>0?(d(),c("div",Ht,[(d(!0),c(j,null,te(y.value,u=>(d(),c("div",{key:u.fileName,class:"mb-2"},[l("div",Bt,[e(Z,{onClick:B=>h(u),class:"d-flex gap-2 align-items-center text-decoration-none text-black"},{default:o(()=>[l("span",Gt,ce(v(ke)(u.fileName)),1)]),_:2},1032,["onClick"]),l("div",{style:{display:"inline",cursor:"pointer"},onClick:B=>R(u)},[e(s,{icon:v(De),class:"text-danger"},null,8,["icon"])],8,Qt)])]))),128))])):(d(),c("div",Yt,[Wt,e(m,{variant:"outline-green",onClick:i},{default:o(()=>[e(s,{icon:["fal","upload"],size:"lg",class:"me-2"}),g(" Upload")]),_:1}),l("input",{type:"file",name:"files",multiple:"",id:"upload_file",onChange:n,hidden:""},null,32)]))]),_:1})]),_:1})])):x("",!0),e(ue,{class:"mt-3",type:"FsTextArea",label:"Note",modelValue:f.value.note,"onUpdate:modelValue":t[3]||(t[3]=u=>f.value.note=u),name:"note",rules:{required:!1},required:!1,onInput:t[4]||(t[4]=u=>O.value=!0)},null,8,["modelValue"]),Jt,Kt,e(U,null,{default:o(()=>[e(C,{md:"5",xs:"12"},{default:o(()=>[e(ue,{type:"fsTextInput",label:"First Name",name:"firstName",modelValue:f.value.firstName,"onUpdate:modelValue":t[5]||(t[5]=u=>f.value.firstName=u),rules:{required:!1},required:!0,maxlength:20,disabled:!0},null,8,["modelValue"])]),_:1}),e(C,{md:"2",xs:"12"},{default:o(()=>[e(ue,{type:"fsTextInput",label:"Middle Initial",name:"middleInitial",modelValue:f.value.middleInitial,"onUpdate:modelValue":t[6]||(t[6]=u=>f.value.middleInitial=u),rules:{required:!1},required:!1,maxlength:1,disabled:!0},null,8,["modelValue"])]),_:1}),e(C,{md:"5",xs:"12"},{default:o(()=>[e(ue,{type:"fsTextInput",label:"Last Name",name:"lastName",modelValue:f.value.lastName,"onUpdate:modelValue":t[7]||(t[7]=u=>f.value.lastName=u),rules:{required:!1},required:!0,maxlength:20,disabled:!0},null,8,["modelValue"])]),_:1})]),_:1}),e(U,null,{default:o(()=>[e(C,{md:"6",xs:"12"},{default:o(()=>[e(ue,{type:"fsTextInput",label:"Job Title",name:"jobTitle",modelValue:f.value.jobTitle,"onUpdate:modelValue":t[8]||(t[8]=u=>f.value.jobTitle=u),rules:{required:!1},required:!0,disabled:!0},null,8,["modelValue"])]),_:1})]),_:1}),Xt,e(U,null,{default:o(()=>[Zt,e(Te,{class:"form_group",style:{marginBottom:"22px"}},{default:o(()=>[l("div",ea,[ta,e(s,{icon:["fas","asterisk"]})]),(d(!0),c(j,null,te(v(_e),u=>(d(),ae(qe,{disabled:"",key:u.value,modelValue:f.value.gender,"onUpdate:modelValue":B=>f.value.gender=B,name:"gender",value:u.value},{default:o(()=>[g(ce(u.text),1)]),_:2},1032,["modelValue","onUpdate:modelValue","value"]))),128))]),_:1}),e(Te,{class:"form_group"},{default:o(()=>[l("div",aa,[la,e(s,{icon:["fas","asterisk"]})]),na,(d(!0),c(j,null,te(v(Se),u=>(d(),ae(qe,{disabled:"",key:u.id,modelValue:f.value.race,"onUpdate:modelValue":B=>f.value.race=B,name:"race",value:u.id,class:"mb-4"},{default:o(()=>[l("div",{innerHTML:Ie(u)},null,8,oa)]),_:2},1032,["modelValue","onUpdate:modelValue","value"]))),128))]),_:1})]),_:1}),sa,e(U,null,{default:o(()=>[e(C,{cols:"12",class:"mb-4"},{default:o(()=>[ia,ge.value?(d(),ae(St,{key:0,isEdit:!1,isSignatureConsent:V.value,ref:"signaturePad",onUpdateSignatureConsent:z,isUpdate:O.value,onClearSignature:ie,path:f.value.signaturePath,onSubmitSignature:re,isDisabledAll:!0,isViewOnly:!0,onUpdatePathSignature:Ne},null,8,["isSignatureConsent","isUpdate","path"])):x("",!0)]),_:1}),e(C,{cols:"6"},{default:o(()=>[e(Te,{class:"form_group"},{default:o(()=>[l("div",ra,[da,e(s,{icon:["fas","asterisk"]})]),l("div",ua,[e(ze,{modelValue:f.value.date,"onUpdate:modelValue":t[9]||(t[9]=u=>f.value.date=u),type:"text",disabled:""},null,8,["modelValue"]),e(ze,{modelValue:f.value.time,"onUpdate:modelValue":t[10]||(t[10]=u=>f.value.time=u),type:"time",disabled:""},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1}),ca,fa])]),_:1},512),e(pt,{ref:"leaveDialog",showModal:P.value,title:"Unsaved changes",okText:"YES, LEAVE",okTextVariant:"danger",cancelText:"STAY",cancelBtnVariant:"light",onClose:Oe,onOk:$e},{content:o(()=>[l("span",ma,[e(s,{class:st(["me-2","text-danger"]),icon:["fa-solid","fa-circle-exclamation"],size:"lg"}),pa])]),_:1},8,["showModal"])],64)}}});const va=ct(_a,[["__scopeId","data-v-f9155df7"]]),Me=N=>(dt("data-v-83fd081c"),N=N(),ut(),N),ha={class:"d-flex justify-content-between align-items-center px-4 form_header sticky-header"},ga={class:"title"},ya={key:0,class:"font-weight-bold"},ba={key:1,class:"font-weight-bold"},wa={class:"d-flex align-items-center"},ka={key:0},Sa={class:"p-4"},Ea={key:0,class:"mb-3"},xa={class:"d-flex align-items-center gap-3"},Fa={key:0,class:"w-100"},Ca={class:"d-flex align-items-center flex-1 w-100 justify-content-between"},Na={style:{flex:"1"}},Ia=["onClick"],$a={key:1,class:"d-flex align-items-center justify-content-between w-100"},Oa=Me(()=>l("div",{class:"text-gray"}," No file has been uploaded. ",-1)),Va={key:2},Ta={class:"d-flex align-items-center gap-2"},Ua={class:"d-flex align-items-center flex-row-reverse"},Da={key:0,class:"p-3"},Pa={class:"d-flex align-items-center flex-1 w-100 justify-content-between"},ja={style:{flex:"1"}},La=["onClick"],Aa={key:1,class:"p-3 d-flex flex-column align-items-center gap-3"},Ra=Me(()=>l("div",{class:"text-status-inactive"}," No file has been uploaded. ",-1)),Ma={key:3},qa={class:"d-flex py-3"},za=Me(()=>l("div",null,[g(" Are you sure you want to leave this page? "),l("br"),g(" You have unsaved changes, your data will be lost. ")],-1)),Ha=je({__name:"quickHireEEOSelfIdentification",setup(N){const{responsive:k}=et(),D=at(),L=lt(),{onboardingSideNavItem:G}=me(fe()),{getOnboardingSideNavItems:Q}=fe(),{markOnboardingSidenavItemAsDone:le}=fe(),{getOnboardingQuickHireEEO:_e,updateOnboardingQuickHireEEOForm:Se}=Qe(),{onboardingQuickHireEEO:Y}=me(Qe()),{setLoading:F}=Ae(),W=p(!1),ne=p(""),{notifyError:ve}=tt(),{getDocumentTemplate:Ee}=vt(),S=p(null),he=p(!1),xe=pe(()=>L?.activeUserClient?.clientGuid??"Shared");Ye.add(ft,bt,wt,Je,Ue,We,Ke,Xe,Ze);const M=p(void 0),b=p([]),I=p(""),$=p(!1),O=p(null),y=p(null),f=Le(),V=pe(()=>f.params.id),J=nt(),K=p([]);function ge(r){const n=["pdf","jpeg","png","jpg"],i=r.split(".").pop().toLowerCase();return n.includes(i)}const T=async(r,n)=>{await D.uploadDocument({path:r,file:n,fileName:n.name},!0)},P=async r=>{const i=r.target.files;for(let h=0;h<i.length;h++){if(!_t(i[h]))return;if(!ge(i[h].name)){ve("Upload JPEG, JPG, PDF, PNG only!",null,"Uploaded Failed");return}$.value=!0;const R=await it(rt.EEOQuickHiresDocument,`${xe.value}`,V.value.toString()),q=be(i[h].name),z=new FileReader;z.onload=()=>{const ie=z.result.toString(),re={fileName:q,filePath:R,fileObject:new File([i[h]],q),fileUrl:ie};b.value.push(re)},z.readAsDataURL(i[h])}},ye=function(r){let n=0;const i=r.length;let h=0;if(i>0)for(;h<i;)n=(n<<5)-n+r.charCodeAt(h++)|0;return n};function be(r){const n=new Date,i=r.split("."),h=`${i[0]}${ye(i[0]+n.getMilliseconds())}.${i[i.length-1]}`;return h.substring(h.length-50)}const A=()=>{const r=document.getElementById("upload_file");r.value="",r.click()},X=r=>{$.value=!0,K.value.push(`${r.filePath}/${r.fileName}`),b.value=b.value.filter(n=>n.fileName!==r.fileName),M.value.uploadFileStateForms=M.value.uploadFileStateForms.filter(n=>n.fileName!==n.fileName)},oe=async r=>{F(!0);try{b.value.length>0&&(b.value.forEach(n=>{T(n.filePath,n.fileObject)}),b.value.forEach((n,i)=>{M.value.uploadFileStateForms[i]={formFieldId:S.value,fileName:n.fileName,filePath:n.filePath,description:"",payload:"",documentCategory:null}})),await Se(Number(V.value),M.value),K.value.forEach(n=>{D.deleteFile(n),K.value=[]}),b.value.length>0?await le(y.value.progressSidebarId,!0,Number(V.value)):await le(y.value.progressSidebarId,!1,Number(V.value)),$.value=!1,F(!1),r&&J.push({name:"onboardingVEVRAASelfIdentification"})}catch(n){console.error(n)}finally{F(!1)}},we=async r=>{if(!!r)if(r?.fileObject)window.open("","_blank").document.write('<iframe src="'+r?.fileUrl+'" width="100%" height="100%"></iframe>');else{let n="";const i=r.fileName.split(".");i.length>1?n=i[i.length-1].toLowerCase():n="";const h=`${r.filePath}/${r.fileName}`;n==="pdf"?(F(!0),await D.previewPDFFile(h),F(!1)):["png","jpg","jpeg"].includes(n)&&(F(!0),await D.previewImageFile(h),F(!1))}},se=async(r,n)=>{F(!0);try{await Ee(r,n)}catch{ve(`${r} is missing`)}finally{F(!1)}};Re(async()=>{F(!0);try{$.value=!1,await Q(Number(V.value)),await _e(Number(V.value),mt.EEOQuickHire),y.value=G.value.find(r=>r.progressSidebarUrl.trim().toLocaleLowerCase()==="onboardingEEOSelfIdentification".trim().toLocaleLowerCase()),M.value=Y.value,b.value=Y.value.uploadFileStateForms,S.value=Y.value.fieldModels.find(r=>r.fieldKey==="formFiles").formFieldId,I.value=Y.value.fieldModels.find(r=>r.fieldKey==="note").fieldValue}catch(r){console.error(r)}finally{F(!1)}});const Fe=()=>{W.value=!1,he.value=!0,J.push(ne.value)},Ce=()=>{W.value=!1};return ot((r,n,i)=>$.value?(W.value=!0,ne.value=r.fullPath,he.value?(i(),!0):(i(!1),!1)):(i(),!0)),(r,n)=>{const i=_("font-awesome-icon"),h=_("fs-button"),R=_("fs-link"),q=_("fs-col"),z=_("fs-row"),ie=_("fs-dropdown-item"),re=_("fs-dropdown"),Ne=_("fs-card-header"),Ie=_("fs-card-body"),$e=_("fs-card"),Oe=_("fs-input"),Ve=_("VeeForm");return d(),c(j,null,[e(Ve,{onSubmit:n[6]||(n[6]=kt(a=>oe(!1),["prevent"])),ref_key:"formRef",ref:O},{default:o(()=>[l("div",ha,[l("div",ga,[v(k).mobile?(d(),c("div",ya,"EEO Self-Identification ")):(d(),c("div",ba,"EEO Self-Identification | Equal Employment Opportunity Self-Identification "))]),l("div",wa,[e(h,{disabled:!$.value,class:"d-flex align-items-center",type:"submit",variant:"outline-primary",onClick:n[0]||(n[0]=a=>oe(!1))},{default:o(()=>[e(i,{icon:["far","floppy-disk"]}),v(k).mobile?x("",!0):(d(),c("span",ka,"Save"))]),_:1},8,["disabled"]),e(h,{disabled:!$.value,type:"submit",variant:"primary",onClick:n[1]||(n[1]=a=>oe(!0))},{default:o(()=>[g("Save & next")]),_:1},8,["disabled"])])]),l("div",Sa,[v(k).mobile?x("",!0):(d(),c("div",Ea," EEO Self-Identification | Equal Employment Opportunity Self-Identification ")),v(k).mobile?x("",!0):(d(),ae(z,{key:1,class:"card state_card mx-0 mb-3"},{default:o(()=>[e(q,{class:"state_card_left d-flex align-items-center",cols:"4"},{default:o(()=>[l("div",xa,[e(R,{onClick:n[2]||(n[2]=a=>se(v(Pe).FORM_EEO,!1))},{default:o(()=>[g("Download")]),_:1})])]),_:1}),e(q,{class:"state_card_right",cols:"8"},{default:o(()=>[b.value.length>0?(d(),c("div",Fa,[(d(!0),c(j,null,te(b.value,a=>(d(),c("div",{key:a.fileName,class:"mb-2"},[l("div",Ca,[e(R,{onClick:t=>we(a),class:"d-flex gap-2 align-items-center text-decoration-none text-black"},{default:o(()=>[e(i,{icon:["fal","paperclip"],class:"text-task-blue"}),l("span",Na,ce(v(ke)(a.fileName)),1)]),_:2},1032,["onClick"]),l("div",{style:{display:"inline",cursor:"pointer"},onClick:t=>X(a)},[e(i,{icon:v(Ue),class:"text-danger"},null,8,["icon"])],8,Ia)])]))),128))])):(d(),c("div",$a,[Oa,e(h,{variant:"outline-green",onClick:A},{default:o(()=>[e(i,{icon:["fal","upload"],size:"lg",class:"me-2"}),g(" Upload")]),_:1}),l("input",{type:"file",name:"files",multiple:"",id:"upload_file",onChange:P,hidden:""},null,32)]))]),_:1})]),_:1})),v(k).mobile?(d(),c("div",Va,[e($e,{"no-body":"",class:"h-100"},{default:o(()=>[e(Ne,{class:"fs-16px font-weight-bold p-3 d-flex align-items-center justify-content-between"},{default:o(()=>[l("div",Ta,[e(i,{icon:["fal","landmark"],class:"text-cornflower-blue-dark",size:"lg"}),g(" EEO Self-Identification ")]),l("div",Ua,[b.value.length>0?(d(),ae(h,{key:0,variant:"link",class:"text-decoration-none",onClick:A},{default:o(()=>[g("Upload")]),_:1})):x("",!0),l("input",{type:"file",name:"files",multiple:"",id:"upload_file",onChange:P,hidden:""},null,32),e(re,{size:"lg",variant:"link","no-caret":""},{"button-content":o(()=>[e(i,{icon:["fas","circle-ellipsis"],size:"lg"})]),default:o(()=>[e(ie,{onClick:n[3]||(n[3]=a=>se(v(Pe).FORM_EEO,!1))},{default:o(()=>[e(i,{icon:["fal","download"],class:"me-2"}),g(" Download")]),_:1})]),_:1})])]),_:1}),e(Ie,{class:"p-0"},{default:o(()=>[b.value.length>0?(d(),c("div",Da,[(d(!0),c(j,null,te(b.value,a=>(d(),c("div",{key:a.fileName,class:"mb-2"},[l("div",Pa,[e(R,{onClick:t=>we(a),class:"d-flex gap-2 align-items-center text-decoration-none text-black"},{default:o(()=>[l("span",ja,ce(v(ke)(a.fileName)),1)]),_:2},1032,["onClick"]),l("div",{style:{display:"inline",cursor:"pointer"},onClick:t=>X(a)},[e(i,{icon:v(Ue),class:"text-danger"},null,8,["icon"])],8,La)])]))),128))])):(d(),c("div",Aa,[Ra,e(h,{variant:"outline-green",onClick:A},{default:o(()=>[e(i,{icon:["fal","upload"],size:"lg",class:"me-2"}),g(" Upload")]),_:1}),l("input",{type:"file",name:"files",multiple:"",id:"upload_file",onChange:P,hidden:""},null,32)]))]),_:1})]),_:1})])):x("",!0),b.value.length>0&&!v(k).mobile?(d(),c("div",Ma,[e(h,{variant:"outline-green",onClick:A},{default:o(()=>[e(i,{icon:["fal","upload"],size:"lg",class:"me-2"}),g(" Upload")]),_:1}),l("input",{type:"file",name:"files",multiple:"",id:"upload_file",onChange:P,hidden:""},null,32)])):x("",!0),e(Oe,{class:"mt-4",name:"note",rules:{required:!1},required:!1,type:"FsTextArea",label:"Note",modelValue:I.value,"onUpdate:modelValue":n[4]||(n[4]=a=>I.value=a),onInput:n[5]||(n[5]=a=>$.value=!0)},null,8,["modelValue"])])]),_:1},512),e(pt,{ref:"leaveDialog",showModal:W.value,title:"Unsaved changes",okText:"YES, LEAVE",okTextVariant:"danger",cancelText:"STAY",cancelBtnVariant:"light",onClose:Ce,onOk:Fe},{content:o(()=>[l("span",qa,[e(i,{class:st(["me-2","text-danger"]),icon:["fa-solid","fa-circle-exclamation"],size:"lg"}),za])]),_:1},8,["showModal"])],64)}}});const Ba=ct(Ha,[["__scopeId","data-v-83fd081c"]]),Ga={key:0},Qa={key:1},ol=je({__name:"onboardingEEO",setup(N){const{employeeDetails:k}=me(He()),{fetchEmployeeDetails:D}=He(),L=Le(),{setLoading:G}=Ae(),Q=pe(()=>L.params.id);return Re(async()=>{G(!0),await D(Q.value),G(!1)}),(le,_e)=>(d(),c(j,null,[Number(v(k).employeeStatusId)===v(Be).QuickHire?(d(),c("div",Ga,[e(Ba)])):x("",!0),Number(v(k).employeeStatusId)===v(Be).Onboard?(d(),c("div",Qa,[e(va)])):x("",!0)],64))}});export{ol as default};
