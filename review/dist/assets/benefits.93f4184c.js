import{e as De}from"./employeeHeader.c061ea79.js";import{J as be,K as ye,L as he,N as ge,R as we,d as W,l as le,a_ as Ee,Q as ie,j as d,at as Q,b as U,r as s,o as _,f as q,w as t,u as v,aH as xe,a as l,g as e,I as M,c as y,a2 as j,ax as ce,ay as de,_ as ue,aE as Ae,e as re,D as N,F as z,z as Ce,ba as Se,i as te,s as ke,a1 as Te,am as Ie}from"./index.611fe570.js";import{D as ne,a as w,E,b as H,c as K}from"./DeductionType.5fffbeba.js";import{c as Ne}from"./commonModal.7c7715d3.js";const Me="/assets/Benefits.a9dc0783.svg",oe="employees";class Oe extends he{constructor(u){const o=ge().ClientSide.WorkforceManagement+"/v1";super(u,o)}async getDeductionDetails(u,o){let i;try{const r=await this.axiosInstance.get(`${oe}/${u}/deductions/${o}`);if(r&&r.status===200)i=r.data;else throw new Error("Failed to parse deduction")}catch(r){console.error("An unexpected error occurred attempting to retrieve the deduction.",r)}return i}async updateDeduction(u){try{const o=await this.axiosInstance.patch(`${oe}/${u.employeeId}/deductions/${u.employeeDeductionId}`,u.data);return o&&o.status===200?{success:!0,errorMessage:" updated."}:{success:!1,errorMessage:"An unexpected error occurred attempting to update deduction"}}catch(o){return{success:!1,errorMessage:o.response?.data?.errorMessage?.replace("InvokeActionMethodAsync :","")}}}}const se=new Oe([be,ye]),fe=we("benefitsDeduction",()=>{async function n(o,i){return await se.getDeductionDetails(o,i)}async function u(o){return await se.updateDeduction(o)}return{getBenefitsDetail:n,editbenefits:u}}),$e=[{text:ne.AMOUNT,value:w.AMOUNT},{text:ne.PERCENT,value:w.PERCENT}],L=n=>(ce("data-v-5af6e096"),n=n(),de(),n),Be={class:"mr-3 d-flex align-items-center"},Ve=L(()=>l("div",{class:"h5 pl-2 my-auto font-weight-bold"},[l("b",null,"Edit 401(k) Deduction Amount")],-1)),Fe={class:"ms-auto"},Ue={class:"d-flex align-items-center justify-content-between p-2"},Le=L(()=>l("div",{class:"message-content"}," Are you sure you want to close the Edit 401K panel? Any unsaved changes will be lost. ",-1)),Pe={key:0,class:"d-flex flex-column h-100 w-100 p-2 pt-3"},Re={key:0,class:"deduction"},qe=L(()=>l("div",null,[l("label",{class:"fw-bold deduction__label"},"Deduction Amount")],-1)),je={key:1,class:"deduction"},ze=L(()=>l("div",null,[l("label",{class:"fw-bold deduction__label"},"Deduction Percentage")],-1)),He={key:0,style:{color:"red"}},Ke=W({__name:"editBenefitPanel",props:{showEditBenefits:{type:Boolean,default:!1},benefitDeductionData:{default:null}},emits:[E.RELOAD,E.CLOSE_FORM],setup(n,{expose:u,emit:o}){const i=n;le.add(Ee);const{notifySuccess:r,notifyError:x}=ie(),A=fe(),h=d(!1),g=d(!1),C=Q(),S=U(()=>C.params?.id?.toString()),D=U(()=>i.showEditBenefits),c=d(w.AMOUNT),k=d(null),O=async()=>{const{errors:I}=await k.value.validate();if(Object.keys(I).length===0){c.value===w.AMOUNT?i.benefitDeductionData.deductionPercent=0:i.benefitDeductionData.fixedDedAmount=0;const a={employeeId:S.value,employeeDeductionId:i.benefitDeductionData.employeeDeductionId,data:i.benefitDeductionData};(await A.editbenefits(a)).success?(r("401k benefits update successful"),o(E.CLOSE_FORM,!1),o(E.RELOAD,!0)):x("Failed to update 401k benefits")}},p=()=>{c.value===w.AMOUNT?i.benefitDeductionData.deductionPercent=0:i.benefitDeductionData.fixedDedAmount=0},b=d(!1);function $(){const I=i.benefitDeductionData.deductionPercent?.toString().split(".")[1]?.length||0;if(b.value=I>7,i.benefitDeductionData.deductionPercent!==0)return g.value=!0}function P(){if(i.benefitDeductionData.fixedDedAmount!==0)return g.value=!0}function V(){g.value?h.value=!0:(k.value.resetForm(),c.value=w.AMOUNT,o(E.CLOSE_FORM))}function T(){h.value=!1}function B(){k.value.resetForm(),c.value=w.AMOUNT,o(E.CLOSE_FORM),h.value=!1}return u({selected:c}),(I,a)=>{const F=s("font-awesome-icon"),f=s("fs-link"),R=s("fs-button"),me=s("fs-form-radio-group"),J=s("fs-row"),X=s("fs-form-input"),Y=s("VeeField"),Z=s("ErrorMessage"),ee=s("fs-input-group"),_e=s("VeeForm"),pe=s("fs-container"),ve=s("fs-sidebar");return _(),q(ve,{id:"editBenefit","sidebar-class":"fsi-sidebar help-center header-grey","body-class":"help-center__body",right:"","no-close-on-esc":"","no-close-on-backdrop":"","bg-variant":"white",width:"425px",shadow:"sm","header-class":"border-bottom","footer-class":"border-top","aria-label":"benefit plan","no-header-close":"",modelValue:v(D),"onUpdate:modelValue":a[8]||(a[8]=m=>xe(D)?D.value=m:null)},{title:t(()=>[l("div",Be,[Ve,l("div",Fe,[e(f,{class:"text-secondary",tag:"a",onClick:V},{default:t(()=>[e(F,{icon:["fal","times"],size:"sm"})]),_:1})])])]),footer:t(()=>[l("div",Ue,[e(R,{variant:"outline-secondary",class:"btn btn-outline-gray",onClick:a[0]||(a[0]=m=>V())},{default:t(()=>[M("Cancel")]),_:1}),e(R,{variant:"btn-primary",class:"btn btn-primary",onClick:O},{default:t(()=>[M("SAVE")]),_:1})])]),default:t(()=>[e(Ne,{showModal:h.value,title:"CLOSE EDIT 401K DEDUCTION AMOUNT FORM",okText:"CLOSE",cancelText:"CANCEL",okTextVariant:"primary",onEmitParent:a[1]||(a[1]=m=>B()),onEmitCloseParent:a[2]||(a[2]=m=>T())},{content:t(()=>[Le]),_:1},8,["showModal"]),n.benefitDeductionData?(_(),y("div",Pe,[e(pe,{fluid:""},{default:t(()=>[e(J,{class:"align-items-center"},{default:t(()=>[e(me,{id:"radio-group-unit-options",modelValue:c.value,"onUpdate:modelValue":a[3]||(a[3]=m=>c.value=m),options:v($e),name:"unit-options",onChange:p},null,8,["modelValue","options"])]),_:1}),e(_e,{ref_key:"form",ref:k},{default:t(()=>[e(J,{class:"align-items-center pt-2"},{default:t(()=>[c.value==v(w).AMOUNT?(_(),y("div",Re,[qe,e(ee,{prepend:"$",class:"deduction__amount"},{default:t(()=>[e(Y,{class:"deduction--prepend",type:"number",name:"deduction amount",modelValue:n.benefitDeductionData.fixedDedAmount,"onUpdate:modelValue":a[5]||(a[5]=m=>n.benefitDeductionData.fixedDedAmount=m),rules:{required:!0}},{default:t(()=>[e(X,{type:"number",modelValue:n.benefitDeductionData.fixedDedAmount,"onUpdate:modelValue":a[4]||(a[4]=m=>n.benefitDeductionData.fixedDedAmount=m),onInput:P},null,8,["modelValue"])]),_:1},8,["modelValue"]),e(Z,{class:"message-error",name:"deduction amount"})]),_:1})])):(_(),y("div",je,[ze,e(ee,{append:"%",class:"deduction__percent"},{default:t(()=>[e(Y,{class:"deduction--append",type:"number",name:"deduction percentage",modelValue:n.benefitDeductionData.deductionPercent,"onUpdate:modelValue":a[7]||(a[7]=m=>n.benefitDeductionData.deductionPercent=m),rules:{required:!0,max_value:100,min_value:0}},{default:t(()=>[e(X,{type:"number",modelValue:n.benefitDeductionData.deductionPercent,"onUpdate:modelValue":a[6]||(a[6]=m=>n.benefitDeductionData.deductionPercent=m),step:"0.0000001",onInput:$},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),b.value===!0?(_(),y("span",He,"Enter up to 7 digits after the decimal point.")):j("",!0),e(Z,{class:"message-error",name:"deduction percentage"})]))]),_:1})]),_:1},512)]),_:1})])):j("",!0)]),_:1},8,["modelValue"])}}});const We=ue(Ke,[["__scopeId","data-v-5af6e096"]]),Qe="/assets/Deductions.d4a45685.svg",G=n=>(ce("data-v-d18b92b7"),n=n(),de(),n),Ge={key:0,class:"flex-fill flex-column d-flex align-items-center justify-content-center py-5"},Je={class:"text-center"},Xe={class:"fw-bold mb-4"},Ye=["src","alt"],Ze={class:"text-center text-secondary mb-3"},et=G(()=>l("br",null,null,-1)),tt={class:"dashboard-card__icon-and-heading text-cyan"},nt={key:0},ot=G(()=>l("strong",null,"Plan Name",-1)),st=G(()=>l("strong",null,"Deduction Amount",-1)),at=W({__name:"employeeDeductionsTab",props:{deductions:null,title:null,showSplashScreen:{type:Boolean}},emits:[E.RELOAD],setup(n,{expose:u,emit:o}){const i=n;le.add(Ae);const r=d(!1),x=d(null),A=d(0),h=Q(),g=U(()=>h.params?.id?.toString()),C=fe();d(null);const S=d(),D=d(""),c=p=>{r.value=p},k=p=>{o(E.RELOAD,p)};u({benefitsDeduction:x,currentTabActive:A});const O=async(p,b)=>{if(b!=0){const $=await C.getBenefitsDetail(p,b);S.value=$}else S.value.id=b;r.value=!0};return re(async()=>{D.value=i.title===H.BENEFIT?Me:Qe}),(p,b)=>{const $=s("font-awesome-icon"),P=s("fs-button"),V=s("fs-card-header"),T=s("fs-col"),B=s("fs-row"),I=s("fs-container"),a=s("fs-card-body"),F=s("fs-card");return _(),y(z,null,[n.showSplashScreen?(_(),y("div",Ge,[l("div",Je,[l("h5",Xe,"No "+N(n.title),1),l("img",{width:"120",class:"mb-4",src:D.value,alt:"No "+n.title},null,8,Ye),l("div",Ze,[M(" This employee does not currently have"),et,M(" any "+N(n.title?.toLocaleLowerCase())+". ",1)])])])):(_(),q(I,{key:1,fluid:"",class:"contain"},{default:t(()=>[e(B,null,{default:t(()=>[(_(!0),y(z,null,Ce(n.deductions,f=>(_(),q(T,{key:f.employeeDeductionId,lg:"6"},{default:t(()=>[e(F,{"no-body":"",class:"rounded-1 mt-4"},{default:t(()=>[e(V,{class:"dashboard-card__header"},{default:t(()=>[l("div",tt,[l("span",null,N(f.planName)+" - "+N(f.customizedName),1)]),f.isWHQEditable&&f.deductionTypeId===v(K).BENEFIT?(_(),y("div",nt,[e(P,{size:"lg",variant:"link",onClick:R=>O(v(g),f.employeeDeductionId)},{default:t(()=>[e($,{icon:["fal","edit"],class:"text-primary"})]),_:2},1032,["onClick"])])):j("",!0)]),_:2},1024),e(a,null,{default:t(()=>[e(I,{fluid:"",class:"contain"},{default:t(()=>[e(B,{class:"py-1"},{default:t(()=>[e(T,{cols:"4"},{default:t(()=>[ot]),_:1}),e(T,null,{default:t(()=>[M(N(f.planName),1)]),_:2},1024)]),_:2},1024),e(B,{class:"py-1"},{default:t(()=>[e(T,{cols:"4"},{default:t(()=>[st]),_:1}),e(T,null,{default:t(()=>[M(N(f.fixedDedAmount===0&&f.deductionPercent===0?"0":f.fixedDedAmount===0?f.deductionPercent+"%":v(Se)(f.fixedDedAmount)||"0"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})),e(We,{showEditBenefits:r.value,benefitDeductionData:S.value,onCloseForm:c,onReload:k},null,8,["showEditBenefits","benefitDeductionData"])],64)}}});const ae=ue(at,[["__scopeId","data-v-d18b92b7"]]),lt={class:"text-center"},it=["src"],ct={class:"hq-pg"},mt=W({__name:"benefits",setup(n){const{fetchEmployeeDeductionsList:u}=te(),{employeeDeductions:o}=ke(te()),i=d(new Array),r=d(new Array),x=d(!1),A=d(!1),h=Q();ie();const g=U(()=>+h.params?.id),C=d(!1),S=c=>{C.value=c};Te(()=>C.value,async()=>{await D()});const D=async()=>{await u(g.value),!o.value||o.value.length===0?A.value=!0:(i.value=o.value.filter(c=>c.deductionTypeId==K.BENEFIT),r.value=o.value.filter(c=>c.deductionTypeId==K.DEDUCTION)),C.value=!1};return re(async()=>{x.value=!0,await D(),x.value=!1}),(c,k)=>{const O=s("fs-overlay"),p=s("fs-tab"),b=s("fs-tabs");return _(),y(z,null,[e(O,{show:x.value,class:"fsi-pg__overlay","no-wrap":""},{overlay:t(()=>[l("div",lt,[l("img",{src:v(Ie)},null,8,it)])]),_:1},8,["show"]),l("div",ct,[e(De,{employeeId:v(g),class:"position-relative"},null,8,["employeeId"]),e(b,{pills:"","active-nav-item-class":"bg-index-color-0 hq-pg__tab--active","nav-wrapper-class":"hq-pg__header hq-pg__header--sticky justify-content-center contain","content-class":"flex-fill mb-4"},{default:t(()=>[e(p,{title:"Benefits",active:"","title-item-class":"mx-1","title-link-class":"hq-pg__tab"},{default:t(()=>[e(ae,{onReload:S,deductions:i.value,title:v(H).BENEFIT,showSplashScreen:A.value},null,8,["deductions","title","showSplashScreen"])]),_:1}),e(p,{title:"Deductions","title-item-class":"mx-1","title-link-class":"hq-pg__tab"},{default:t(()=>[e(ae,{deductions:r.value,title:v(H).DEDUCTION,showSplashScreen:A.value},null,8,["deductions","title","showSplashScreen"])]),_:1})]),_:1})])],64)}}});export{mt as default};
